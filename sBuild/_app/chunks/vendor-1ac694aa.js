function be(){}function We(t,n){for(const e in n)t[e]=n[e];return t}function iv(t){return t&&typeof t=="object"&&typeof t.then=="function"}function rl(t){return t()}function il(){return Object.create(null)}function Jn(t){t.forEach(rl)}function al(t){return typeof t=="function"}function Va(t,n){return t!=t?n==n:t!==n||t&&typeof t=="object"||typeof t=="function"}function av(t){return Object.keys(t).length===0}function ol(t,...n){if(t==null)return be;const e=t.subscribe(...n);return e.unsubscribe?()=>e.unsubscribe():e}function mB(t){let n;return ol(t,e=>n=e)(),n}function yB(t,n,e){t.$$.on_destroy.push(ol(n,e))}function _B(t,n,e,r){if(t){const i=sl(t,n,e,r);return t[0](i)}}function sl(t,n,e,r){return t[1]&&r?We(e.ctx.slice(),t[1](r(n))):e.ctx}function xB(t,n,e,r){if(t[2]&&r){const i=t[2](r(e));if(n.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(n.dirty.length,i.length);for(let s=0;s<o;s+=1)a[s]=n.dirty[s]|i[s];return a}return n.dirty|i}return n.dirty}function bB(t,n,e,r,i,a){if(i){const o=sl(n,e,r,a);t.p(o,i)}}function OB(t){if(t.ctx.length>32){const n=[],e=t.ctx.length/32;for(let r=0;r<e;r++)n[r]=-1;return n}return-1}function ul(t){const n={};for(const e in t)e[0]!=="$"&&(n[e]=t[e]);return n}function ti(t,n){const e={};n=new Set(n);for(const r in t)!n.has(r)&&r[0]!=="$"&&(e[r]=t[r]);return e}function TB(t,n,e){return t.set(e),n}function wB(t){return t&&al(t.destroy)?t.destroy:be}let ei=!1;function ov(){ei=!0}function sv(){ei=!1}function uv(t,n,e,r){for(;t<n;){const i=t+(n-t>>1);e(i)<=r?t=i+1:n=i}return t}function lv(t){if(t.hydrate_init)return;t.hydrate_init=!0;let n=t.childNodes;if(t.nodeName==="HEAD"){const u=[];for(let l=0;l<n.length;l++){const c=n[l];c.claim_order!==void 0&&u.push(c)}n=u}const e=new Int32Array(n.length+1),r=new Int32Array(n.length);e[0]=-1;let i=0;for(let u=0;u<n.length;u++){const l=n[u].claim_order,c=(i>0&&n[e[i]].claim_order<=l?i+1:uv(1,i,h=>n[e[h]].claim_order,l))-1;r[u]=e[c]+1;const f=c+1;e[f]=u,i=Math.max(f,i)}const a=[],o=[];let s=n.length-1;for(let u=e[i]+1;u!=0;u=r[u-1]){for(a.push(n[u-1]);s>=u;s--)o.push(n[s]);s--}for(;s>=0;s--)o.push(n[s]);a.reverse(),o.sort((u,l)=>u.claim_order-l.claim_order);for(let u=0,l=0;u<o.length;u++){for(;l<a.length&&o[u].claim_order>=a[l].claim_order;)l++;const c=l<a.length?a[l]:null;t.insertBefore(o[u],c)}}function cv(t,n){if(ei){for(lv(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;n!==t.actual_end_child?(n.claim_order!==void 0||n.parentNode!==t)&&t.insertBefore(n,t.actual_end_child):t.actual_end_child=n.nextSibling}else(n.parentNode!==t||n.nextSibling!==null)&&t.appendChild(n)}function fv(t,n,e){ei&&!e?cv(t,n):(n.parentNode!==t||n.nextSibling!=e)&&t.insertBefore(n,e||null)}function $a(t){t.parentNode.removeChild(t)}function SB(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function ll(t){return document.createElement(t)}function Ga(t){return document.createTextNode(t)}function EB(){return Ga(" ")}function MB(){return Ga("")}function CB(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function hv(t,n,e){e==null?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function cl(t,n){const e=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in n)n[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=n[r]:r==="__value"?t.value=t[r]=n[r]:e[r]&&e[r].set?t[r]=n[r]:hv(t,r,n[r])}function AB(t){return t===""?null:+t}function fl(t){return Array.from(t.childNodes)}function dv(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function hl(t,n,e,r,i=!1){dv(t);const a=(()=>{for(let o=t.claim_info.last_index;o<t.length;o++){const s=t[o];if(n(s)){const u=e(s);return u===void 0?t.splice(o,1):t[o]=u,i||(t.claim_info.last_index=o),s}}for(let o=t.claim_info.last_index-1;o>=0;o--){const s=t[o];if(n(s)){const u=e(s);return u===void 0?t.splice(o,1):t[o]=u,i?u===void 0&&t.claim_info.last_index--:t.claim_info.last_index=o,s}}return r()})();return a.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,a}function pv(t,n,e,r){return hl(t,i=>i.nodeName===n,i=>{const a=[];for(let o=0;o<i.attributes.length;o++){const s=i.attributes[o];e[s.name]||a.push(s.name)}a.forEach(o=>i.removeAttribute(o))},()=>r(n))}function vv(t,n,e){return pv(t,n,e,ll)}function gv(t,n){return hl(t,e=>e.nodeType===3,e=>{const r=""+n;if(e.data.startsWith(r)){if(e.data.length!==r.length)return e.splitText(r.length)}else e.data=r},()=>Ga(n),!0)}function PB(t){return gv(t," ")}function DB(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function LB(t,n){t.value=n==null?"":n}function RB(t,n){for(let e=0;e<t.options.length;e+=1){const r=t.options[e];if(r.__value===n){r.selected=!0;return}}t.selectedIndex=-1}function kB(t){const n=t.querySelector(":checked")||t.options[0];return n&&n.__value}function mv(t,n,e=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e,!1,n),r}let ni;function Ie(t){ni=t}function tr(){if(!ni)throw new Error("Function called outside component initialization");return ni}function yv(t){tr().$$.on_mount.push(t)}function IB(t){tr().$$.after_update.push(t)}function _v(){const t=tr();return(n,e)=>{const r=t.$$.callbacks[n];if(r){const i=mv(n,e);r.slice().forEach(a=>{a.call(t,i)})}}}function NB(t,n){tr().$$.context.set(t,n)}function Fa(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach(r=>r.call(this,n))}const er=[],nr=[],ri=[],Ha=[],dl=Promise.resolve();let za=!1;function pl(){za||(za=!0,dl.then(Ya))}function BB(){return pl(),dl}function Wa(t){ri.push(t)}function vl(t){Ha.push(t)}let ja=!1;const qa=new Set;function Ya(){if(!ja){ja=!0;do{for(let t=0;t<er.length;t+=1){const n=er[t];Ie(n),xv(n.$$)}for(Ie(null),er.length=0;nr.length;)nr.pop()();for(let t=0;t<ri.length;t+=1){const n=ri[t];qa.has(n)||(qa.add(n),n())}ri.length=0}while(er.length);for(;Ha.length;)Ha.pop()();za=!1,ja=!1,qa.clear()}}function xv(t){if(t.fragment!==null){t.update(),Jn(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(Wa)}}const ii=new Set;let je;function bv(){je={r:0,c:[],p:je}}function Ov(){je.r||Jn(je.c),je=je.p}function Xa(t,n){t&&t.i&&(ii.delete(t),t.i(n))}function gl(t,n,e,r){if(t&&t.o){if(ii.has(t))return;ii.add(t),je.c.push(()=>{ii.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function UB(t,n){const e=n.token={};function r(i,a,o,s){if(n.token!==e)return;n.resolved=s;let u=n.ctx;o!==void 0&&(u=u.slice(),u[o]=s);const l=i&&(n.current=i)(u);let c=!1;n.block&&(n.blocks?n.blocks.forEach((f,h)=>{h!==a&&f&&(bv(),gl(f,1,1,()=>{n.blocks[h]===f&&(n.blocks[h]=null)}),Ov())}):n.block.d(1),l.c(),Xa(l,1),l.m(n.mount(),n.anchor),c=!0),n.block=l,n.blocks&&(n.blocks[a]=l),c&&Ya()}if(iv(t)){const i=tr();if(t.then(a=>{Ie(i),r(n.then,1,n.value,a),Ie(null)},a=>{if(Ie(i),r(n.catch,2,n.error,a),Ie(null),!n.hasCatch)throw a}),n.current!==n.pending)return r(n.pending,0),!0}else{if(n.current!==n.then)return r(n.then,1,n.value,t),!0;n.resolved=t}}function VB(t,n,e){const r=n.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,e)}function ml(t,n){const e={},r={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],s=n[a];if(s){for(const u in o)u in s||(r[u]=1);for(const u in s)i[u]||(e[u]=s[u],i[u]=1);t[a]=s}else for(const u in o)i[u]=1}for(const o in r)o in e||(e[o]=void 0);return e}function Tv(t){return typeof t=="object"&&t!==null?t:{}}function yl(t,n,e){const r=t.$$.props[n];r!==void 0&&(t.$$.bound[r]=e,e(t.$$.ctx[r]))}function wv(t){t&&t.c()}function Sv(t,n){t&&t.l(n)}function _l(t,n,e,r){const{fragment:i,on_mount:a,on_destroy:o,after_update:s}=t.$$;i&&i.m(n,e),r||Wa(()=>{const u=a.map(rl).filter(al);o?o.push(...u):Jn(u),t.$$.on_mount=[]}),s.forEach(Wa)}function xl(t,n){const e=t.$$;e.fragment!==null&&(Jn(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Ev(t,n){t.$$.dirty[0]===-1&&(er.push(t),pl(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function bl(t,n,e,r,i,a,o,s=[-1]){const u=ni;Ie(t);const l=t.$$={fragment:null,ctx:null,props:a,update:be,not_equal:i,bound:il(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:il(),dirty:s,skip_bound:!1,root:n.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=e?e(t,n.props||{},(f,h,...d)=>{const p=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=p)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](p),c&&Ev(t,f)),h}):[],l.update(),c=!0,Jn(l.before_update),l.fragment=r?r(l.ctx):!1,n.target){if(n.hydrate){ov();const f=fl(n.target);l.fragment&&l.fragment.l(f),f.forEach($a)}else l.fragment&&l.fragment.c();n.intro&&Xa(t.$$.fragment),_l(t,n.target,n.anchor,n.customElement),sv(),Ya()}Ie(u)}class Ol{$destroy(){xl(this,1),this.$destroy=be}$on(n,e){const r=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return r.push(e),()=>{const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}$set(n){this.$$set&&!av(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const _n=[];function $B(t,n=be){let e;const r=new Set;function i(s){if(Va(t,s)&&(t=s,e)){const u=!_n.length;for(const l of r)l[1](),_n.push(l,t);if(u){for(let l=0;l<_n.length;l+=2)_n[l][0](_n[l+1]);_n.length=0}}}function a(s){i(s(t))}function o(s,u=be){const l=[s,u];return r.add(l),r.size===1&&(e=n(i)||be),s(t),()=>{r.delete(l),r.size===0&&(e(),e=null)}}return{set:i,update:a,subscribe:o}}var Mv=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Cv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Av(t){if(t.__esModule)return t;var n=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}),n}var Tl={exports:{}};(function(t,n){(function(e,r){t.exports=r()})(Mv,function(){var e=1e3,r=6e4,i=36e5,a="millisecond",o="second",s="minute",u="hour",l="day",c="week",f="month",h="quarter",d="year",p="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(L,I,E){var A=String(L);return!A||A.length>=I?L:""+Array(I+1-A.length).join(E)+L},T={s:y,z:function(L){var I=-L.utcOffset(),E=Math.abs(I),A=Math.floor(E/60),D=E%60;return(I<=0?"+":"-")+y(A,2,"0")+":"+y(D,2,"0")},m:function L(I,E){if(I.date()<E.date())return-L(E,I);var A=12*(E.year()-I.year())+(E.month()-I.month()),D=I.clone().add(A,f),B=E-D<0,M=I.clone().add(A+(B?-1:1),f);return+(-(A+(E-D)/(B?D-M:M-D))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:f,y:d,w:c,d:l,D:p,h:u,m:s,s:o,ms:a,Q:h}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},b="en",O={};O[b]=g;var k=function(L){return L instanceof C},w=function(L,I,E){var A;if(!L)return b;if(typeof L=="string")O[L]&&(A=L),I&&(O[L]=I,A=L);else{var D=L.name;O[D]=L,A=D}return!E&&A&&(b=A),A||!E&&b},S=function(L,I){if(k(L))return L.clone();var E=typeof I=="object"?I:{};return E.date=L,E.args=arguments,new C(E)},R=T;R.l=w,R.i=k,R.w=function(L,I){return S(L,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var C=function(){function L(E){this.$L=w(E.locale,null,!0),this.parse(E)}var I=L.prototype;return I.parse=function(E){this.$d=function(A){var D=A.date,B=A.utc;if(D===null)return new Date(NaN);if(R.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var M=D.match(v);if(M){var U=M[2]-1||0,G=(M[7]||"0").substring(0,3);return B?new Date(Date.UTC(M[1],U,M[3]||1,M[4]||0,M[5]||0,M[6]||0,G)):new Date(M[1],U,M[3]||1,M[4]||0,M[5]||0,M[6]||0,G)}}return new Date(D)}(E),this.$x=E.x||{},this.init()},I.init=function(){var E=this.$d;this.$y=E.getFullYear(),this.$M=E.getMonth(),this.$D=E.getDate(),this.$W=E.getDay(),this.$H=E.getHours(),this.$m=E.getMinutes(),this.$s=E.getSeconds(),this.$ms=E.getMilliseconds()},I.$utils=function(){return R},I.isValid=function(){return this.$d.toString()!==m},I.isSame=function(E,A){var D=S(E);return this.startOf(A)<=D&&D<=this.endOf(A)},I.isAfter=function(E,A){return S(E)<this.startOf(A)},I.isBefore=function(E,A){return this.endOf(A)<S(E)},I.$g=function(E,A,D){return R.u(E)?this[A]:this.set(D,E)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(E,A){var D=this,B=!!R.u(A)||A,M=R.p(E),U=function(nt,z){var Z=R.w(D.$u?Date.UTC(D.$y,z,nt):new Date(D.$y,z,nt),D);return B?Z:Z.endOf(l)},G=function(nt,z){return R.w(D.toDate()[nt].apply(D.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(z)),D)},q=this.$W,tt=this.$M,J=this.$D,Y="set"+(this.$u?"UTC":"");switch(M){case d:return B?U(1,0):U(31,11);case f:return B?U(1,tt):U(0,tt+1);case c:var Q=this.$locale().weekStart||0,K=(q<Q?q+7:q)-Q;return U(B?J-K:J+(6-K),tt);case l:case p:return G(Y+"Hours",0);case u:return G(Y+"Minutes",1);case s:return G(Y+"Seconds",2);case o:return G(Y+"Milliseconds",3);default:return this.clone()}},I.endOf=function(E){return this.startOf(E,!1)},I.$set=function(E,A){var D,B=R.p(E),M="set"+(this.$u?"UTC":""),U=(D={},D[l]=M+"Date",D[p]=M+"Date",D[f]=M+"Month",D[d]=M+"FullYear",D[u]=M+"Hours",D[s]=M+"Minutes",D[o]=M+"Seconds",D[a]=M+"Milliseconds",D)[B],G=B===l?this.$D+(A-this.$W):A;if(B===f||B===d){var q=this.clone().set(p,1);q.$d[U](G),q.init(),this.$d=q.set(p,Math.min(this.$D,q.daysInMonth())).$d}else U&&this.$d[U](G);return this.init(),this},I.set=function(E,A){return this.clone().$set(E,A)},I.get=function(E){return this[R.p(E)]()},I.add=function(E,A){var D,B=this;E=Number(E);var M=R.p(A),U=function(tt){var J=S(B);return R.w(J.date(J.date()+Math.round(tt*E)),B)};if(M===f)return this.set(f,this.$M+E);if(M===d)return this.set(d,this.$y+E);if(M===l)return U(1);if(M===c)return U(7);var G=(D={},D[s]=r,D[u]=i,D[o]=e,D)[M]||1,q=this.$d.getTime()+E*G;return R.w(q,this)},I.subtract=function(E,A){return this.add(-1*E,A)},I.format=function(E){var A=this,D=this.$locale();if(!this.isValid())return D.invalidDate||m;var B=E||"YYYY-MM-DDTHH:mm:ssZ",M=R.z(this),U=this.$H,G=this.$m,q=this.$M,tt=D.weekdays,J=D.months,Y=function(z,Z,at,H){return z&&(z[Z]||z(A,B))||at[Z].substr(0,H)},Q=function(z){return R.s(U%12||12,z,"0")},K=D.meridiem||function(z,Z,at){var H=z<12?"AM":"PM";return at?H.toLowerCase():H},nt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:q+1,MM:R.s(q+1,2,"0"),MMM:Y(D.monthsShort,q,J,3),MMMM:Y(J,q),D:this.$D,DD:R.s(this.$D,2,"0"),d:String(this.$W),dd:Y(D.weekdaysMin,this.$W,tt,2),ddd:Y(D.weekdaysShort,this.$W,tt,3),dddd:tt[this.$W],H:String(U),HH:R.s(U,2,"0"),h:Q(1),hh:Q(2),a:K(U,G,!0),A:K(U,G,!1),m:String(G),mm:R.s(G,2,"0"),s:String(this.$s),ss:R.s(this.$s,2,"0"),SSS:R.s(this.$ms,3,"0"),Z:M};return B.replace(x,function(z,Z){return Z||nt[z]||M.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(E,A,D){var B,M=R.p(A),U=S(E),G=(U.utcOffset()-this.utcOffset())*r,q=this-U,tt=R.m(this,U);return tt=(B={},B[d]=tt/12,B[f]=tt,B[h]=tt/3,B[c]=(q-G)/6048e5,B[l]=(q-G)/864e5,B[u]=q/i,B[s]=q/r,B[o]=q/e,B)[M]||q,D?tt:R.a(tt)},I.daysInMonth=function(){return this.endOf(f).$D},I.$locale=function(){return O[this.$L]},I.locale=function(E,A){if(!E)return this.$L;var D=this.clone(),B=w(E,A,!0);return B&&(D.$L=B),D},I.clone=function(){return R.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},L}(),N=C.prototype;return S.prototype=N,[["$ms",a],["$s",o],["$m",s],["$H",u],["$W",l],["$M",f],["$y",d],["$D",p]].forEach(function(L){N[L[1]]=function(I){return this.$g(I,L[0],L[1])}}),S.extend=function(L,I){return L.$i||(L(I,C,S),L.$i=!0),S},S.locale=w,S.isDayjs=k,S.unix=function(L){return S(1e3*L)},S.en=O[b],S.Ls=O,S.p={},S})})(Tl);var GB=Tl.exports,st;(function(t){t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img"})(st||(st={}));var Za;(function(t){t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout"})(Za||(Za={}));var Ka;(function(t){t.SHOW="show-modal",t.HIDE="hide-modal"})(Ka||(Ka={}));var Qa;(function(t){t.UPDATE="model-update"})(Qa||(Qa={}));var Ja;(function(t){t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu"})(Ja||(Ja={}));var to;(function(t){t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end"})(to||(to={}));var eo;(function(t){t.CHANGE="zoom-domain-change"})(eo||(eo={}));var no;(function(t){t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out"})(no||(no={}));var ro;(function(t){t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout"})(ro||(ro={}));var io;(function(t){t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout"})(io||(io={}));var ao;(function(t){t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout"})(ao||(ao={}));var oo;(function(t){t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout"})(oo||(oo={}));var so;(function(t){t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout"})(so||(so={}));var uo;(function(t){t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout"})(uo||(uo={}));var lo;(function(t){t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout"})(lo||(lo={}));var co;(function(t){t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout"})(co||(co={}));var fo;(function(t){t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout"})(fo||(fo={}));var ho;(function(t){t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout"})(ho||(ho={}));var po;(function(t){t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout"})(po||(po={}));var vo;(function(t){t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout"})(vo||(vo={}));var go;(function(t){t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip"})(go||(go={}));var mo;(function(t){t.SHOW="show-threshold",t.HIDE="hide-threshold"})(mo||(mo={}));var yo;(function(t){t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update"})(yo||(yo={}));var _o;(function(t){t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove"})(_o||(_o={}));var xo;(function(t){t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove"})(xo||(xo={}));var bo;(function(t){t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove"})(bo||(bo={}));var Pv=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Chart(){return Za},get Modal(){return Ka},get Model(){return Qa},get Toolbar(){return Ja},get ZoomBar(){return to},get ZoomDomain(){return eo},get CanvasZoom(){return no},get Axis(){return ro},get Area(){return io},get WordCloud(){return ao},get Pie(){return oo},get Gauge(){return so},get Bar(){return uo},get Boxplot(){return lo},get Scatter(){return co},get Line(){return fo},get Radar(){return ho},get Tree(){return po},get Treemap(){return vo},get Tooltip(){return go},get Threshold(){return mo},get Legend(){return yo},get CirclePack(){return _o},get Alluvial(){return xo},get Meter(){return bo}}),P=Pv,it;(function(t){t.HTML="html",t.SVG="svg"})(it||(it={}));var wl;(function(t){t.DEFAULT="default",t.G100="g100",t.G90="g90",t.G10="g10"})(wl||(wl={}));var rt;(function(t){t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip"})(rt||(rt={}));var j;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(j||(j={}));var ae;(function(t){t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view"})(ae||(ae={}));var Oe;(function(t){t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none"})(Oe||(Oe={}));var At;(function(t){t.VERTICAL="vertical",t.HORIZONTAL="horizontal"})(At||(At={}));var et;(function(t){t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio"})(et||(et={}));var xn;(function(t){t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom"})(xn||(xn={}));var Lt;(function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right"})(Lt||(Lt={}));var bn;(function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"})(bn||(bn={}));var ai;(function(t){t.TREE="tree",t.DENDROGRAM="dendrogram"})(ai||(ai={}));var St;(function(t){t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse"})(St||(St={}));var pt;(function(t){t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch"})(pt||(pt={}));var rr;(function(t){t.CENTER="center"})(rr||(rr={}));var ir;(function(t){t.LEFT="left",t.RIGHT="right"})(ir||(ir={}));var Mt;(function(t){t.GRID="grid",t.VERT_OR_HORIZ="vertOrHoriz",t.PIE="pie",t.DONUT="donut"})(Mt||(Mt={}));var ce;(function(t){t.START="start",t.MIDDLE="middle",t.END="end"})(ce||(ce={}));var fe;(function(t){t.BASELINE="baseline",t.MIDDLE="middle",t.HANGING="hanging"})(fe||(fe={}));var qe;(function(t){t.SEMI="semi",t.FULL="full"})(qe||(qe={}));var oi;(function(t){t.UP="up",t.DOWN="down"})(oi||(oi={}));var ar;(function(t){t.SUCCESS="success",t.WARNING="warning",t.DANGER="danger"})(ar||(ar={}));var or;(function(t){t.ALWAYS="always",t.AUTO="auto",t.NEVER="never"})(or||(or={}));var qt;(function(t){t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area"})(qt||(qt={}));var Tt;(function(t){t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.SHOW_AS_DATATABLE="Show as data-table"})(Tt||(Tt={}));var si;(function(t){t.LEFT="left",t.RIGHT="right"})(si||(si={}));var Ct;(function(t){t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom"})(Ct||(Ct={}));const Dv=t=>+t;function Sl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ui,he={opacity:{unselected:.05,selected:.4}},Ye={ticks:{number:7,rotateIfSmallerThan:30,verticalSpaceRatio:2.5,horizontalSpaceRatio:3.5},ratio:{reference:"value",compareTo:"marker"},paddingRatio:.1},On={duration:1e3,ease:Sl,zoomLevel:3},Xe={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},hierarchyLevel:2},Oo={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},Yt={circle:{radius:4,opacity:{hovered:1,default:.3}},box:{opacity:{hovered:.5,default:.3}},strokeWidth:{default:1,thicker:2}},El={defaultBins:10},Rt={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"}},de={opacity:{unselected:.3,selected:1},weight:{selected:2,unselected:1}},Ht={statusBar:{paddingRight:5},status:{indicatorSize:16,paddingLeft:15},total:{paddingLeft:36},height:{default:8,proportional:16},dividerWidth:2},mt={radiusOffset:-15,innerRadius:2,padAngle:.007,hoverArc:{outerRadiusOffset:3},xOffset:30,yOffset:20,yOffsetCallout:10,callout:{minSliceDegree:5,offsetX:15,offsetY:12,horizontalLineLength:8,textMargin:2}},Ne={opacity:{unselected:.1,selected:.3},xLabelPadding:10,yLabelPadding:8,yTicksNumber:4,minRange:10,xAxisRectHeight:50,dotsRadius:5},te={nodeWidth:4,nodeHoveredWidth:8,minNodePadding:24,opacity:{unfocus:.3,default:.8,selected:1}},To={default:{size:24}},Ml={horizontalOffset:10},wo={default:{duration:300},pie_slice_mouseover:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},Lv={buttonSize:32,iconSize:20,height:32,spacerHeight:10,iconPadding:6},Wt={height:(ui={},ui[ae.GRAPH_VIEW]=32,ui[ae.SLIDER_VIEW]=10,ui),spacerHeight:8,handleWidth:5,handleBarWidth:1,handleBarHeight:12},Cl=[{type:Ct.RADIUS,name:"Radius"},{type:Ct.AREA,name:"Poor area"},{type:Ct.AREA,name:"Satisfactory area"},{type:Ct.AREA,name:"Great area"},{type:Ct.QUARTILE,name:"Quartiles"}],Rv=typeof global=="object"&&global&&global.Object===Object&&global,Al=Rv,kv=typeof self=="object"&&self&&self.Object===Object&&self,Iv=Al||kv||Function("return this")(),oe=Iv,Nv=oe.Symbol,ee=Nv,Pl=Object.prototype,Bv=Pl.hasOwnProperty,Uv=Pl.toString,sr=ee?ee.toStringTag:void 0;function Vv(t){var n=Bv.call(t,sr),e=t[sr];try{t[sr]=void 0;var r=!0}catch{}var i=Uv.call(t);return r&&(n?t[sr]=e:delete t[sr]),i}var $v=Object.prototype,Gv=$v.toString;function Fv(t){return Gv.call(t)}var Hv="[object Null]",zv="[object Undefined]",Dl=ee?ee.toStringTag:void 0;function Ze(t){return t==null?t===void 0?zv:Hv:Dl&&Dl in Object(t)?Vv(t):Fv(t)}function pe(t){return t!=null&&typeof t=="object"}var Wv="[object Symbol]";function li(t){return typeof t=="symbol"||pe(t)&&Ze(t)==Wv}function Ll(t,n){for(var e=-1,r=t==null?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}var jv=Array.isArray,kt=jv,qv=1/0,Rl=ee?ee.prototype:void 0,kl=Rl?Rl.toString:void 0;function Il(t){if(typeof t=="string")return t;if(kt(t))return Ll(t,Il)+"";if(li(t))return kl?kl.call(t):"";var n=t+"";return n=="0"&&1/t==-qv?"-0":n}var Yv=/\s/;function Xv(t){for(var n=t.length;n--&&Yv.test(t.charAt(n)););return n}var Zv=/^\s+/;function Kv(t){return t&&t.slice(0,Xv(t)+1).replace(Zv,"")}function ne(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var Nl=0/0,Qv=/^[-+]0x[0-9a-f]+$/i,Jv=/^0b[01]+$/i,tg=/^0o[0-7]+$/i,eg=parseInt;function ur(t){if(typeof t=="number")return t;if(li(t))return Nl;if(ne(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=ne(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Kv(t);var e=Jv.test(t);return e||tg.test(t)?eg(t.slice(2),e?2:8):Qv.test(t)?Nl:+t}function So(t){return t}var ng="[object AsyncFunction]",rg="[object Function]",ig="[object GeneratorFunction]",ag="[object Proxy]";function Eo(t){if(!ne(t))return!1;var n=Ze(t);return n==rg||n==ig||n==ng||n==ag}var og=oe["__core-js_shared__"],Mo=og,Bl=function(){var t=/[^.]+$/.exec(Mo&&Mo.keys&&Mo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function sg(t){return!!Bl&&Bl in t}var ug=Function.prototype,lg=ug.toString;function Ke(t){if(t!=null){try{return lg.call(t)}catch{}try{return t+""}catch{}}return""}var cg=/[\\^$.*+?()[\]{}|]/g,fg=/^\[object .+?Constructor\]$/,hg=Function.prototype,dg=Object.prototype,pg=hg.toString,vg=dg.hasOwnProperty,gg=RegExp("^"+pg.call(vg).replace(cg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mg(t){if(!ne(t)||sg(t))return!1;var n=Eo(t)?gg:fg;return n.test(Ke(t))}function yg(t,n){return t==null?void 0:t[n]}function Qe(t,n){var e=yg(t,n);return mg(e)?e:void 0}var _g=Qe(oe,"WeakMap"),Co=_g,Ul=Object.create,xg=function(){function t(){}return function(n){if(!ne(n))return{};if(Ul)return Ul(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}(),bg=xg;function Og(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function Tg(){}function Vl(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}var wg=800,Sg=16,Eg=Date.now;function Mg(t){var n=0,e=0;return function(){var r=Eg(),i=Sg-(r-e);if(e=r,i>0){if(++n>=wg)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function Cg(t){return function(){return t}}var Ag=function(){try{var t=Qe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ci=Ag,Pg=ci?function(t,n){return ci(t,"toString",{configurable:!0,enumerable:!1,value:Cg(n),writable:!0})}:So,Dg=Pg,Lg=Mg(Dg),Rg=Lg;function kg(t,n){for(var e=-1,r=t==null?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}function Ig(t,n,e,r){for(var i=t.length,a=e+(r?1:-1);r?a--:++a<i;)if(n(t[a],a,t))return a;return-1}function Ng(t){return t!==t}function Bg(t,n,e){for(var r=e-1,i=t.length;++r<i;)if(t[r]===n)return r;return-1}function Ug(t,n,e){return n===n?Bg(t,n,e):Ig(t,Ng,e)}function Vg(t,n){var e=t==null?0:t.length;return!!e&&Ug(t,n,0)>-1}var $g=9007199254740991,Gg=/^(?:0|[1-9]\d*)$/;function Ao(t,n){var e=typeof t;return n=n==null?$g:n,!!n&&(e=="number"||e!="symbol"&&Gg.test(t))&&t>-1&&t%1==0&&t<n}function fi(t,n,e){n=="__proto__"&&ci?ci(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function lr(t,n){return t===n||t!==t&&n!==n}var Fg=Object.prototype,Hg=Fg.hasOwnProperty;function $l(t,n,e){var r=t[n];(!(Hg.call(t,n)&&lr(r,e))||e===void 0&&!(n in t))&&fi(t,n,e)}function cr(t,n,e,r){var i=!e;e||(e={});for(var a=-1,o=n.length;++a<o;){var s=n[a],u=r?r(e[s],t[s],s,e,t):void 0;u===void 0&&(u=t[s]),i?fi(e,s,u):$l(e,s,u)}return e}var Gl=Math.max;function zg(t,n,e){return n=Gl(n===void 0?t.length-1:n,0),function(){for(var r=arguments,i=-1,a=Gl(r.length-n,0),o=Array(a);++i<a;)o[i]=r[n+i];i=-1;for(var s=Array(n+1);++i<n;)s[i]=r[i];return s[n]=e(o),Og(t,this,s)}}function Fl(t,n){return Rg(zg(t,n,So),t+"")}var Wg=9007199254740991;function Po(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Wg}function Je(t){return t!=null&&Po(t.length)&&!Eo(t)}function Hl(t,n,e){if(!ne(e))return!1;var r=typeof n;return(r=="number"?Je(e)&&Ao(n,e.length):r=="string"&&n in e)?lr(e[n],t):!1}function jg(t){return Fl(function(n,e){var r=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,o&&Hl(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),n=Object(n);++r<i;){var s=e[r];s&&t(n,s,r,a)}return n})}var qg=Object.prototype;function hi(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||qg;return t===e}function Yg(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}var Xg="[object Arguments]";function zl(t){return pe(t)&&Ze(t)==Xg}var Wl=Object.prototype,Zg=Wl.hasOwnProperty,Kg=Wl.propertyIsEnumerable,Qg=zl(function(){return arguments}())?zl:function(t){return pe(t)&&Zg.call(t,"callee")&&!Kg.call(t,"callee")},Tn=Qg;function Jg(){return!1}var jl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ql=jl&&typeof module=="object"&&module&&!module.nodeType&&module,tm=ql&&ql.exports===jl,Yl=tm?oe.Buffer:void 0,em=Yl?Yl.isBuffer:void 0,nm=em||Jg,wn=nm,rm="[object Arguments]",im="[object Array]",am="[object Boolean]",om="[object Date]",sm="[object Error]",um="[object Function]",lm="[object Map]",cm="[object Number]",fm="[object Object]",hm="[object RegExp]",dm="[object Set]",pm="[object String]",vm="[object WeakMap]",gm="[object ArrayBuffer]",mm="[object DataView]",ym="[object Float32Array]",_m="[object Float64Array]",xm="[object Int8Array]",bm="[object Int16Array]",Om="[object Int32Array]",Tm="[object Uint8Array]",wm="[object Uint8ClampedArray]",Sm="[object Uint16Array]",Em="[object Uint32Array]",xt={};xt[ym]=xt[_m]=xt[xm]=xt[bm]=xt[Om]=xt[Tm]=xt[wm]=xt[Sm]=xt[Em]=!0;xt[rm]=xt[im]=xt[gm]=xt[am]=xt[mm]=xt[om]=xt[sm]=xt[um]=xt[lm]=xt[cm]=xt[fm]=xt[hm]=xt[dm]=xt[pm]=xt[vm]=!1;function Mm(t){return pe(t)&&Po(t.length)&&!!xt[Ze(t)]}function Do(t){return function(n){return t(n)}}var Xl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fr=Xl&&typeof module=="object"&&module&&!module.nodeType&&module,Cm=fr&&fr.exports===Xl,Lo=Cm&&Al.process,Am=function(){try{var t=fr&&fr.require&&fr.require("util").types;return t||Lo&&Lo.binding&&Lo.binding("util")}catch{}}(),Sn=Am,Zl=Sn&&Sn.isTypedArray,Pm=Zl?Do(Zl):Mm,di=Pm,Dm=Object.prototype,Lm=Dm.hasOwnProperty;function Kl(t,n){var e=kt(t),r=!e&&Tn(t),i=!e&&!r&&wn(t),a=!e&&!r&&!i&&di(t),o=e||r||i||a,s=o?Yg(t.length,String):[],u=s.length;for(var l in t)(n||Lm.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Ao(l,u)))&&s.push(l);return s}function Ql(t,n){return function(e){return t(n(e))}}var Rm=Ql(Object.keys,Object),km=Rm,Im=Object.prototype,Nm=Im.hasOwnProperty;function Jl(t){if(!hi(t))return km(t);var n=[];for(var e in Object(t))Nm.call(t,e)&&e!="constructor"&&n.push(e);return n}function hr(t){return Je(t)?Kl(t):Jl(t)}function Bm(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var Um=Object.prototype,Vm=Um.hasOwnProperty;function $m(t){if(!ne(t))return Bm(t);var n=hi(t),e=[];for(var r in t)r=="constructor"&&(n||!Vm.call(t,r))||e.push(r);return e}function dr(t){return Je(t)?Kl(t,!0):$m(t)}var Gm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fm=/^\w*$/;function Ro(t,n){if(kt(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||li(t)?!0:Fm.test(t)||!Gm.test(t)||n!=null&&t in Object(n)}var Hm=Qe(Object,"create"),pr=Hm;function zm(){this.__data__=pr?pr(null):{},this.size=0}function Wm(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var jm="__lodash_hash_undefined__",qm=Object.prototype,Ym=qm.hasOwnProperty;function Xm(t){var n=this.__data__;if(pr){var e=n[t];return e===jm?void 0:e}return Ym.call(n,t)?n[t]:void 0}var Zm=Object.prototype,Km=Zm.hasOwnProperty;function Qm(t){var n=this.__data__;return pr?n[t]!==void 0:Km.call(n,t)}var Jm="__lodash_hash_undefined__";function ty(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=pr&&n===void 0?Jm:n,this}function tn(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}tn.prototype.clear=zm;tn.prototype.delete=Wm;tn.prototype.get=Xm;tn.prototype.has=Qm;tn.prototype.set=ty;function ey(){this.__data__=[],this.size=0}function pi(t,n){for(var e=t.length;e--;)if(lr(t[e][0],n))return e;return-1}var ny=Array.prototype,ry=ny.splice;function iy(t){var n=this.__data__,e=pi(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():ry.call(n,e,1),--this.size,!0}function ay(t){var n=this.__data__,e=pi(n,t);return e<0?void 0:n[e][1]}function oy(t){return pi(this.__data__,t)>-1}function sy(t,n){var e=this.__data__,r=pi(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function Te(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Te.prototype.clear=ey;Te.prototype.delete=iy;Te.prototype.get=ay;Te.prototype.has=oy;Te.prototype.set=sy;var uy=Qe(oe,"Map"),vr=uy;function ly(){this.size=0,this.__data__={hash:new tn,map:new(vr||Te),string:new tn}}function cy(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function vi(t,n){var e=t.__data__;return cy(n)?e[typeof n=="string"?"string":"hash"]:e.map}function fy(t){var n=vi(this,t).delete(t);return this.size-=n?1:0,n}function hy(t){return vi(this,t).get(t)}function dy(t){return vi(this,t).has(t)}function py(t,n){var e=vi(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function we(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}we.prototype.clear=ly;we.prototype.delete=fy;we.prototype.get=hy;we.prototype.has=dy;we.prototype.set=py;var vy="Expected a function";function ko(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(vy);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],a=e.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return e.cache=a.set(i,o)||a,o};return e.cache=new(ko.Cache||we),e}ko.Cache=we;var gy=500;function my(t){var n=ko(t,function(r){return e.size===gy&&e.clear(),r}),e=n.cache;return n}var yy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_y=/\\(\\)?/g,xy=my(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(yy,function(e,r,i,a){n.push(i?a.replace(_y,"$1"):r||e)}),n}),by=xy;function gr(t){return t==null?"":Il(t)}function tc(t,n){return kt(t)?t:Ro(t,n)?[t]:by(gr(t))}var Oy=1/0;function gi(t){if(typeof t=="string"||li(t))return t;var n=t+"";return n=="0"&&1/t==-Oy?"-0":n}function ec(t,n){n=tc(n,t);for(var e=0,r=n.length;t!=null&&e<r;)t=t[gi(n[e++])];return e&&e==r?t:void 0}function bt(t,n,e){var r=t==null?void 0:ec(t,n);return r===void 0?e:r}function Io(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var nc=ee?ee.isConcatSpreadable:void 0;function Ty(t){return kt(t)||Tn(t)||!!(nc&&t&&t[nc])}function mi(t,n,e,r,i){var a=-1,o=t.length;for(e||(e=Ty),i||(i=[]);++a<o;){var s=t[a];n>0&&e(s)?n>1?mi(s,n-1,e,r,i):Io(i,s):r||(i[i.length]=s)}return i}function wy(t){var n=t==null?0:t.length;return n?mi(t,1):[]}var Sy=Ql(Object.getPrototypeOf,Object),No=Sy,Ey="[object Object]",My=Function.prototype,Cy=Object.prototype,rc=My.toString,Ay=Cy.hasOwnProperty,Py=rc.call(Object);function Dy(t){if(!pe(t)||Ze(t)!=Ey)return!1;var n=No(t);if(n===null)return!0;var e=Ay.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&rc.call(e)==Py}function Ly(t,n,e){var r=-1,i=t.length;n<0&&(n=-n>i?0:i+n),e=e>i?i:e,e<0&&(e+=i),i=n>e?0:e-n>>>0,n>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+n];return a}function Ry(t,n,e){var r=t.length;return e=e===void 0?r:e,!n&&e>=r?t:Ly(t,n,e)}var ky="\\ud800-\\udfff",Iy="\\u0300-\\u036f",Ny="\\ufe20-\\ufe2f",By="\\u20d0-\\u20ff",Uy=Iy+Ny+By,Vy="\\ufe0e\\ufe0f",$y="\\u200d",Gy=RegExp("["+$y+ky+Uy+Vy+"]");function ic(t){return Gy.test(t)}function Fy(t){return t.split("")}var ac="\\ud800-\\udfff",Hy="\\u0300-\\u036f",zy="\\ufe20-\\ufe2f",Wy="\\u20d0-\\u20ff",jy=Hy+zy+Wy,qy="\\ufe0e\\ufe0f",Yy="["+ac+"]",Bo="["+jy+"]",Uo="\\ud83c[\\udffb-\\udfff]",Xy="(?:"+Bo+"|"+Uo+")",oc="[^"+ac+"]",sc="(?:\\ud83c[\\udde6-\\uddff]){2}",uc="[\\ud800-\\udbff][\\udc00-\\udfff]",Zy="\\u200d",lc=Xy+"?",cc="["+qy+"]?",Ky="(?:"+Zy+"(?:"+[oc,sc,uc].join("|")+")"+cc+lc+")*",Qy=cc+lc+Ky,Jy="(?:"+[oc+Bo+"?",Bo,sc,uc,Yy].join("|")+")",t0=RegExp(Uo+"(?="+Uo+")|"+Jy+Qy,"g");function e0(t){return t.match(t0)||[]}function n0(t){return ic(t)?e0(t):Fy(t)}function r0(t){return function(n){n=gr(n);var e=ic(n)?n0(n):void 0,r=e?e[0]:n.charAt(0),i=e?Ry(e,1).join(""):n.slice(1);return r[t]()+i}}var i0=r0("toUpperCase"),a0=i0;function o0(t){return a0(gr(t).toLowerCase())}function s0(t,n,e,r){var i=-1,a=t==null?0:t.length;for(r&&a&&(e=t[++i]);++i<a;)e=n(e,t[i],i,t);return e}function u0(t){return function(n){return t==null?void 0:t[n]}}var l0={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},c0=u0(l0),f0=c0,h0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,d0="\\u0300-\\u036f",p0="\\ufe20-\\ufe2f",v0="\\u20d0-\\u20ff",g0=d0+p0+v0,m0="["+g0+"]",y0=RegExp(m0,"g");function _0(t){return t=gr(t),t&&t.replace(h0,f0).replace(y0,"")}var x0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function b0(t){return t.match(x0)||[]}var O0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function T0(t){return O0.test(t)}var fc="\\ud800-\\udfff",w0="\\u0300-\\u036f",S0="\\ufe20-\\ufe2f",E0="\\u20d0-\\u20ff",M0=w0+S0+E0,hc="\\u2700-\\u27bf",dc="a-z\\xdf-\\xf6\\xf8-\\xff",C0="\\xac\\xb1\\xd7\\xf7",A0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",P0="\\u2000-\\u206f",D0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pc="A-Z\\xc0-\\xd6\\xd8-\\xde",L0="\\ufe0e\\ufe0f",vc=C0+A0+P0+D0,gc="['\u2019]",mc="["+vc+"]",R0="["+M0+"]",yc="\\d+",k0="["+hc+"]",_c="["+dc+"]",xc="[^"+fc+vc+yc+hc+dc+pc+"]",I0="\\ud83c[\\udffb-\\udfff]",N0="(?:"+R0+"|"+I0+")",B0="[^"+fc+"]",bc="(?:\\ud83c[\\udde6-\\uddff]){2}",Oc="[\\ud800-\\udbff][\\udc00-\\udfff]",En="["+pc+"]",U0="\\u200d",Tc="(?:"+_c+"|"+xc+")",V0="(?:"+En+"|"+xc+")",wc="(?:"+gc+"(?:d|ll|m|re|s|t|ve))?",Sc="(?:"+gc+"(?:D|LL|M|RE|S|T|VE))?",Ec=N0+"?",Mc="["+L0+"]?",$0="(?:"+U0+"(?:"+[B0,bc,Oc].join("|")+")"+Mc+Ec+")*",G0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",F0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",H0=Mc+Ec+$0,z0="(?:"+[k0,bc,Oc].join("|")+")"+H0,W0=RegExp([En+"?"+_c+"+"+wc+"(?="+[mc,En,"$"].join("|")+")",V0+"+"+Sc+"(?="+[mc,En+Tc,"$"].join("|")+")",En+"?"+Tc+"+"+wc,En+"+"+Sc,F0,G0,yc,z0].join("|"),"g");function j0(t){return t.match(W0)||[]}function q0(t,n,e){return t=gr(t),n=e?void 0:n,n===void 0?T0(t)?j0(t):b0(t):t.match(n)||[]}var Y0="['\u2019]",X0=RegExp(Y0,"g");function Cc(t){return function(n){return s0(q0(_0(n).replace(X0,"")),t,"")}}var Z0=Cc(function(t,n,e){return n=n.toLowerCase(),t+(e?o0(n):n)}),K0=Z0;function Q0(t,n,e){return t===t&&(e!==void 0&&(t=t<=e?t:e),n!==void 0&&(t=t>=n?t:n)),t}function J0(t,n,e){return e===void 0&&(e=n,n=void 0),e!==void 0&&(e=ur(e),e=e===e?e:0),n!==void 0&&(n=ur(n),n=n===n?n:0),Q0(ur(t),n,e)}function t_(){this.__data__=new Te,this.size=0}function e_(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function n_(t){return this.__data__.get(t)}function r_(t){return this.__data__.has(t)}var i_=200;function a_(t,n){var e=this.__data__;if(e instanceof Te){var r=e.__data__;if(!vr||r.length<i_-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new we(r)}return e.set(t,n),this.size=e.size,this}function se(t){var n=this.__data__=new Te(t);this.size=n.size}se.prototype.clear=t_;se.prototype.delete=e_;se.prototype.get=n_;se.prototype.has=r_;se.prototype.set=a_;function o_(t,n){return t&&cr(n,hr(n),t)}function s_(t,n){return t&&cr(n,dr(n),t)}var Ac=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Pc=Ac&&typeof module=="object"&&module&&!module.nodeType&&module,u_=Pc&&Pc.exports===Ac,Dc=u_?oe.Buffer:void 0,Lc=Dc?Dc.allocUnsafe:void 0;function Rc(t,n){if(n)return t.slice();var e=t.length,r=Lc?Lc(e):new t.constructor(e);return t.copy(r),r}function l_(t,n){for(var e=-1,r=t==null?0:t.length,i=0,a=[];++e<r;){var o=t[e];n(o,e,t)&&(a[i++]=o)}return a}function kc(){return[]}var c_=Object.prototype,f_=c_.propertyIsEnumerable,Ic=Object.getOwnPropertySymbols,h_=Ic?function(t){return t==null?[]:(t=Object(t),l_(Ic(t),function(n){return f_.call(t,n)}))}:kc,Vo=h_;function d_(t,n){return cr(t,Vo(t),n)}var p_=Object.getOwnPropertySymbols,v_=p_?function(t){for(var n=[];t;)Io(n,Vo(t)),t=No(t);return n}:kc,Nc=v_;function g_(t,n){return cr(t,Nc(t),n)}function Bc(t,n,e){var r=n(t);return kt(t)?r:Io(r,e(t))}function $o(t){return Bc(t,hr,Vo)}function m_(t){return Bc(t,dr,Nc)}var y_=Qe(oe,"DataView"),Go=y_,__=Qe(oe,"Promise"),Fo=__,x_=Qe(oe,"Set"),Mn=x_,Uc="[object Map]",b_="[object Object]",Vc="[object Promise]",$c="[object Set]",Gc="[object WeakMap]",Fc="[object DataView]",O_=Ke(Go),T_=Ke(vr),w_=Ke(Fo),S_=Ke(Mn),E_=Ke(Co),en=Ze;(Go&&en(new Go(new ArrayBuffer(1)))!=Fc||vr&&en(new vr)!=Uc||Fo&&en(Fo.resolve())!=Vc||Mn&&en(new Mn)!=$c||Co&&en(new Co)!=Gc)&&(en=function(t){var n=Ze(t),e=n==b_?t.constructor:void 0,r=e?Ke(e):"";if(r)switch(r){case O_:return Fc;case T_:return Uc;case w_:return Vc;case S_:return $c;case E_:return Gc}return n});var Cn=en,M_=Object.prototype,C_=M_.hasOwnProperty;function A_(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&C_.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var P_=oe.Uint8Array,yi=P_;function Ho(t){var n=new t.constructor(t.byteLength);return new yi(n).set(new yi(t)),n}function D_(t,n){var e=n?Ho(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var L_=/\w*$/;function R_(t){var n=new t.constructor(t.source,L_.exec(t));return n.lastIndex=t.lastIndex,n}var Hc=ee?ee.prototype:void 0,zc=Hc?Hc.valueOf:void 0;function k_(t){return zc?Object(zc.call(t)):{}}function Wc(t,n){var e=n?Ho(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var I_="[object Boolean]",N_="[object Date]",B_="[object Map]",U_="[object Number]",V_="[object RegExp]",$_="[object Set]",G_="[object String]",F_="[object Symbol]",H_="[object ArrayBuffer]",z_="[object DataView]",W_="[object Float32Array]",j_="[object Float64Array]",q_="[object Int8Array]",Y_="[object Int16Array]",X_="[object Int32Array]",Z_="[object Uint8Array]",K_="[object Uint8ClampedArray]",Q_="[object Uint16Array]",J_="[object Uint32Array]";function t1(t,n,e){var r=t.constructor;switch(n){case H_:return Ho(t);case I_:case N_:return new r(+t);case z_:return D_(t,e);case W_:case j_:case q_:case Y_:case X_:case Z_:case K_:case Q_:case J_:return Wc(t,e);case B_:return new r;case U_:case G_:return new r(t);case V_:return R_(t);case $_:return new r;case F_:return k_(t)}}function jc(t){return typeof t.constructor=="function"&&!hi(t)?bg(No(t)):{}}var e1="[object Map]";function n1(t){return pe(t)&&Cn(t)==e1}var qc=Sn&&Sn.isMap,r1=qc?Do(qc):n1,i1=r1,a1="[object Set]";function o1(t){return pe(t)&&Cn(t)==a1}var Yc=Sn&&Sn.isSet,s1=Yc?Do(Yc):o1,u1=s1,l1=1,c1=2,f1=4,Xc="[object Arguments]",h1="[object Array]",d1="[object Boolean]",p1="[object Date]",v1="[object Error]",Zc="[object Function]",g1="[object GeneratorFunction]",m1="[object Map]",y1="[object Number]",Kc="[object Object]",_1="[object RegExp]",x1="[object Set]",b1="[object String]",O1="[object Symbol]",T1="[object WeakMap]",w1="[object ArrayBuffer]",S1="[object DataView]",E1="[object Float32Array]",M1="[object Float64Array]",C1="[object Int8Array]",A1="[object Int16Array]",P1="[object Int32Array]",D1="[object Uint8Array]",L1="[object Uint8ClampedArray]",R1="[object Uint16Array]",k1="[object Uint32Array]",yt={};yt[Xc]=yt[h1]=yt[w1]=yt[S1]=yt[d1]=yt[p1]=yt[E1]=yt[M1]=yt[C1]=yt[A1]=yt[P1]=yt[m1]=yt[y1]=yt[Kc]=yt[_1]=yt[x1]=yt[b1]=yt[O1]=yt[D1]=yt[L1]=yt[R1]=yt[k1]=!0;yt[v1]=yt[Zc]=yt[T1]=!1;function _i(t,n,e,r,i,a){var o,s=n&l1,u=n&c1,l=n&f1;if(e&&(o=i?e(t,r,i,a):e(t)),o!==void 0)return o;if(!ne(t))return t;var c=kt(t);if(c){if(o=A_(t),!s)return Vl(t,o)}else{var f=Cn(t),h=f==Zc||f==g1;if(wn(t))return Rc(t,s);if(f==Kc||f==Xc||h&&!i){if(o=u||h?{}:jc(t),!s)return u?g_(t,s_(o,t)):d_(t,o_(o,t))}else{if(!yt[f])return i?t:{};o=t1(t,f,s)}}a||(a=new se);var d=a.get(t);if(d)return d;a.set(t,o),u1(t)?t.forEach(function(v){o.add(_i(v,n,e,v,t,a))}):i1(t)&&t.forEach(function(v,x){o.set(x,_i(v,n,e,x,t,a))});var p=l?u?m_:$o:u?dr:hr,m=c?void 0:p(t);return kg(m||t,function(v,x){m&&(x=v,v=t[x]),$l(o,x,_i(v,n,e,x,t,a))}),o}var I1=1,N1=4;function B1(t){return _i(t,I1|N1)}var U1="__lodash_hash_undefined__";function V1(t){return this.__data__.set(t,U1),this}function $1(t){return this.__data__.has(t)}function mr(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new we;++n<e;)this.add(t[n])}mr.prototype.add=mr.prototype.push=V1;mr.prototype.has=$1;function Qc(t,n){for(var e=-1,r=t==null?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function Jc(t,n){return t.has(n)}var G1=1,F1=2;function tf(t,n,e,r,i,a){var o=e&G1,s=t.length,u=n.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t),c=a.get(n);if(l&&c)return l==n&&c==t;var f=-1,h=!0,d=e&F1?new mr:void 0;for(a.set(t,n),a.set(n,t);++f<s;){var p=t[f],m=n[f];if(r)var v=o?r(m,p,f,n,t,a):r(p,m,f,t,n,a);if(v!==void 0){if(v)continue;h=!1;break}if(d){if(!Qc(n,function(x,g){if(!Jc(d,g)&&(p===x||i(p,x,e,r,a)))return d.push(g)})){h=!1;break}}else if(!(p===m||i(p,m,e,r,a))){h=!1;break}}return a.delete(t),a.delete(n),h}function H1(t){var n=-1,e=Array(t.size);return t.forEach(function(r,i){e[++n]=[i,r]}),e}function zo(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}var z1=1,W1=2,j1="[object Boolean]",q1="[object Date]",Y1="[object Error]",X1="[object Map]",Z1="[object Number]",K1="[object RegExp]",Q1="[object Set]",J1="[object String]",tx="[object Symbol]",ex="[object ArrayBuffer]",nx="[object DataView]",ef=ee?ee.prototype:void 0,Wo=ef?ef.valueOf:void 0;function rx(t,n,e,r,i,a,o){switch(e){case nx:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ex:return!(t.byteLength!=n.byteLength||!a(new yi(t),new yi(n)));case j1:case q1:case Z1:return lr(+t,+n);case Y1:return t.name==n.name&&t.message==n.message;case K1:case J1:return t==n+"";case X1:var s=H1;case Q1:var u=r&z1;if(s||(s=zo),t.size!=n.size&&!u)return!1;var l=o.get(t);if(l)return l==n;r|=W1,o.set(t,n);var c=tf(s(t),s(n),r,i,a,o);return o.delete(t),c;case tx:if(Wo)return Wo.call(t)==Wo.call(n)}return!1}var ix=1,ax=Object.prototype,ox=ax.hasOwnProperty;function sx(t,n,e,r,i,a){var o=e&ix,s=$o(t),u=s.length,l=$o(n),c=l.length;if(u!=c&&!o)return!1;for(var f=u;f--;){var h=s[f];if(!(o?h in n:ox.call(n,h)))return!1}var d=a.get(t),p=a.get(n);if(d&&p)return d==n&&p==t;var m=!0;a.set(t,n),a.set(n,t);for(var v=o;++f<u;){h=s[f];var x=t[h],g=n[h];if(r)var y=o?r(g,x,h,n,t,a):r(x,g,h,t,n,a);if(!(y===void 0?x===g||i(x,g,e,r,a):y)){m=!1;break}v||(v=h=="constructor")}if(m&&!v){var T=t.constructor,b=n.constructor;T!=b&&"constructor"in t&&"constructor"in n&&!(typeof T=="function"&&T instanceof T&&typeof b=="function"&&b instanceof b)&&(m=!1)}return a.delete(t),a.delete(n),m}var ux=1,nf="[object Arguments]",rf="[object Array]",xi="[object Object]",lx=Object.prototype,af=lx.hasOwnProperty;function cx(t,n,e,r,i,a){var o=kt(t),s=kt(n),u=o?rf:Cn(t),l=s?rf:Cn(n);u=u==nf?xi:u,l=l==nf?xi:l;var c=u==xi,f=l==xi,h=u==l;if(h&&wn(t)){if(!wn(n))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new se),o||di(t)?tf(t,n,e,r,i,a):rx(t,n,u,e,r,i,a);if(!(e&ux)){var d=c&&af.call(t,"__wrapped__"),p=f&&af.call(n,"__wrapped__");if(d||p){var m=d?t.value():t,v=p?n.value():n;return a||(a=new se),i(m,v,e,r,a)}}return h?(a||(a=new se),sx(t,n,e,r,i,a)):!1}function bi(t,n,e,r,i){return t===n?!0:t==null||n==null||!pe(t)&&!pe(n)?t!==t&&n!==n:cx(t,n,e,r,bi,i)}var fx=1,hx=2;function dx(t,n,e,r){var i=e.length,a=i,o=!r;if(t==null)return!a;for(t=Object(t);i--;){var s=e[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=e[i];var u=s[0],l=t[u],c=s[1];if(o&&s[2]){if(l===void 0&&!(u in t))return!1}else{var f=new se;if(r)var h=r(l,c,u,t,n,f);if(!(h===void 0?bi(c,l,fx|hx,r,f):h))return!1}}return!0}function of(t){return t===t&&!ne(t)}function px(t){for(var n=hr(t),e=n.length;e--;){var r=n[e],i=t[r];n[e]=[r,i,of(i)]}return n}function sf(t,n){return function(e){return e==null?!1:e[t]===n&&(n!==void 0||t in Object(e))}}function vx(t){var n=px(t);return n.length==1&&n[0][2]?sf(n[0][0],n[0][1]):function(e){return e===t||dx(e,t,n)}}function gx(t,n){return t!=null&&n in Object(t)}function mx(t,n,e){n=tc(n,t);for(var r=-1,i=n.length,a=!1;++r<i;){var o=gi(n[r]);if(!(a=t!=null&&e(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&Po(i)&&Ao(o,i)&&(kt(t)||Tn(t)))}function yx(t,n){return t!=null&&mx(t,n,gx)}var _x=1,xx=2;function bx(t,n){return Ro(t)&&of(n)?sf(gi(t),n):function(e){var r=bt(e,t);return r===void 0&&r===n?yx(e,t):bi(n,r,_x|xx)}}function Ox(t){return function(n){return n==null?void 0:n[t]}}function Tx(t){return function(n){return ec(n,t)}}function wx(t){return Ro(t)?Ox(gi(t)):Tx(t)}function Oi(t){return typeof t=="function"?t:t==null?So:typeof t=="object"?kt(t)?bx(t[0],t[1]):vx(t):wx(t)}function Sx(t,n,e,r){for(var i=-1,a=t==null?0:t.length;++i<a;){var o=t[i];n(r,o,e(o),t)}return r}function Ex(t){return function(n,e,r){for(var i=-1,a=Object(n),o=r(n),s=o.length;s--;){var u=o[t?s:++i];if(e(a[u],u,a)===!1)break}return n}}var Mx=Ex(),uf=Mx;function Cx(t,n){return t&&uf(t,n,hr)}function Ax(t,n){return function(e,r){if(e==null)return e;if(!Je(e))return t(e,r);for(var i=e.length,a=n?i:-1,o=Object(e);(n?a--:++a<i)&&r(o[a],a,o)!==!1;);return e}}var Px=Ax(Cx),jo=Px;function Dx(t,n,e,r){return jo(t,function(i,a,o){n(r,i,e(i),o)}),r}function Lx(t,n){return function(e,r){var i=kt(e)?Sx:Dx,a=n?n():{};return i(e,t,Oi(r),a)}}var Rx=function(){return oe.Date.now()},qo=Rx,kx="Expected a function",Ix=Math.max,Nx=Math.min;function Bx(t,n,e){var r,i,a,o,s,u,l=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(kx);n=ur(n)||0,ne(e)&&(c=!!e.leading,f="maxWait"in e,a=f?Ix(ur(e.maxWait)||0,n):a,h="trailing"in e?!!e.trailing:h);function d(O){var k=r,w=i;return r=i=void 0,l=O,o=t.apply(w,k),o}function p(O){return l=O,s=setTimeout(x,n),c?d(O):o}function m(O){var k=O-u,w=O-l,S=n-k;return f?Nx(S,a-w):S}function v(O){var k=O-u,w=O-l;return u===void 0||k>=n||k<0||f&&w>=a}function x(){var O=qo();if(v(O))return g(O);s=setTimeout(x,m(O))}function g(O){return s=void 0,h&&r?d(O):(r=i=void 0,o)}function y(){s!==void 0&&clearTimeout(s),l=0,r=u=i=s=void 0}function T(){return s===void 0?o:g(qo())}function b(){var O=qo(),k=v(O);if(r=arguments,i=this,u=O,k){if(s===void 0)return p(u);if(f)return clearTimeout(s),s=setTimeout(x,n),d(u)}return s===void 0&&(s=setTimeout(x,n)),o}return b.cancel=y,b.flush=T,b}function Yo(t,n,e){(e!==void 0&&!lr(t[n],e)||e===void 0&&!(n in t))&&fi(t,n,e)}function Xo(t){return pe(t)&&Je(t)}function Zo(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}function Ux(t){return cr(t,dr(t))}function Vx(t,n,e,r,i,a,o){var s=Zo(t,e),u=Zo(n,e),l=o.get(u);if(l){Yo(t,e,l);return}var c=a?a(s,u,e+"",t,n,o):void 0,f=c===void 0;if(f){var h=kt(u),d=!h&&wn(u),p=!h&&!d&&di(u);c=u,h||d||p?kt(s)?c=s:Xo(s)?c=Vl(s):d?(f=!1,c=Rc(u,!0)):p?(f=!1,c=Wc(u,!0)):c=[]:Dy(u)||Tn(u)?(c=s,Tn(s)?c=Ux(s):(!ne(s)||Eo(s))&&(c=jc(u))):f=!1}f&&(o.set(u,c),i(c,u,r,a,o),o.delete(u)),Yo(t,e,c)}function lf(t,n,e,r,i){t!==n&&uf(n,function(a,o){if(i||(i=new se),ne(a))Vx(t,n,o,e,lf,r,i);else{var s=r?r(Zo(t,o),a,o+"",t,n,i):void 0;s===void 0&&(s=a),Yo(t,o,s)}},dr)}function $x(t,n,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(n,t[r]))return!0;return!1}function Gx(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}function Fx(t,n){var e=-1,r=Je(t)?Array(t.length):[];return jo(t,function(i,a,o){r[++e]=n(i,a,o)}),r}function Hx(t,n){var e=kt(t)?Ll:Fx;return e(t,Oi(n))}var zx=1/0;function Wx(t,n){return mi(Hx(t,n),zx)}function jx(t){for(var n=-1,e=t==null?0:t.length,r={};++n<e;){var i=t[n];r[i[0]]=i[1]}return r}var qx=Object.prototype,Yx=qx.hasOwnProperty,Xx=Lx(function(t,n,e){Yx.call(t,e)?t[e].push(n):fi(t,e,[n])}),Zx=Xx,Kx="[object Map]",Qx="[object Set]",Jx=Object.prototype,tb=Jx.hasOwnProperty;function eb(t){if(t==null)return!0;if(Je(t)&&(kt(t)||typeof t=="string"||typeof t.splice=="function"||wn(t)||di(t)||Tn(t)))return!t.length;var n=Cn(t);if(n==Kx||n==Qx)return!t.size;if(hi(t))return!Jl(t).length;for(var e in t)if(tb.call(t,e))return!1;return!0}function nb(t,n){return bi(t,n)}var rb=Cc(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),ib=rb,ab=jg(function(t,n,e){lf(t,n,e)}),ob=ab;function sb(t,n){var e;return jo(t,function(r,i,a){return e=n(r,i,a),!e}),!!e}function ub(t,n,e){var r=kt(t)?Qc:sb;return e&&Hl(t,n,e)&&(n=void 0),r(t,Oi(n))}var lb=1/0,cb=Mn&&1/zo(new Mn([,-0]))[1]==lb?function(t){return new Mn(t)}:Tg,fb=cb,hb=200;function cf(t,n,e){var r=-1,i=Vg,a=t.length,o=!0,s=[],u=s;if(e)o=!1,i=$x;else if(a>=hb){var l=n?null:fb(t);if(l)return zo(l);o=!1,i=Jc,u=new mr}else u=n?[]:s;t:for(;++r<a;){var c=t[r],f=n?n(c):c;if(c=e||c!==0?c:0,o&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue t;n&&u.push(f),s.push(c)}else i(u,f,e)||(u!==s&&u.push(f),s.push(c))}return s}var db=Fl(function(t){var n=Gx(t);return Xo(n)&&(n=void 0),cf(mi(t,1,Xo,!0),Oi(n))}),pb=db;function vb(t){return t&&t.length?cf(t):[]}var Ko="http://www.w3.org/1999/xhtml",ff={svg:"http://www.w3.org/2000/svg",xhtml:Ko,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ti(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),ff.hasOwnProperty(n)?{space:ff[n],local:t}:t}function gb(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Ko&&n.documentElement.namespaceURI===Ko?n.createElement(t):n.createElementNS(e,t)}}function mb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hf(t){var n=Ti(t);return(n.local?mb:gb)(n)}function yb(){}function Qo(t){return t==null?yb:function(){return this.querySelector(t)}}function _b(t){typeof t!="function"&&(t=Qo(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=a[c])&&(l=t.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Xt(r,this._parents)}function xb(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function bb(){return[]}function df(t){return t==null?bb:function(){return this.querySelectorAll(t)}}function Ob(t){return function(){return xb(t.apply(this,arguments))}}function Tb(t){typeof t=="function"?t=Ob(t):t=df(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o=n[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(t.call(u,u.__data__,l,o)),i.push(u));return new Xt(r,i)}function pf(t){return function(){return this.matches(t)}}function vf(t){return function(n){return n.matches(t)}}var wb=Array.prototype.find;function Sb(t){return function(){return wb.call(this.children,t)}}function Eb(){return this.firstElementChild}function Mb(t){return this.select(t==null?Eb:Sb(typeof t=="function"?t:vf(t)))}var Cb=Array.prototype.filter;function Ab(){return Array.from(this.children)}function Pb(t){return function(){return Cb.call(this.children,t)}}function Db(t){return this.selectAll(t==null?Ab:Pb(typeof t=="function"?t:vf(t)))}function Lb(t){typeof t!="function"&&(t=pf(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new Xt(r,this._parents)}function gf(t){return new Array(t.length)}function Rb(){return new Xt(this._enter||this._groups.map(gf),this._parents)}function wi(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}wi.prototype={constructor:wi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function kb(t){return function(){return t}}function Ib(t,n,e,r,i,a){for(var o=0,s,u=n.length,l=a.length;o<l;++o)(s=n[o])?(s.__data__=a[o],r[o]=s):e[o]=new wi(t,a[o]);for(;o<u;++o)(s=n[o])&&(i[o]=s)}function Nb(t,n,e,r,i,a,o){var s,u,l=new Map,c=n.length,f=a.length,h=new Array(c),d;for(s=0;s<c;++s)(u=n[s])&&(h[s]=d=o.call(u,u.__data__,s,n)+"",l.has(d)?i[s]=u:l.set(d,u));for(s=0;s<f;++s)d=o.call(t,a[s],s,a)+"",(u=l.get(d))?(r[s]=u,u.__data__=a[s],l.delete(d)):e[s]=new wi(t,a[s]);for(s=0;s<c;++s)(u=n[s])&&l.get(h[s])===u&&(i[s]=u)}function Bb(t){return t.__data__}function Ub(t,n){if(!arguments.length)return Array.from(this,Bb);var e=n?Nb:Ib,r=this._parents,i=this._groups;typeof t!="function"&&(t=kb(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=Vb(t.call(c,c&&c.__data__,l,r)),p=d.length,m=s[l]=new Array(p),v=o[l]=new Array(p),x=u[l]=new Array(h);e(c,f,m,v,x,d,n);for(var g=0,y=0,T,b;g<p;++g)if(T=m[g]){for(g>=y&&(y=g+1);!(b=v[y])&&++y<p;);T._next=b||null}}return o=new Xt(o,r),o._enter=s,o._exit=u,o}function Vb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $b(){return new Xt(this._exit||this._groups.map(gf),this._parents)}function Gb(t,n,e){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?a.remove():e(a),r&&i?r.merge(i).order():i}function Fb(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l=e[u],c=r[u],f=l.length,h=s[u]=new Array(f),d,p=0;p<f;++p)(d=l[p]||c[p])&&(h[p]=d);for(;u<i;++u)s[u]=e[u];return new Xt(s,this._parents)}function Hb(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function zb(t){t||(t=Wb);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o=e[a],s=o.length,u=i[a]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(n)}return new Xt(i,this._parents).order()}function Wb(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function jb(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function qb(){return Array.from(this)}function Yb(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Xb(){let t=0;for(const n of this)++t;return t}function Zb(){return!this.node()}function Kb(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function Qb(t){return function(){this.removeAttribute(t)}}function Jb(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tO(t,n){return function(){this.setAttribute(t,n)}}function eO(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function nO(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function rO(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function iO(t,n){var e=Ti(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Jb:Qb:typeof n=="function"?e.local?rO:nO:e.local?eO:tO)(e,n))}function mf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function aO(t){return function(){this.style.removeProperty(t)}}function oO(t,n,e){return function(){this.style.setProperty(t,n,e)}}function sO(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function uO(t,n,e){return arguments.length>1?this.each((n==null?aO:typeof n=="function"?sO:oO)(t,n,e==null?"":e)):An(this.node(),t)}function An(t,n){return t.style.getPropertyValue(n)||mf(t).getComputedStyle(t,null).getPropertyValue(n)}function lO(t){return function(){delete this[t]}}function cO(t,n){return function(){this[t]=n}}function fO(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function hO(t,n){return arguments.length>1?this.each((n==null?lO:typeof n=="function"?fO:cO)(t,n)):this.node()[t]}function yf(t){return t.trim().split(/^|\s+/)}function Jo(t){return t.classList||new _f(t)}function _f(t){this._node=t,this._names=yf(t.getAttribute("class")||"")}_f.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xf(t,n){for(var e=Jo(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function bf(t,n){for(var e=Jo(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function dO(t){return function(){xf(this,t)}}function pO(t){return function(){bf(this,t)}}function vO(t,n){return function(){(n.apply(this,arguments)?xf:bf)(this,t)}}function gO(t,n){var e=yf(t+"");if(arguments.length<2){for(var r=Jo(this.node()),i=-1,a=e.length;++i<a;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?vO:n?dO:pO)(e,n))}function mO(){this.textContent=""}function yO(t){return function(){this.textContent=t}}function _O(t){return function(){var n=t.apply(this,arguments);this.textContent=n==null?"":n}}function xO(t){return arguments.length?this.each(t==null?mO:(typeof t=="function"?_O:yO)(t)):this.node().textContent}function bO(){this.innerHTML=""}function OO(t){return function(){this.innerHTML=t}}function TO(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n==null?"":n}}function wO(t){return arguments.length?this.each(t==null?bO:(typeof t=="function"?TO:OO)(t)):this.node().innerHTML}function SO(){this.nextSibling&&this.parentNode.appendChild(this)}function EO(){return this.each(SO)}function MO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function CO(){return this.each(MO)}function AO(t){var n=typeof t=="function"?t:hf(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function PO(){return null}function DO(t,n){var e=typeof t=="function"?t:hf(t),r=n==null?PO:typeof n=="function"?n:Qo(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function LO(){var t=this.parentNode;t&&t.removeChild(this)}function RO(){return this.each(LO)}function kO(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function IO(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function NO(t){return this.select(t?IO:kO)}function BO(t){return arguments.length?this.property("__data__",t):this.node().__data__}function UO(t){return function(n){t.call(this,n,this.__data__)}}function VO(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function $O(t){return function(){var n=this.__on;if(!!n){for(var e=0,r=-1,i=n.length,a;e<i;++e)a=n[e],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):n[++r]=a;++r?n.length=r:delete this.__on}}}function GO(t,n,e){return function(){var r=this.__on,i,a=UO(n);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=e),i.value=n;return}}this.addEventListener(t.type,a,e),i={type:t.type,name:t.name,value:n,listener:a,options:e},r?r.push(i):this.__on=[i]}}function FO(t,n,e){var r=VO(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=n?GO:$O,i=0;i<a;++i)this.each(s(r[i],n,e));return this}function Of(t,n,e){var r=mf(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function HO(t,n){return function(){return Of(this,t,n)}}function zO(t,n){return function(){return Of(this,t,n.apply(this,arguments))}}function WO(t,n){return this.each((typeof n=="function"?zO:HO)(t,n))}function*jO(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Tf=[null];function Xt(t,n){this._groups=t,this._parents=n}function yr(){return new Xt([[document.documentElement]],Tf)}function qO(){return this}Xt.prototype=yr.prototype={constructor:Xt,select:_b,selectAll:Tb,selectChild:Mb,selectChildren:Db,filter:Lb,data:Ub,enter:Rb,exit:$b,join:Gb,merge:Fb,selection:qO,order:Hb,sort:zb,call:jb,nodes:qb,node:Yb,size:Xb,empty:Zb,each:Kb,attr:iO,style:uO,property:hO,classed:gO,text:xO,html:wO,raise:EO,lower:CO,append:AO,insert:DO,remove:RO,clone:NO,datum:BO,on:FO,dispatch:WO,[Symbol.iterator]:jO};function V(t){return typeof t=="string"?new Xt([[document.querySelector(t)]],[document.documentElement]):new Xt([[t]],Tf)}function YO(t){let n;for(;n=t.sourceEvent;)t=n;return t}function nn(t,n){if(t=YO(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}var _;(function(t){t.debounce=Bx,t.clone=B1,t.merge=ob,t.unionBy=pb,t.removeArrayDuplicates=vb,t.clamp=J0,t.flatten=wy,t.groupBy=Zx,t.camelCase=K0,t.isEmpty=eb,t.isEqual=nb,t.flatMapDeep=Wx,t.kebabCase=ib,t.fromPairs=jx,t.some=ub;function n(m,v,x){var g=null;return function(){var y=this,T=arguments;y.mousePosition=nn(T[0],x),clearTimeout(g),g=setTimeout(function(){m.apply(y,T)},v)}}t.debounceWithD3MousePosition=n;function e(m,v){var x,g,y=t.clone(m),T=Object.keys(v.axes||{});((g=(x=v)===null||x===void 0?void 0:x.toolbar)===null||g===void 0?void 0:g.controls)&&delete y.toolbar.controls,T.length===0&&delete y.axes;for(var b in y.axes)if(T.includes(b)){var O=v.axes[b];(O.primary||O.secondary)&&console.warn("`primary` & `secondary` are no longer needed for axis configurations. Read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format");var k=O.mapsTo;if(k==null){var w=O.scaleType;w==null?O.mapsTo="value":w===et.TIME?O.mapsTo="date":w===et.LABELS&&(O.mapsTo="key")}}else delete y.axes[b];return c(y,v),t.merge(y,v)}t.mergeDefaultChartOptions=e;function r(m){return{width:parseFloat(m.style.width.replace("px","")||m.offsetWidth),height:parseFloat(m.style.height.replace("px","")||m.offsetHeight)}}t.getDimensions=r;function i(m){if(!!m){var v=/translate\([0-9]+\.?[0-9]*,[0-9]+\.?[0-9]*\)/,x=m.getAttribute("transform").match(v);if(!x)return null;if(x[0]){var g=x[0].replace(/translate\(/,"").replace(/\)/,"").split(",");return{tx:g[0],ty:g[1]}}return null}}t.getTranslationValues=i;function a(m){var v=/\(([^)]+)\)/,x=v.exec(m)[1],g=x.split(",");return{x:parseFloat(g[0]),y:parseFloat(g[1])}}t.getTranformOffsets=a;function o(m){var v=m.toString();return v.match(/[a-z]/i)?v:v+"px"}t.formatWidthHeightValues=o;function s(m){return m[0].toUpperCase()+m.slice(1)}t.capitalizeFirstLetter=s;function u(m,v,x){x===void 0&&(x="value");var g=m/v.reduce(function(y,T){return y+T[x]},0)*100;return g%1!=0?parseFloat(g.toFixed(1)):g}t.convertValueToPercentage=u;function l(m,v,x){if(x>m.length)return m;if(v===Oe.MID_LINE)return m.substr(0,x/2)+"..."+m.substr(-x/2);if(v===Oe.FRONT_LINE)return"..."+m.substr(-x);if(v===Oe.END_LINE)return m.substr(0,x)+"..."}t.truncateLabel=l;function c(m,v){var x=t.getProperty(m,"legend","additionalItems"),g=t.getProperty(v,"legend","additionalItems");if(x&&g){var y=g.map(function(O){return O.type}),T=x.map(function(O){return O.type}),b=Cl.filter(function(O){return T.includes(O.type)&&!y.includes(O.type)});m.legend.additionalItems=b,v.legend.additionalItems=t.unionBy(b,g,"name")}}t.updateLegendAdditionalItems=c;function f(m,v){var x={missing:[],added:[]};return m.forEach(function(g){v.indexOf(g)===-1&&x.missing.push(g)}),v.forEach(function(g){m.indexOf(g)===-1&&x.added.push(g)}),x}t.arrayDifferences=f;function h(m){var v=[],x=[];return m.forEach(function(g){v.indexOf(g)!==-1&&x.indexOf(g)===-1&&x.push(g),v.push(g)}),x}t.getDuplicateValues=h;function d(m){return m.each(function(){this.parentNode.appendChild(this)})}t.moveToFront=d,t.getProperty=function(m){for(var v=[],x=1;x<arguments.length;x++)v[x-1]=arguments[x];var g=m;if(g){for(var y=0,T=v;y<T.length;y++){var b=T[y];if(g[b]!==null&&g[b]!==void 0)g=g[b];else return null}return g}return null},t.flipSVGCoordinatesBasedOnOrientation=function(m,v){return v===At.HORIZONTAL?{y0:m.x0,y1:m.x1,x0:m.y0,x1:m.y1}:m},t.generateSVGPathString=function(m,v){var x=t.flipSVGCoordinatesBasedOnOrientation(m,v),g=x.x0,y=x.x1,T=x.y0,b=x.y1;return"M"+g+","+T+"L"+g+","+b+"L"+y+","+b+"L"+y+","+T+"L"+g+","+T};function p(m,v,x){return x===At.VERTICAL?[m,v]:[v,m]}t.flipDomainAndRangeBasedOnOrientation=p,t.compareNumeric=function(m,v){return Number(m)===Number(v)}})(_||(_={}));var ts={exports:{}},es={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function r(i,a,o){o=o||{};var s;return typeof e[i]=="string"?s=e[i]:a===1?s=e[i].one:s=e[i].other.replace("{{count}}",a),o.addSuffix?o.comparison>0?"in "+s:s+" ago":s}t.exports=n.default})(es,es.exports);var ns={exports:{}},rs={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(r){return function(i){var a=i||{},o=a.width?String(a.width):r.defaultWidth,s=r.formats[o]||r.formats[r.defaultWidth];return s}}t.exports=n.default})(rs,rs.exports);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=r(rs.exports);function r(l){return l&&l.__esModule?l:{default:l}}var i={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},a={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},s={date:(0,e.default)({formats:i,defaultWidth:"full"}),time:(0,e.default)({formats:a,defaultWidth:"full"}),dateTime:(0,e.default)({formats:o,defaultWidth:"full"})},u=s;n.default=u,t.exports=n.default})(ns,ns.exports);var is={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=r;var e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function r(i,a,o,s){return e[i]}t.exports=n.default})(is,is.exports);var as={exports:{}},os={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(r){return function(i,a){var o=a||{},s=o.context?String(o.context):"standalone",u;if(s==="formatting"&&r.formattingValues){var l=r.defaultFormattingWidth||r.defaultWidth,c=o.width?String(o.width):l;u=r.formattingValues[c]||r.formattingValues[l]}else{var f=r.defaultWidth,h=o.width?String(o.width):r.defaultWidth;u=r.values[h]||r.values[f]}var d=r.argumentCallback?r.argumentCallback(i):i;return u[d]}}t.exports=n.default})(os,os.exports);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=r(os.exports);function r(d){return d&&d.__esModule?d:{default:d}}var i={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},a={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},s={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function c(d,p){var m=Number(d),v=m%100;if(v>20||v<10)switch(v%10){case 1:return m+"st";case 2:return m+"nd";case 3:return m+"rd"}return m+"th"}var f={ordinalNumber:c,era:(0,e.default)({values:i,defaultWidth:"wide"}),quarter:(0,e.default)({values:a,defaultWidth:"wide",argumentCallback:function(d){return Number(d)-1}}),month:(0,e.default)({values:o,defaultWidth:"wide"}),day:(0,e.default)({values:s,defaultWidth:"wide"}),dayPeriod:(0,e.default)({values:u,defaultWidth:"wide",formattingValues:l,defaultFormattingWidth:"wide"})},h=f;n.default=h,t.exports=n.default})(as,as.exports);var ss={exports:{}},us={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(r){return function(i,a){var o=String(i),s=a||{},u=o.match(r.matchPattern);if(!u)return null;var l=u[0],c=o.match(r.parsePattern);if(!c)return null;var f=r.valueCallback?r.valueCallback(c[0]):c[0];return f=s.valueCallback?s.valueCallback(f):f,{value:f,rest:o.slice(l.length)}}}t.exports=n.default})(us,us.exports);var ls={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=e;function e(a){return function(o,s){var u=String(o),l=s||{},c=l.width,f=c&&a.matchPatterns[c]||a.matchPatterns[a.defaultMatchWidth],h=u.match(f);if(!h)return null;var d=h[0],p=c&&a.parsePatterns[c]||a.parsePatterns[a.defaultParseWidth],m;return Object.prototype.toString.call(p)==="[object Array]"?m=i(p,function(v){return v.test(u)}):m=r(p,function(v){return v.test(u)}),m=a.valueCallback?a.valueCallback(m):m,m=l.valueCallback?l.valueCallback(m):m,{value:m,rest:u.slice(d.length)}}}function r(a,o){for(var s in a)if(a.hasOwnProperty(s)&&o(a[s]))return s}function i(a,o){for(var s=0;s<a.length;s++)if(o(a[s]))return s}t.exports=n.default})(ls,ls.exports);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=i(us.exports),r=i(ls.exports);function i(y){return y&&y.__esModule?y:{default:y}}var a=/^(\d+)(th|st|nd|rd)?/i,o=/\d+/i,s={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u={any:[/^b/i,/^(a|c)/i]},l={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},c={any:[/1/i,/2/i,/3/i,/4/i]},f={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},d={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},p={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},m={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},v={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},x={ordinalNumber:(0,e.default)({matchPattern:a,parsePattern:o,valueCallback:function(y){return parseInt(y,10)}}),era:(0,r.default)({matchPatterns:s,defaultMatchWidth:"wide",parsePatterns:u,defaultParseWidth:"any"}),quarter:(0,r.default)({matchPatterns:l,defaultMatchWidth:"wide",parsePatterns:c,defaultParseWidth:"any",valueCallback:function(y){return y+1}}),month:(0,r.default)({matchPatterns:f,defaultMatchWidth:"wide",parsePatterns:h,defaultParseWidth:"any"}),day:(0,r.default)({matchPatterns:d,defaultMatchWidth:"wide",parsePatterns:p,defaultParseWidth:"any"}),dayPeriod:(0,r.default)({matchPatterns:m,defaultMatchWidth:"any",parsePatterns:v,defaultParseWidth:"any"})},g=x;n.default=g,t.exports=n.default})(ss,ss.exports);(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=s(es.exports),r=s(ns.exports),i=s(is.exports),a=s(as.exports),o=s(ss.exports);function s(c){return c&&c.__esModule?c:{default:c}}var u={code:"en-US",formatDistance:e.default,formatLong:r.default,formatRelative:i.default,localize:a.default,match:o.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},l=u;n.default=l,t.exports=n.default})(ts,ts.exports);var XO=Cv(ts.exports),ZO=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Pn={type:Oe.END_LINE,threshold:16,numCharacter:14},KO={enabled:!0,position:xn.BOTTOM,clickable:!0,truncation:Pn,alignment:Lt.LEFT,order:null,additionalItems:[]},wf={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},Sf={enabled:!0},cs={enabled:!0,showTotal:!0,truncation:Pn,groupLabel:"Group"},QO={top:{visible:!0,includeZero:!0,truncation:Pn},bottom:{visible:!0,includeZero:!0,truncation:Pn},left:{visible:!0,includeZero:!0,truncation:Pn},right:{visible:!0,includeZero:!0,truncation:Pn}},_r={addSpaceOnEdges:1,showDayName:!1,localeObject:XO,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}},JO=typeof document!="undefined"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled),jt={width:null,height:null,resizable:!0,tooltip:cs,legend:KO,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:ZO([{type:Tt.SHOW_AS_DATATABLE}],JO?[{type:Tt.MAKE_FULLSCREEN}]:[],[{type:Tt.EXPORT_CSV},{type:Tt.EXPORT_PNG},{type:Tt.EXPORT_JPG}])}},xr=_.merge({},jt,{axes:QO,timeScale:_r,grid:wf,ruler:Sf,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:ae.GRAPH_VIEW}}}),rn=_.merge({},xr,{bars:{maxWidth:16},timeScale:_.merge(_r,{addSpaceOnEdges:1})}),tT=_.merge({},rn,{}),eT=_.merge({},rn,{}),nT=_.merge({},rn,{bars:_.merge({},rn.bars,{dividerSize:1.5})}),rT=_.merge({},rn,{}),fs=_.merge({},xr,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),iT=fs,Ef=_.merge({},fs,{points:{radius:3,filled:!1,enabled:!0}}),Mf=_.merge({},Ef,{timeScale:_.merge(_r,{addSpaceOnEdges:0})}),aT=Mf,oT=_.merge({},xr,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:function(t,n){var e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:Ct.RADIUS,name:"Radius"}]}}),sT=_.merge({},xr,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:Ct.AREA,name:"Poor area"},{type:Ct.AREA,name:"Satisfactory area"},{type:Ct.AREA,name:"Great area"},{type:Ct.QUARTILE,name:"Quartiles"}]}}),uT=_.merge({},rn,{bars:{dividerSize:1.5},timeScale:_.merge(_r,{addSpaceOnEdges:0})}),lT=_.merge({},jt,{tooltip:_.merge({},cs,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:function(t,n){var e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}}),Cf=_.merge({},jt,{pie:{labels:{formatter:null,enabled:!0},alignment:Lt.LEFT,sortFunction:null,valueMapsTo:"value"}}),cT=_.merge({},jt,{legend:{enabled:!1},gauge:{type:qe.SEMI,arcWidth:16,deltaArrow:{size:function(t){return t/8},enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:function(t){return t/8},valueFontSize:function(t){return t/2.5},numberFormatter:function(t){return t.toFixed(2)%1!=0?t.toFixed(2).toLocaleString():t.toFixed().toLocaleString()},alignment:Lt.LEFT}}),fT=_.merge({},Cf,{donut:{center:{numberFontSize:function(t){return Math.min(t/100*24,24)+"px"},titleFontSize:function(t){return Math.min(t/100*15,15)+"px"},titleYPosition:function(t){return Math.min(t/80*20,20)},numberFormatter:function(t){return Math.floor(t).toLocaleString()}},alignment:Lt.LEFT}}),Af=_.merge({},jt,{legend:{enabled:!1,clickable:!1},meter:{proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),hT=_.merge({},Af,{legend:{enabled:!0}}),dT=_.merge({},jt,{radar:{axes:{angle:"key",value:"value"},alignment:Lt.LEFT},tooltip:{gridline:{enabled:!0},valueFormatter:function(t){return t!=null?t:"N/A"}}}),pT=_.merge({},rn,{comboChartTypes:[]}),vT=_.merge({tree:{type:ai.TREE}},jt,{}),gT=_.merge({},jt,{data:_.merge(jt.data,{groupMapsTo:"name"})}),mT=_.merge({},jt,Xe,{data:_.merge(jt.data,{groupMapsTo:"name"})}),yT=_.merge({},jt,{alluvial:{data:_.merge(jt.data,{groupMapsTo:"source"}),nodePadding:24,monochrome:!1,nodes:[]}}),_t={chart:jt,axisChart:xr,simpleBarChart:tT,groupedBarChart:eT,stackedBarChart:nT,boxplotChart:rT,bubbleChart:oT,bulletChart:sT,histogramChart:uT,lineChart:Ef,areaChart:Mf,stackedAreaChart:aT,scatterChart:fs,lollipopChart:iT,pieChart:Cf,donutChart:fT,meterChart:Af,proportionalMeterChart:hT,radarChart:dT,gaugeChart:cT,comboChart:pT,treeChart:vT,treemapChart:gT,circlePackChart:mT,wordCloudChart:lT,alluvialChart:yT},Pf=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",grid:wf,ruler:Sf,baseTooltip:cs,timeScale:_r,options:_t,area:he,axis:Ye,canvasZoomSettings:On,circlePack:Xe,color:Oo,boxplot:Yt,histogram:El,legend:Rt,lines:de,meter:Ht,pie:mt,radar:Ne,alluvial:te,spacers:To,tooltips:Ml,transitions:wo,toolbar:Lv,zoomBar:Wt,defaultLegendAdditionalItems:Cl});function Dn(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function hs(t){let n=t,e=t,r=t;t.length!==2&&(n=(s,u)=>t(s)-u,e=Dn,r=(s,u)=>Dn(t(s),u));function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;r(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;r(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){const f=i(s,u,l,c-1);return f>l&&n(s[f-1],u)>-n(s[f],u)?f-1:f}return{left:i,center:o,right:a}}function _T(t){return t===null?NaN:+t}function*xT(t,n){if(n===void 0)for(let e of t)e!=null&&(e=+e)>=e&&(yield e);else{let e=-1;for(let r of t)(r=n(r,++e,t))!=null&&(r=+r)>=r&&(yield r)}}const bT=hs(Dn),OT=bT.right;hs(_T).center;var Df=OT;function TT(t,n){let e=0;if(n===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++e;else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(i=+i)>=i&&++e}return e}function Se(t,n){let e,r;if(n===void 0)for(const i of t)i!=null&&(e===void 0?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=n(a,++i,t))!=null&&(e===void 0?a>=a&&(e=r=a):(e>a&&(e=a),r<a&&(r=a)))}return[e,r]}class Lf extends Map{constructor(n,e=ET){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Rf(this,n))}has(n){return super.has(Rf(this,n))}set(n,e){return super.set(wT(this,n),e)}delete(n){return super.delete(ST(this,n))}}function Rf({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function wT({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function ST({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function ET(t){return t!==null&&typeof t=="object"?t.valueOf():t}function MT(t){return t}function CT(t=Dn){if(t===Dn)return kf;if(typeof t!="function")throw new TypeError("compare is not a function");return(n,e)=>{const r=t(n,e);return r||r===0?r:(t(e,e)===0)-(t(n,n)===0)}}function kf(t,n){return(t==null||!(t>=t))-(n==null||!(n>=n))||(t<n?-1:t>n?1:0)}var AT=Array.prototype,PT=AT.slice;function Si(t){return()=>t}var ds=Math.sqrt(50),ps=Math.sqrt(10),vs=Math.sqrt(2);function Ei(t,n,e){var r,i=-1,a,o,s;if(n=+n,t=+t,e=+e,t===n&&e>0)return[t];if((r=n<t)&&(a=t,t=n,n=a),(s=Mi(t,n,e))===0||!isFinite(s))return[];if(s>0){let u=Math.round(t/s),l=Math.round(n/s);for(u*s<t&&++u,l*s>n&&--l,o=new Array(a=l-u+1);++i<a;)o[i]=(u+i)*s}else{s=-s;let u=Math.round(t*s),l=Math.round(n*s);for(u/s<t&&++u,l/s>n&&--l,o=new Array(a=l-u+1);++i<a;)o[i]=(u+i)/s}return r&&o.reverse(),o}function Mi(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=ds?10:a>=ps?5:a>=vs?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=ds?10:a>=ps?5:a>=vs?2:1)}function gs(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=ds?i*=10:a>=ps?i*=5:a>=vs&&(i*=2),n<t?-i:i}function DT(t,n,e){let r;for(;;){const i=Mi(t,n,e);if(i===r||i===0||!isFinite(i))return[t,n];i>0?(t=Math.floor(t/i)*i,n=Math.ceil(n/i)*i):i<0&&(t=Math.ceil(t*i)/i,n=Math.floor(n*i)/i),r=i}}function LT(t){return Math.ceil(Math.log(TT(t))/Math.LN2)+1}function RT(){var t=MT,n=Se,e=LT;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,u=new Array(o);for(a=0;a<o;++a)u[a]=t(i[a],a,i);var l=n(u),c=l[0],f=l[1],h=e(u,c,f);if(!Array.isArray(h)){const v=f,x=+h;if(n===Se&&([c,f]=DT(c,f,x)),h=Ei(c,f,x),h[h.length-1]>=f)if(v>=f&&n===Se){const g=Mi(c,f,x);isFinite(g)&&(g>0?f=(Math.floor(f/g)+1)*g:g<0&&(f=(Math.ceil(f*-g)+1)/-g))}else h.pop()}for(var d=h.length;h[0]<=c;)h.shift(),--d;for(;h[d-1]>f;)h.pop(),--d;var p=new Array(d+1),m;for(a=0;a<=d;++a)m=p[a]=[],m.x0=a>0?h[a-1]:c,m.x1=a<d?h[a]:f;for(a=0;a<o;++a)s=u[a],s!=null&&c<=s&&s<=f&&p[Df(h,s,0,d)].push(i[a]);return p}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Si(i),r):t},r.domain=function(i){return arguments.length?(n=typeof i=="function"?i:Si([i[0],i[1]]),r):n},r.thresholds=function(i){return arguments.length?(e=typeof i=="function"?i:Array.isArray(i)?Si(PT.call(i)):Si(i),r):e},r}function an(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function Ln(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function If(t,n,e=0,r=t.length-1,i){for(i=i===void 0?kf:CT(i);r>e;){if(r-e>600){const u=r-e+1,l=n-e+1,c=Math.log(u),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),d=Math.max(e,Math.floor(n-l*f/u+h)),p=Math.min(r,Math.floor(n+(u-l)*f/u+h));If(t,n,d,p,i)}const a=t[n];let o=e,s=r;for(br(t,e,n),i(t[r],a)>0&&br(t,e,r);o<s;){for(br(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[e],a)===0?br(t,e,s):(++s,br(t,s,r)),s<=n&&(e=s+1),n<=s&&(r=s-1)}return t}function br(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function ms(t,n,e){if(t=Float64Array.from(xT(t,e)),!!(r=t.length)){if((n=+n)<=0||r<2)return Ln(t);if(n>=1)return an(t);var r,i=(r-1)*n,a=Math.floor(i),o=an(If(t,a).subarray(0,a+1)),s=Ln(t.subarray(a+1));return o+(s-o)*(i-a)}}function kT(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,a=new Array(i);++r<i;)a[r]=t+r*e;return a}function Nf(t,n){let e=0;if(n===void 0)for(let r of t)(r=+r)&&(e+=r);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}function Or(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const Bf=Symbol("implicit");function Ci(){var t=new Lf,n=[],e=[],r=Bf;function i(a){let o=t.get(a);if(o===void 0){if(r!==Bf)return r;t.set(a,o=n.push(a)-1)}return e[o%e.length]}return i.domain=function(a){if(!arguments.length)return n.slice();n=[],t=new Lf;for(const o of a)t.has(o)||t.set(o,n.push(o)-1);return i},i.range=function(a){return arguments.length?(e=Array.from(a),i):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ci(n,e).unknown(r)},Or.apply(i,arguments),i}function Ai(){var t=Ci().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,a,o,s=!1,u=0,l=0,c=.5;delete t.unknown;function f(){var h=n().length,d=i<r,p=d?i:r,m=d?r:i;a=(m-p)/Math.max(1,h-u+l*2),s&&(a=Math.floor(a)),p+=(m-p-a*(h-u))*c,o=a*(1-u),s&&(p=Math.round(p),o=Math.round(o));var v=kT(h).map(function(x){return p+a*x});return e(d?v.reverse():v)}return t.domain=function(h){return arguments.length?(n(h),f()):n()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(u=Math.min(1,l=+h),f()):u},t.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},t.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return Ai(n(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(c)},Or.apply(f(),arguments)}function ys(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Uf(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Tr(){}var wr=.7,Pi=1/wr,Rn="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ve="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IT=/^#([0-9a-f]{3,8})$/,NT=new RegExp("^rgb\\("+[Rn,Rn,Rn]+"\\)$"),BT=new RegExp("^rgb\\("+[ve,ve,ve]+"\\)$"),UT=new RegExp("^rgba\\("+[Rn,Rn,Rn,Sr]+"\\)$"),VT=new RegExp("^rgba\\("+[ve,ve,ve,Sr]+"\\)$"),$T=new RegExp("^hsl\\("+[Sr,ve,ve]+"\\)$"),GT=new RegExp("^hsla\\("+[Sr,ve,ve,Sr]+"\\)$"),Vf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ys(Tr,Ee,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:$f,formatHex:$f,formatHsl:FT,formatRgb:Gf,toString:Gf});function $f(){return this.rgb().formatHex()}function FT(){return jf(this).formatHsl()}function Gf(){return this.rgb().formatRgb()}function Ee(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=IT.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Ff(n):e===3?new Zt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?Di(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?Di(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=NT.exec(t))?new Zt(n[1],n[2],n[3],1):(n=BT.exec(t))?new Zt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=UT.exec(t))?Di(n[1],n[2],n[3],n[4]):(n=VT.exec(t))?Di(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=$T.exec(t))?Wf(n[1],n[2]/100,n[3]/100,1):(n=GT.exec(t))?Wf(n[1],n[2]/100,n[3]/100,n[4]):Vf.hasOwnProperty(t)?Ff(Vf[t]):t==="transparent"?new Zt(NaN,NaN,NaN,0):null}function Ff(t){return new Zt(t>>16&255,t>>8&255,t&255,1)}function Di(t,n,e,r){return r<=0&&(t=n=e=NaN),new Zt(t,n,e,r)}function HT(t){return t instanceof Tr||(t=Ee(t)),t?(t=t.rgb(),new Zt(t.r,t.g,t.b,t.opacity)):new Zt}function _s(t,n,e,r){return arguments.length===1?HT(t):new Zt(t,n,e,r==null?1:r)}function Zt(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}ys(Zt,_s,Uf(Tr,{brighter:function(t){return t=t==null?Pi:Math.pow(Pi,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?wr:Math.pow(wr,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hf,formatHex:Hf,formatRgb:zf,toString:zf}));function Hf(){return"#"+xs(this.r)+xs(this.g)+xs(this.b)}function zf(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function xs(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Wf(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new ge(t,n,e,r)}function jf(t){if(t instanceof ge)return new ge(t.h,t.s,t.l,t.opacity);if(t instanceof Tr||(t=Ee(t)),!t)return new ge;if(t instanceof ge)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),o=NaN,s=a-i,u=(a+i)/2;return s?(n===a?o=(e-r)/s+(e<r)*6:e===a?o=(r-n)/s+2:o=(n-e)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new ge(o,s,u,t.opacity)}function bs(t,n,e,r){return arguments.length===1?jf(t):new ge(t,n,e,r==null?1:r)}function ge(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}ys(ge,bs,Uf(Tr,{brighter:function(t){return t=t==null?Pi:Math.pow(Pi,t),new ge(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?wr:Math.pow(wr,t),new ge(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Zt(Os(t>=240?t-240:t+120,i,r),Os(t,i,r),Os(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Os(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}var Ts=t=>()=>t;function zT(t,n){return function(e){return t+e*n}}function WT(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function jT(t){return(t=+t)==1?qf:function(n,e){return e-n?WT(n,e,t):Ts(isNaN(n)?e:n)}}function qf(t,n){var e=n-t;return e?zT(t,e):Ts(isNaN(t)?n:t)}var Li=function t(n){var e=jT(n);function r(i,a){var o=e((i=_s(i)).r,(a=_s(a)).r),s=e(i.g,a.g),u=e(i.b,a.b),l=qf(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function qT(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=t[i]*(1-a)+n[i]*a;return r}}function YT(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XT(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),o;for(o=0;o<r;++o)i[o]=Er(t[o],n[o]);for(;o<e;++o)a[o]=n[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function ZT(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function re(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function KT(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=Er(t[i],n[i]):r[i]=n[i];return function(a){for(i in e)r[i]=e[i](a);return r}}var ws=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ss=new RegExp(ws.source,"g");function QT(t){return function(){return t}}function JT(t){return function(n){return t(n)+""}}function Yf(t,n){var e=ws.lastIndex=Ss.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(t=t+"",n=n+"";(r=ws.exec(t))&&(i=Ss.exec(n));)(a=i.index)>e&&(a=n.slice(e,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:re(r,i)})),e=Ss.lastIndex;return e<n.length&&(a=n.slice(e),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?JT(u[0].x):QT(n):(n=u.length,function(l){for(var c=0,f;c<n;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function Er(t,n){var e=typeof n,r;return n==null||e==="boolean"?Ts(n):(e==="number"?re:e==="string"?(r=Ee(n))?(n=r,Li):Yf:n instanceof Ee?Li:n instanceof Date?ZT:YT(n)?qT:Array.isArray(n)?XT:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?KT:re)(t,n)}function Xf(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Zf=180/Math.PI,Es={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kf(t,n,e,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*Zf,skewX:Math.atan(u)*Zf,scaleX:o,scaleY:s}}var Ri;function tw(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Es:Kf(n.a,n.b,n.c,n.d,n.e,n.f)}function ew(t){return t==null||(Ri||(Ri=document.createElementNS("http://www.w3.org/2000/svg","g")),Ri.setAttribute("transform",t),!(t=Ri.transform.baseVal.consolidate()))?Es:(t=t.matrix,Kf(t.a,t.b,t.c,t.d,t.e,t.f))}function Qf(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,p){if(l!==f||c!==h){var m=d.push("translate(",null,n,null,e);p.push({i:m-4,x:re(l,f)},{i:m-2,x:re(c,h)})}else(f||h)&&d.push("translate("+f+n+h+e)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:re(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:re(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,h,d,p){if(l!==f||c!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:re(l,f)},{i:m-2,x:re(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),s(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var p=-1,m=h.length,v;++p<m;)f[(v=h[p]).i]=v.x(d);return f.join("")}}}var nw=Qf(tw,"px, ","px)","deg)"),rw=Qf(ew,", ",")",")");function iw(t){return function(){return t}}function aw(t){return+t}var Jf=[0,1];function kn(t){return t}function Ms(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:iw(isNaN(n)?NaN:.5)}function ow(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function sw(t,n,e){var r=t[0],i=t[1],a=n[0],o=n[1];return i<r?(r=Ms(i,r),a=e(o,a)):(r=Ms(r,i),a=e(a,o)),function(s){return a(r(s))}}function uw(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++o<r;)i[o]=Ms(t[o],t[o+1]),a[o]=e(n[o],n[o+1]);return function(s){var u=Df(t,s,1,r)-1;return a[u](i[u](s))}}function Cs(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function th(){var t=Jf,n=Jf,e=Er,r,i,a,o=kn,s,u,l;function c(){var h=Math.min(t.length,n.length);return o!==kn&&(o=ow(t[0],t[h-1])),s=h>2?uw:sw,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=s(t.map(r),n,e)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=s(n,t.map(r),re)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,aw),c()):t.slice()},f.range=function(h){return arguments.length?(n=Array.from(h),c()):n.slice()},f.rangeRound=function(h){return n=Array.from(h),e=Xf,c()},f.clamp=function(h){return arguments.length?(o=h?!0:kn,c()):o!==kn},f.interpolate=function(h){return arguments.length?(e=h,c()):e},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function eh(){return th()(kn,kn)}function lw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ki(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function In(t){return t=ki(Math.abs(t)),t?t[1]:NaN}function cw(t,n){return function(e,r){for(var i=e.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}}function fw(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var hw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mr(t){if(!(n=hw.exec(t)))throw new Error("invalid format: "+t);var n;return new As({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Mr.prototype=As.prototype;function As(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}As.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dw(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var nh;function pw(t,n){var e=ki(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(nh=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ki(t,Math.max(0,n+a-1))[0]}function rh(t,n){var e=ki(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var ih={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:lw,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>rh(t*100,n),r:rh,s:pw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ah(t){return t}var oh=Array.prototype.map,sh=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function vw(t){var n=t.grouping===void 0||t.thousands===void 0?ah:cw(oh.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ah:fw(oh.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=Mr(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,v=f.zero,x=f.width,g=f.comma,y=f.precision,T=f.trim,b=f.type;b==="n"?(g=!0,b="g"):ih[b]||(y===void 0&&(y=12),T=!0,b="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var O=m==="$"?e:m==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",k=m==="$"?r:/[%p]/.test(b)?o:"",w=ih[b],S=/[defgprs%]/.test(b);y=y===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function R(C){var N=O,L=k,I,E,A;if(b==="c")L=w(C)+L,C="";else{C=+C;var D=C<0||1/C<0;if(C=isNaN(C)?u:w(Math.abs(C),y),T&&(C=dw(C)),D&&+C==0&&p!=="+"&&(D=!1),N=(D?p==="("?p:s:p==="-"||p==="("?"":p)+N,L=(b==="s"?sh[8+nh/3]:"")+L+(D&&p==="("?")":""),S){for(I=-1,E=C.length;++I<E;)if(A=C.charCodeAt(I),48>A||A>57){L=(A===46?i+C.slice(I+1):C.slice(I))+L,C=C.slice(0,I);break}}}g&&!v&&(C=n(C,1/0));var B=N.length+C.length+L.length,M=B<x?new Array(x-B+1).join(h):"";switch(g&&v&&(C=n(M+C,M.length?x-L.length:1/0),M=""),d){case"<":C=N+C+L+M;break;case"=":C=N+M+C+L;break;case"^":C=M.slice(0,B=M.length>>1)+N+C+L+M.slice(B);break;default:C=M+N+C+L;break}return a(C)}return R.toString=function(){return f+""},R}function c(f,h){var d=l((f=Mr(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(In(h)/3)))*3,m=Math.pow(10,-p),v=sh[8+p/3];return function(x){return d(m*x)+v}}return{format:l,formatPrefix:c}}var Ii,Ps,uh;gw({thousands:",",grouping:[3],currency:["$",""]});function gw(t){return Ii=vw(t),Ps=Ii.format,uh=Ii.formatPrefix,Ii}function mw(t){return Math.max(0,-In(Math.abs(t)))}function yw(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(In(n)/3)))*3-In(Math.abs(t)))}function _w(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,In(n)-In(t))+1}function xw(t,n,e,r){var i=gs(t,n,e),a;switch(r=Mr(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(a=yw(i,o))&&(r.precision=a),uh(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=_w(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=mw(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ps(r)}function bw(t){var n=t.domain;return t.ticks=function(e){var r=n();return Ei(r[0],r[r.length-1],e==null?10:e)},t.tickFormat=function(e,r){var i=n();return xw(i[0],i[i.length-1],e==null?10:e,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,a=r.length-1,o=r[i],s=r[a],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);c-- >0;){if(l=Mi(o,s,e),l===u)return r[i]=o,r[a]=s,n(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function Be(){var t=eh();return t.copy=function(){return Cs(t,Be())},Or.apply(t,arguments),bw(t)}function lh(t,n){t=t.slice();var e=0,r=t.length-1,i=t[e],a=t[r],o;return a<i&&(o=e,e=r,r=o,o=i,i=a,a=o),t[e]=n.floor(i),t[r]=n.ceil(a),t}function ch(t){return Math.log(t)}function fh(t){return Math.exp(t)}function Ow(t){return-Math.log(-t)}function Tw(t){return-Math.exp(-t)}function ww(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Sw(t){return t===10?ww:t===Math.E?Math.exp:n=>Math.pow(t,n)}function Ew(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),n=>Math.log(n)/t)}function hh(t){return(n,e)=>-t(-n,e)}function Mw(t){const n=t(ch,fh),e=n.domain;let r=10,i,a;function o(){return i=Ew(r),a=Sw(r),e()[0]<0?(i=hh(i),a=hh(a),t(Ow,Tw)):t(ch,fh),n}return n.base=function(s){return arguments.length?(r=+s,o()):r},n.domain=function(s){return arguments.length?(e(s),o()):e()},n.ticks=s=>{const u=e();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),p,m;const v=s==null?10:+s;let x=[];if(!(r%1)&&d-h<v){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(p=1;p<r;++p)if(m=h<0?p/a(-h):p*a(h),!(m<l)){if(m>c)break;x.push(m)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/a(-h):p*a(h),!(m<l)){if(m>c)break;x.push(m)}x.length*2<v&&(x=Ei(l,c,v))}else x=Ei(h,d,Math.min(d-h,v)).map(a);return f?x.reverse():x},n.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Mr(u)).precision==null&&(u.trim=!0),u=Ps(u)),s===1/0)return u;const l=Math.max(1,r*s/n.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},n.nice=()=>e(lh(e(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),n}function dh(){const t=Mw(th()).domain([1,10]);return t.copy=()=>Cs(t,dh()).base(t.base()),Or.apply(t,arguments),t}var Ds=new Date,Ls=new Date;function Pt(t,n,e,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return t(a=new Date(+a)),a},i.ceil=function(a){return t(a=new Date(a-1)),n(a,1),t(a),a},i.round=function(a){var o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=function(a,o){return n(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,s){var u=[],l;if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;do u.push(l=new Date(+a)),n(a,s),t(a);while(l<a&&a<o);return u},i.filter=function(a){return Pt(function(o){if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},function(o,s){if(o>=o)if(s<0)for(;++s<=0;)for(;n(o,-1),!a(o););else for(;--s>=0;)for(;n(o,1),!a(o););})},e&&(i.count=function(a,o){return Ds.setTime(+a),Ls.setTime(+o),t(Ds),t(Ls),Math.floor(e(Ds,Ls))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?function(o){return r(o)%a==0}:function(o){return i.count(0,o)%a==0}):i}),i}var Rs=Pt(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});Rs.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Pt(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):Rs};var Cw=Rs;const Me=1e3,ie=Me*60,Ce=ie*60,on=Ce*24,ks=on*7,ph=on*30,Is=on*365;var Aw=Pt(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+n*Me)},function(t,n){return(n-t)/Me},function(t){return t.getUTCSeconds()}),Cr=Aw,Pw=Pt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Me)},function(t,n){t.setTime(+t+n*ie)},function(t,n){return(n-t)/ie},function(t){return t.getMinutes()}),vh=Pw,Dw=Pt(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Me-t.getMinutes()*ie)},function(t,n){t.setTime(+t+n*Ce)},function(t,n){return(n-t)/Ce},function(t){return t.getHours()}),gh=Dw,Lw=Pt(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ie)/on,t=>t.getDate()-1),Ni=Lw;function sn(t){return Pt(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(n,e){n.setDate(n.getDate()+e*7)},function(n,e){return(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ie)/ks})}var Ns=sn(0),Bs=sn(1);sn(2);sn(3);var Ar=sn(4);sn(5);sn(6);var Rw=Pt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),mh=Rw,yh=Pt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});yh.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Pt(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)})};var un=yh,kw=Pt(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*ie)},function(t,n){return(n-t)/ie},function(t){return t.getUTCMinutes()}),Iw=kw,Nw=Pt(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+n*Ce)},function(t,n){return(n-t)/Ce},function(t){return t.getUTCHours()}),Bw=Nw,Uw=Pt(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/on},function(t){return t.getUTCDate()-1}),Us=Uw;function ln(t){return Pt(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCDate(n.getUTCDate()+e*7)},function(n,e){return(e-n)/ks})}var _h=ln(0),Vs=ln(1);ln(2);ln(3);var Pr=ln(4);ln(5);ln(6);var Vw=Pt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),$w=Vw,xh=Pt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});xh.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Pt(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})};var Nn=xh;function bh(t,n,e,r,i,a){const o=[[Cr,1,Me],[Cr,5,5*Me],[Cr,15,15*Me],[Cr,30,30*Me],[a,1,ie],[a,5,5*ie],[a,15,15*ie],[a,30,30*ie],[i,1,Ce],[i,3,3*Ce],[i,6,6*Ce],[i,12,12*Ce],[r,1,on],[r,2,2*on],[e,1,ks],[n,1,ph],[n,3,3*ph],[t,1,Is]];function s(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:u(l,c,f),p=d?d.range(l,+c+1):[];return h?p.reverse():p}function u(l,c,f){const h=Math.abs(c-l)/f,d=hs(([,,v])=>v).right(o,h);if(d===o.length)return t.every(gs(l/Is,c/Is,f));if(d===0)return Cw.every(Math.max(gs(l,c,f),1));const[p,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return p.every(m)}return[s,u]}bh(Nn,$w,_h,Us,Bw,Iw);const[Gw,Fw]=bh(un,mh,Ns,Ni,gh,vh);function $s(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Gs(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Dr(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function Hw(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,l=Lr(i),c=Rr(i),f=Lr(a),h=Rr(a),d=Lr(o),p=Rr(o),m=Lr(s),v=Rr(s),x=Lr(u),g=Rr(u),y={a:D,A:B,b:M,B:U,c:null,d:Mh,e:Mh,f:hS,g:OS,G:wS,H:lS,I:cS,j:fS,L:Ch,m:dS,M:pS,p:G,q,Q:kh,s:Ih,S:vS,u:gS,U:mS,V:yS,w:_S,W:xS,x:null,X:null,y:bS,Y:TS,Z:SS,"%":Rh},T={a:tt,A:J,b:Y,B:Q,c:null,d:Ph,e:Ph,f:AS,g:VS,G:GS,H:ES,I:MS,j:CS,L:Dh,m:PS,M:DS,p:K,q:nt,Q:kh,s:Ih,S:LS,u:RS,U:kS,V:IS,w:NS,W:BS,x:null,X:null,y:US,Y:$S,Z:FS,"%":Rh},b={a:R,A:C,b:N,B:L,c:I,d:Sh,e:Sh,f:aS,g:wh,G:Th,H:Eh,I:Eh,j:eS,L:iS,m:tS,M:nS,p:S,q:Jw,Q:sS,s:uS,S:rS,u:Yw,U:Xw,V:Zw,w:qw,W:Kw,x:E,X:A,y:wh,Y:Th,Z:Qw,"%":oS};y.x=O(e,y),y.X=O(r,y),y.c=O(n,y),T.x=O(e,T),T.X=O(r,T),T.c=O(n,T);function O(z,Z){return function(at){var H=[],ct=-1,ot=0,dt=z.length,Et,F,W;for(at instanceof Date||(at=new Date(+at));++ct<dt;)z.charCodeAt(ct)===37&&(H.push(z.slice(ot,ct)),(F=Oh[Et=z.charAt(++ct)])!=null?Et=z.charAt(++ct):F=Et==="e"?" ":"0",(W=Z[Et])&&(Et=W(at,F)),H.push(Et),ot=ct+1);return H.push(z.slice(ot,ct)),H.join("")}}function k(z,Z){return function(at){var H=Dr(1900,void 0,1),ct=w(H,z,at+="",0),ot,dt;if(ct!=at.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(Z&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(ot=Gs(Dr(H.y,0,1)),dt=ot.getUTCDay(),ot=dt>4||dt===0?Vs.ceil(ot):Vs(ot),ot=Us.offset(ot,(H.V-1)*7),H.y=ot.getUTCFullYear(),H.m=ot.getUTCMonth(),H.d=ot.getUTCDate()+(H.w+6)%7):(ot=$s(Dr(H.y,0,1)),dt=ot.getDay(),ot=dt>4||dt===0?Bs.ceil(ot):Bs(ot),ot=Ni.offset(ot,(H.V-1)*7),H.y=ot.getFullYear(),H.m=ot.getMonth(),H.d=ot.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),dt="Z"in H?Gs(Dr(H.y,0,1)).getUTCDay():$s(Dr(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(dt+5)%7:H.w+H.U*7-(dt+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,Gs(H)):$s(H)}}function w(z,Z,at,H){for(var ct=0,ot=Z.length,dt=at.length,Et,F;ct<ot;){if(H>=dt)return-1;if(Et=Z.charCodeAt(ct++),Et===37){if(Et=Z.charAt(ct++),F=b[Et in Oh?Z.charAt(ct++):Et],!F||(H=F(z,at,H))<0)return-1}else if(Et!=at.charCodeAt(H++))return-1}return H}function S(z,Z,at){var H=l.exec(Z.slice(at));return H?(z.p=c.get(H[0].toLowerCase()),at+H[0].length):-1}function R(z,Z,at){var H=d.exec(Z.slice(at));return H?(z.w=p.get(H[0].toLowerCase()),at+H[0].length):-1}function C(z,Z,at){var H=f.exec(Z.slice(at));return H?(z.w=h.get(H[0].toLowerCase()),at+H[0].length):-1}function N(z,Z,at){var H=x.exec(Z.slice(at));return H?(z.m=g.get(H[0].toLowerCase()),at+H[0].length):-1}function L(z,Z,at){var H=m.exec(Z.slice(at));return H?(z.m=v.get(H[0].toLowerCase()),at+H[0].length):-1}function I(z,Z,at){return w(z,n,Z,at)}function E(z,Z,at){return w(z,e,Z,at)}function A(z,Z,at){return w(z,r,Z,at)}function D(z){return o[z.getDay()]}function B(z){return a[z.getDay()]}function M(z){return u[z.getMonth()]}function U(z){return s[z.getMonth()]}function G(z){return i[+(z.getHours()>=12)]}function q(z){return 1+~~(z.getMonth()/3)}function tt(z){return o[z.getUTCDay()]}function J(z){return a[z.getUTCDay()]}function Y(z){return u[z.getUTCMonth()]}function Q(z){return s[z.getUTCMonth()]}function K(z){return i[+(z.getUTCHours()>=12)]}function nt(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var Z=O(z+="",y);return Z.toString=function(){return z},Z},parse:function(z){var Z=k(z+="",!1);return Z.toString=function(){return z},Z},utcFormat:function(z){var Z=O(z+="",T);return Z.toString=function(){return z},Z},utcParse:function(z){var Z=k(z+="",!0);return Z.toString=function(){return z},Z}}}var Oh={"-":"",_:" ","0":"0"},Dt=/^\s*\d+/,zw=/^%/,Ww=/[\\^$*+?|[\]().{}]/g;function ht(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<e?new Array(e-a+1).join(n)+i:i)}function jw(t){return t.replace(Ww,"\\$&")}function Lr(t){return new RegExp("^(?:"+t.map(jw).join("|")+")","i")}function Rr(t){return new Map(t.map((n,e)=>[n.toLowerCase(),e]))}function qw(t,n,e){var r=Dt.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Yw(t,n,e){var r=Dt.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Xw(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Zw(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Kw(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Th(t,n,e){var r=Dt.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function wh(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Qw(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Jw(t,n,e){var r=Dt.exec(n.slice(e,e+1));return r?(t.q=r[0]*3-3,e+r[0].length):-1}function tS(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Sh(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function eS(t,n,e){var r=Dt.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Eh(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function nS(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function rS(t,n,e){var r=Dt.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function iS(t,n,e){var r=Dt.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function aS(t,n,e){var r=Dt.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function oS(t,n,e){var r=zw.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function sS(t,n,e){var r=Dt.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function uS(t,n,e){var r=Dt.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function Mh(t,n){return ht(t.getDate(),n,2)}function lS(t,n){return ht(t.getHours(),n,2)}function cS(t,n){return ht(t.getHours()%12||12,n,2)}function fS(t,n){return ht(1+Ni.count(un(t),t),n,3)}function Ch(t,n){return ht(t.getMilliseconds(),n,3)}function hS(t,n){return Ch(t,n)+"000"}function dS(t,n){return ht(t.getMonth()+1,n,2)}function pS(t,n){return ht(t.getMinutes(),n,2)}function vS(t,n){return ht(t.getSeconds(),n,2)}function gS(t){var n=t.getDay();return n===0?7:n}function mS(t,n){return ht(Ns.count(un(t)-1,t),n,2)}function Ah(t){var n=t.getDay();return n>=4||n===0?Ar(t):Ar.ceil(t)}function yS(t,n){return t=Ah(t),ht(Ar.count(un(t),t)+(un(t).getDay()===4),n,2)}function _S(t){return t.getDay()}function xS(t,n){return ht(Bs.count(un(t)-1,t),n,2)}function bS(t,n){return ht(t.getFullYear()%100,n,2)}function OS(t,n){return t=Ah(t),ht(t.getFullYear()%100,n,2)}function TS(t,n){return ht(t.getFullYear()%1e4,n,4)}function wS(t,n){var e=t.getDay();return t=e>=4||e===0?Ar(t):Ar.ceil(t),ht(t.getFullYear()%1e4,n,4)}function SS(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ht(n/60|0,"0",2)+ht(n%60,"0",2)}function Ph(t,n){return ht(t.getUTCDate(),n,2)}function ES(t,n){return ht(t.getUTCHours(),n,2)}function MS(t,n){return ht(t.getUTCHours()%12||12,n,2)}function CS(t,n){return ht(1+Us.count(Nn(t),t),n,3)}function Dh(t,n){return ht(t.getUTCMilliseconds(),n,3)}function AS(t,n){return Dh(t,n)+"000"}function PS(t,n){return ht(t.getUTCMonth()+1,n,2)}function DS(t,n){return ht(t.getUTCMinutes(),n,2)}function LS(t,n){return ht(t.getUTCSeconds(),n,2)}function RS(t){var n=t.getUTCDay();return n===0?7:n}function kS(t,n){return ht(_h.count(Nn(t)-1,t),n,2)}function Lh(t){var n=t.getUTCDay();return n>=4||n===0?Pr(t):Pr.ceil(t)}function IS(t,n){return t=Lh(t),ht(Pr.count(Nn(t),t)+(Nn(t).getUTCDay()===4),n,2)}function NS(t){return t.getUTCDay()}function BS(t,n){return ht(Vs.count(Nn(t)-1,t),n,2)}function US(t,n){return ht(t.getUTCFullYear()%100,n,2)}function VS(t,n){return t=Lh(t),ht(t.getUTCFullYear()%100,n,2)}function $S(t,n){return ht(t.getUTCFullYear()%1e4,n,4)}function GS(t,n){var e=t.getUTCDay();return t=e>=4||e===0?Pr(t):Pr.ceil(t),ht(t.getUTCFullYear()%1e4,n,4)}function FS(){return"+0000"}function Rh(){return"%"}function kh(t){return+t}function Ih(t){return Math.floor(+t/1e3)}var Fs,Nh;HS({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function HS(t){return Fs=Hw(t),Nh=Fs.format,Fs}function zS(t){return new Date(t)}function WS(t){return t instanceof Date?+t:+new Date(+t)}function Bh(t,n,e,r,i,a,o,s,u,l){var c=eh(),f=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),v=l("%I %p"),x=l("%a %d"),g=l("%b %d"),y=l("%B"),T=l("%Y");function b(O){return(u(O)<O?d:s(O)<O?p:o(O)<O?m:a(O)<O?v:r(O)<O?i(O)<O?x:g:e(O)<O?y:T)(O)}return c.invert=function(O){return new Date(f(O))},c.domain=function(O){return arguments.length?h(Array.from(O,WS)):h().map(zS)},c.ticks=function(O){var k=h();return t(k[0],k[k.length-1],O==null?10:O)},c.tickFormat=function(O,k){return k==null?b:l(k)},c.nice=function(O){var k=h();return(!O||typeof O.range!="function")&&(O=n(k[0],k[k.length-1],O==null?10:O)),O?h(lh(k,O)):c},c.copy=function(){return Cs(c,Bh(t,n,e,r,i,a,o,s,u,l))},c}function Uh(){return Or.apply(Bh(Gw,Fw,un,mh,Ns,Ni,gh,vh,Cr,Nh).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const Hs=Math.PI,zs=2*Hs,cn=1e-6,jS=zs-cn;function Ws(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function kr(){return new Ws}Ws.prototype=kr.prototype={constructor:Ws,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var a=this._x1,o=this._y1,s=e-t,u=r-n,l=a-t,c=o-n,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>cn)if(!(Math.abs(c*s-u*l)>cn)||!i)this._+="L"+(this._x1=t)+","+(this._y1=n);else{var h=e-a,d=r-o,p=s*s+u*u,m=h*h+d*d,v=Math.sqrt(p),x=Math.sqrt(f),g=i*Math.tan((Hs-Math.acos((p+f-m)/(2*v*x)))/2),y=g/x,T=g/v;Math.abs(y-1)>cn&&(this._+="L"+(t+y*l)+","+(n+y*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*d)+","+(this._x1=t+T*s)+","+(this._y1=n+T*u)}},arc:function(t,n,e,r,i,a){t=+t,n=+n,e=+e,a=!!a;var o=e*Math.cos(r),s=e*Math.sin(r),u=t+o,l=n+s,c=1^a,f=a?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>cn||Math.abs(this._y1-l)>cn)&&(this._+="L"+u+","+l),!!e&&(f<0&&(f=f%zs+zs),f>jS?this._+="A"+e+","+e+",0,1,"+c+","+(t-o)+","+(n-s)+"A"+e+","+e+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>cn&&(this._+="A"+e+","+e+",0,"+ +(f>=Hs)+","+c+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function ut(t){return function(){return t}}var Vh=Math.abs,Ut=Math.atan2,fn=Math.cos,qS=Math.max,js=Math.min,me=Math.sin,Bn=Math.sqrt,Vt=1e-12,Ir=Math.PI,Bi=Ir/2,Ui=2*Ir;function YS(t){return t>1?0:t<-1?Ir:Math.acos(t)}function $h(t){return t>=1?Bi:t<=-1?-Bi:Math.asin(t)}function XS(t){return t.innerRadius}function ZS(t){return t.outerRadius}function KS(t){return t.startAngle}function QS(t){return t.endAngle}function JS(t){return t&&t.padAngle}function tE(t,n,e,r,i,a,o,s){var u=e-t,l=r-n,c=o-i,f=s-a,h=f*u-c*l;if(!(h*h<Vt))return h=(c*(n-a)-f*(t-i))/h,[t+h*u,n+h*l]}function Vi(t,n,e,r,i,a,o){var s=t-e,u=n-r,l=(o?a:-a)/Bn(s*s+u*u),c=l*u,f=-l*s,h=t+c,d=n+f,p=e+c,m=r+f,v=(h+p)/2,x=(d+m)/2,g=p-h,y=m-d,T=g*g+y*y,b=i-a,O=h*m-p*d,k=(y<0?-1:1)*Bn(qS(0,b*b*T-O*O)),w=(O*y-g*k)/T,S=(-O*g-y*k)/T,R=(O*y+g*k)/T,C=(-O*g+y*k)/T,N=w-v,L=S-x,I=R-v,E=C-x;return N*N+L*L>I*I+E*E&&(w=R,S=C),{cx:w,cy:S,x01:-c,y01:-f,x11:w*(i/b-1),y11:S*(i/b-1)}}function Nr(){var t=XS,n=ZS,e=ut(0),r=null,i=KS,a=QS,o=JS,s=null;function u(){var l,c,f=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-Bi,p=a.apply(this,arguments)-Bi,m=Vh(p-d),v=p>d;if(s||(s=l=kr()),h<f&&(c=h,h=f,f=c),!(h>Vt))s.moveTo(0,0);else if(m>Ui-Vt)s.moveTo(h*fn(d),h*me(d)),s.arc(0,0,h,d,p,!v),f>Vt&&(s.moveTo(f*fn(p),f*me(p)),s.arc(0,0,f,p,d,v));else{var x=d,g=p,y=d,T=p,b=m,O=m,k=o.apply(this,arguments)/2,w=k>Vt&&(r?+r.apply(this,arguments):Bn(f*f+h*h)),S=js(Vh(h-f)/2,+e.apply(this,arguments)),R=S,C=S,N,L;if(w>Vt){var I=$h(w/f*me(k)),E=$h(w/h*me(k));(b-=I*2)>Vt?(I*=v?1:-1,y+=I,T-=I):(b=0,y=T=(d+p)/2),(O-=E*2)>Vt?(E*=v?1:-1,x+=E,g-=E):(O=0,x=g=(d+p)/2)}var A=h*fn(x),D=h*me(x),B=f*fn(T),M=f*me(T);if(S>Vt){var U=h*fn(g),G=h*me(g),q=f*fn(y),tt=f*me(y),J;if(m<Ir&&(J=tE(A,D,q,tt,U,G,B,M))){var Y=A-J[0],Q=D-J[1],K=U-J[0],nt=G-J[1],z=1/me(YS((Y*K+Q*nt)/(Bn(Y*Y+Q*Q)*Bn(K*K+nt*nt)))/2),Z=Bn(J[0]*J[0]+J[1]*J[1]);R=js(S,(f-Z)/(z-1)),C=js(S,(h-Z)/(z+1))}}O>Vt?C>Vt?(N=Vi(q,tt,A,D,h,C,v),L=Vi(U,G,B,M,h,C,v),s.moveTo(N.cx+N.x01,N.cy+N.y01),C<S?s.arc(N.cx,N.cy,C,Ut(N.y01,N.x01),Ut(L.y01,L.x01),!v):(s.arc(N.cx,N.cy,C,Ut(N.y01,N.x01),Ut(N.y11,N.x11),!v),s.arc(0,0,h,Ut(N.cy+N.y11,N.cx+N.x11),Ut(L.cy+L.y11,L.cx+L.x11),!v),s.arc(L.cx,L.cy,C,Ut(L.y11,L.x11),Ut(L.y01,L.x01),!v))):(s.moveTo(A,D),s.arc(0,0,h,x,g,!v)):s.moveTo(A,D),!(f>Vt)||!(b>Vt)?s.lineTo(B,M):R>Vt?(N=Vi(B,M,U,G,f,-R,v),L=Vi(A,D,q,tt,f,-R,v),s.lineTo(N.cx+N.x01,N.cy+N.y01),R<S?s.arc(N.cx,N.cy,R,Ut(N.y01,N.x01),Ut(L.y01,L.x01),!v):(s.arc(N.cx,N.cy,R,Ut(N.y01,N.x01),Ut(N.y11,N.x11),!v),s.arc(0,0,f,Ut(N.cy+N.y11,N.cx+N.x11),Ut(L.cy+L.y11,L.cx+L.x11),v),s.arc(L.cx,L.cy,R,Ut(L.y11,L.x11),Ut(L.y01,L.x01),!v))):s.arc(0,0,f,T,y,v)}if(s.closePath(),l)return s=null,l+""||null}return u.centroid=function(){var l=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ir/2;return[fn(c)*l,me(c)*l]},u.innerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:ut(+l),u):t},u.outerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:ut(+l),u):n},u.cornerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:ut(+l),u):e},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:ut(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:ut(+l),u):i},u.endAngle=function(l){return arguments.length?(a=typeof l=="function"?l:ut(+l),u):a},u.padAngle=function(l){return arguments.length?(o=typeof l=="function"?l:ut(+l),u):o},u.context=function(l){return arguments.length?(s=l==null?null:l,u):s},u}var eE=Array.prototype.slice;function $i(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gh(t){this._context=t}Gh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function Gi(t){return new Gh(t)}function qs(t){return t[0]}function Ys(t){return t[1]}function Fi(t,n){var e=ut(!0),r=null,i=Gi,a=null;t=typeof t=="function"?t:t===void 0?qs:ut(t),n=typeof n=="function"?n:n===void 0?Ys:ut(n);function o(s){var u,l=(s=$i(s)).length,c,f=!1,h;for(r==null&&(a=i(h=kr())),u=0;u<=l;++u)!(u<l&&e(c=s[u],u,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(c,u,s),+n(c,u,s));if(h)return a=null,h+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:ut(+s),o):t},o.y=function(s){return arguments.length?(n=typeof s=="function"?s:ut(+s),o):n},o.defined=function(s){return arguments.length?(e=typeof s=="function"?s:ut(!!s),o):e},o.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),o):i},o.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),o):r},o}function Xs(t,n,e){var r=null,i=ut(!0),a=null,o=Gi,s=null;t=typeof t=="function"?t:t===void 0?qs:ut(+t),n=typeof n=="function"?n:ut(n===void 0?0:+n),e=typeof e=="function"?e:e===void 0?Ys:ut(+e);function u(c){var f,h,d,p=(c=$i(c)).length,m,v=!1,x,g=new Array(p),y=new Array(p);for(a==null&&(s=o(x=kr())),f=0;f<=p;++f){if(!(f<p&&i(m=c[f],f,c))===v)if(v=!v)h=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=f-1;d>=h;--d)s.point(g[d],y[d]);s.lineEnd(),s.areaEnd()}v&&(g[f]=+t(m,f,c),y[f]=+n(m,f,c),s.point(r?+r(m,f,c):g[f],e?+e(m,f,c):y[f]))}if(x)return s=null,x+""||null}function l(){return Fi().defined(i).curve(o).context(a)}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:ut(+c),r=null,u):t},u.x0=function(c){return arguments.length?(t=typeof c=="function"?c:ut(+c),u):t},u.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:ut(+c),u):r},u.y=function(c){return arguments.length?(n=typeof c=="function"?c:ut(+c),e=null,u):n},u.y0=function(c){return arguments.length?(n=typeof c=="function"?c:ut(+c),u):n},u.y1=function(c){return arguments.length?(e=c==null?null:typeof c=="function"?c:ut(+c),u):e},u.lineX0=u.lineY0=function(){return l().x(t).y(n)},u.lineY1=function(){return l().x(t).y(e)},u.lineX1=function(){return l().x(r).y(n)},u.defined=function(c){return arguments.length?(i=typeof c=="function"?c:ut(!!c),u):i},u.curve=function(c){return arguments.length?(o=c,a!=null&&(s=o(a)),u):o},u.context=function(c){return arguments.length?(c==null?a=s=null:s=o(a=c),u):a},u}function nE(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function rE(t){return t}function iE(){var t=rE,n=nE,e=null,r=ut(0),i=ut(Ui),a=ut(0);function o(s){var u,l=(s=$i(s)).length,c,f,h=0,d=new Array(l),p=new Array(l),m=+r.apply(this,arguments),v=Math.min(Ui,Math.max(-Ui,i.apply(this,arguments)-m)),x,g=Math.min(Math.abs(v)/l,a.apply(this,arguments)),y=g*(v<0?-1:1),T;for(u=0;u<l;++u)(T=p[d[u]=u]=+t(s[u],u,s))>0&&(h+=T);for(n!=null?d.sort(function(b,O){return n(p[b],p[O])}):e!=null&&d.sort(function(b,O){return e(s[b],s[O])}),u=0,f=h?(v-l*y)/h:0;u<l;++u,m=x)c=d[u],T=p[c],x=m+(T>0?T*f:0)+y,p[c]={data:s[c],index:u,value:T,startAngle:m,endAngle:x,padAngle:g};return p}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:ut(+s),o):t},o.sortValues=function(s){return arguments.length?(n=s,e=null,o):n},o.sort=function(s){return arguments.length?(e=s,n=null,o):e},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:ut(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:ut(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:ut(+s),o):a},o}var aE=Hh(Gi);function Fh(t){this._curve=t}Fh.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};function Hh(t){function n(e){return new Fh(t(e))}return n._curve=t,n}function oE(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(e){return arguments.length?n(Hh(e)):n()._curve},t}function sE(){return oE(Fi().curve(aE))}function uE(t){return t.source}function lE(t){return t.target}function cE(t){var n=uE,e=lE,r=qs,i=Ys,a=null;function o(){var s,u=eE.call(arguments),l=n.apply(this,u),c=e.apply(this,u);if(a||(a=s=kr()),t(a,+r.apply(this,(u[0]=l,u)),+i.apply(this,u),+r.apply(this,(u[0]=c,u)),+i.apply(this,u)),s)return a=null,s+""||null}return o.source=function(s){return arguments.length?(n=s,o):n},o.target=function(s){return arguments.length?(e=s,o):e},o.x=function(s){return arguments.length?(r=typeof s=="function"?s:ut(+s),o):r},o.y=function(s){return arguments.length?(i=typeof s=="function"?s:ut(+s),o):i},o.context=function(s){return arguments.length?(a=s==null?null:s,o):a},o}function fE(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function hE(){return cE(fE)}function Ue(){}function Hi(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function zi(t){this._context=t}zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hi(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function dE(t){return new zi(t)}function zh(t){this._context=t}zh.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:Hi(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function pE(t){return new zh(t)}function Wh(t){this._context=t}Wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:Hi(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function vE(t){return new Wh(t)}function jh(t,n){this._basis=new zi(t),this._beta=n}jh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r=t[0],i=n[0],a=t[e]-r,o=n[e]-i,s=-1,u;++s<=e;)u=s/e,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+u*a),this._beta*n[s]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var gE=function t(n){function e(r){return n===1?new zi(r):new jh(r,n)}return e.beta=function(r){return t(+r)},e}(.85);function Wi(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Zs(t,n){this._context=t,this._k=(1-n)/6}Zs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wi(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Wi(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var mE=function t(n){function e(r){return new Zs(r,n)}return e.tension=function(r){return t(+r)},e}(0);function Ks(t,n){this._context=t,this._k=(1-n)/6}Ks.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Wi(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var yE=function t(n){function e(r){return new Ks(r,n)}return e.tension=function(r){return t(+r)},e}(0);function Qs(t,n){this._context=t,this._k=(1-n)/6}Qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wi(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var _E=function t(n){function e(r){return new Qs(r,n)}return e.tension=function(r){return t(+r)},e}(0);function Js(t,n,e){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Vt){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Vt){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*l+t._x1*t._l23_2a-n*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-e*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function qh(t,n){this._context=t,this._alpha=n}qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Js(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var xE=function t(n){function e(r){return n?new qh(r,n):new Zs(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Yh(t,n){this._context=t,this._alpha=n}Yh.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Js(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var bE=function t(n){function e(r){return n?new Yh(r,n):new Ks(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Xh(t,n){this._context=t,this._alpha=n}Xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Js(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var OE=function t(n){function e(r){return n?new Xh(r,n):new Qs(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Zh(t){this._context=t}Zh.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}};function Kh(t){return new Zh(t)}function Qh(t){return t<0?-1:1}function Jh(t,n,e){var r=t._x1-t._x0,i=n-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(e-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Qh(a)+Qh(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function td(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function tu(t,n,e){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*n,a-s,o-s*e,a,o)}function ji(t){this._context=t}ji.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tu(this,this._t0,td(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,tu(this,td(this,e=Jh(this,t,n)),e);break;default:tu(this,this._t0,e=Jh(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}};function ed(t){this._context=new nd(t)}(ed.prototype=Object.create(ji.prototype)).point=function(t,n){ji.prototype.point.call(this,n,t)};function nd(t){this._context=t}nd.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,a){this._context.bezierCurveTo(n,t,r,e,a,i)}};function TE(t){return new ji(t)}function wE(t){return new ed(t)}function rd(t){this._context=t}rd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),e===2)this._context.lineTo(t[1],n[1]);else for(var r=id(t),i=id(n),a=0,o=1;o<e;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],n[o]);(this._line||this._line!==0&&e===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}};function id(t){var n,e=t.length-1,r,i=new Array(e),a=new Array(e),o=new Array(e);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],n=1;n<e-1;++n)i[n]=1,a[n]=4,o[n]=4*t[n]+2*t[n+1];for(i[e-1]=2,a[e-1]=7,o[e-1]=8*t[e-1]+t[e],n=1;n<e;++n)r=i[n]/a[n-1],a[n]-=r,o[n]-=r*o[n-1];for(i[e-1]=o[e-1]/a[e-1],n=e-2;n>=0;--n)i[n]=(o[n]-i[n+1])/a[n];for(a[e-1]=(t[e]+i[e-1])/2,n=0;n<e-1;++n)a[n]=2*t[n+1]-i[n+1];return[i,a]}function SE(t){return new rd(t)}function qi(t,n){this._context=t,this._t=n}qi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}break}}this._x=t,this._y=n}};function EE(t){return new qi(t,.5)}function ME(t){return new qi(t,0)}function CE(t){return new qi(t,1)}function ad(t,n){if((o=t.length)>1)for(var e=1,r,i,a=t[n[0]],o,s=a.length;e<o;++e)for(i=a,a=t[n[e]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function od(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function AE(t,n){return t[n]}function PE(t){const n=[];return n.key=t,n}function eu(){var t=ut([]),n=od,e=ad,r=AE;function i(a){var o=Array.from(t.apply(this,arguments),PE),s,u=o.length,l=-1,c;for(const f of a)for(s=0,++l;s<u;++s)(o[s][l]=[0,+r(f,o[s].key,l,a)]).data=f;for(s=0,c=$i(n(o));s<u;++s)o[c[s]].index=s;return e(o,c),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:ut(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:ut(+a),i):r},i.order=function(a){return arguments.length?(n=a==null?od:typeof a=="function"?a:ut(Array.from(a)),i):n},i.offset=function(a){return arguments.length?(e=a==null?ad:a,i):e},i}function DE(t,n){if((u=t.length)>0)for(var e,r=0,i,a,o,s,u,l=t[n[0]].length;r<l;++r)for(o=s=0,e=0;e<u;++e)(a=(i=t[n[e]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=a):a<0?(i[1]=s,i[0]=s+=a):(i[0]=0,i[1]=a)}var Yi=globalThis&&globalThis.__assign||function(){return Yi=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yi.apply(this,arguments)},Ae=function(){function t(n){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=n}return t.prototype.getAllDataFromDomain=function(n){if(!this.getData())return null;var e=this.getOptions(),r=this.getData(),i=this.getDataGroups(),a=_.getProperty(e,"data").groupMapsTo,o=_.getProperty(e,"axes");return n&&(r=r.filter(function(s){return n.includes(s[a])})),o&&Object.keys(o).forEach(function(s){var u=o[s].mapsTo,l=o[s].scaleType;if((l===et.LINEAR||l===et.LOG)&&(r=r.map(function(d){var p;return Yi(Yi({},d),(p={},p[u]=d[u]===null?d[u]:Number(d[u]),p))})),u&&o[s].domain)if(l===et.LABELS)r=r.filter(function(d){return o[s].domain.includes(d[u])});else{var c=o[s].domain,f=c[0],h=c[1];r=r.filter(function(d){return!(u in d)||d[u]>=f&&d[u]<=h})}}),r.filter(function(s){return i.find(function(u){return u.name===s[a]})})},t.prototype.getDisplayData=function(n){if(!this.get("data"))return null;var e=Rt.items.status.ACTIVE,r=this.getDataGroups(n),i=this.getOptions().data.groupMapsTo,a=this.getAllDataFromDomain(n);return a.filter(function(o){return r.find(function(s){return s.name===o[i]&&s.status===e})})},t.prototype.getData=function(){return this.get("data")},t.prototype.isDataEmpty=function(){return!this.getData().length},t.prototype.setData=function(n){var e=this.sanitize(_.clone(n)),r=this.generateDataGroups(e);return this.set({data:e,dataGroups:r}),e},t.prototype.getDataGroups=function(n){var e=_.getProperty(this.getOptions(),"data","loading");return e?[]:n?this.get("dataGroups").filter(function(r){return n.includes(r.name)}):this.get("dataGroups")},t.prototype.getActiveDataGroups=function(n){var e=Rt.items.status.ACTIVE;return this.getDataGroups(n).filter(function(r){return r.status===e})},t.prototype.getDataGroupNames=function(n){var e=this.getDataGroups(n);return e.map(function(r){return r.name})},t.prototype.getActiveDataGroupNames=function(n){var e=this.getActiveDataGroups(n);return e.map(function(r){return r.name})},t.prototype.aggregateBinDataByGroup=function(n){return _.groupBy(n,"group")},t.prototype.getBinConfigurations=function(){var n=this,e=this.getDisplayData(),r=this.getOptions(),i=this.services.cartesianScales.getMainXAxisPosition(),a=this.services.cartesianScales.getDomainIdentifier(),o=r.axes[i],s=r.data.groupMapsTo,u=o.bins,l=u===void 0?El.defaultBins:u,c=Array.isArray(l),f=RT().value(function(v){return v[a]}).thresholds(l)(e);if(c)f[f.length-1].x1=l[l.length-1];else{var h=f[0].x1-f[0].x0;f[f.length-1].x1=+f[f.length-1].x0+h}var d=c?[l[0],l[l.length-1]]:[f[0].x0,f[f.length-1].x1],p=Array.from(new Set(e.map(function(v){return v[s]}))),m=[];return f.forEach(function(v){var x=v.x0+"-"+v.x1,g=n.aggregateBinDataByGroup(v);p.forEach(function(y){m.push({group:y,key:x,value:g[y]||0,bin:v.x0})})}),{bins:f,binsDomain:d}},t.prototype.getBinnedStackedData=function(){var n=this.getOptions(),e=n.data.groupMapsTo,r=this.getActiveDataGroupNames(),i=this.getBinConfigurations().bins,a=this.getDataValuesGroupedByKeys({bins:i});return eu().keys(r)(a).map(function(o,s){return Object.keys(o).filter(function(u){return!isNaN(u)}).map(function(u){var l=o[u];return l[e]=r[s],l})})},t.prototype.getGroupedData=function(n){var e=this.getDisplayData(n),r={},i=this.getOptions().data.groupMapsTo;return e.map(function(a){var o=a[i];r[o]!==null&&r[o]!==void 0?r[o].push(a):r[o]=[a]}),Object.keys(r).map(function(a){return{name:a,data:r[a]}})},t.prototype.getStackKeys=function(n){var e=this,r=n.bins,i=r===void 0?null:r,a=n.groups,o=a===void 0?null:a,s=this.getOptions(),u=this.getDisplayData(o),l;i?l=i.map(function(h){return h.x0+"-"+h.x1}):l=_.removeArrayDuplicates(u.map(function(h){var d=e.services.cartesianScales.getDomainIdentifier(h);return h[d]&&typeof h[d].toString=="function"?h[d].toString():h[d]}));var c=this.services.cartesianScales.domainAxisPosition,f=s.axes[c].scaleType;return f===et.TIME?l.sort(function(h,d){var p=new Date(h),m=new Date(d);return p-m}):(f===et.LOG||f===et.LINEAR)&&l.sort(function(h,d){return h-d}),l},t.prototype.getDataValuesGroupedByKeys=function(n){var e=this,r=n.bins,i=r===void 0?null:r,a=n.groups,o=a===void 0?null:a,s=this.getOptions(),u=s.data.groupMapsTo,l=this.getDisplayData(o),c=this.getDataGroupNames(),f=this.getStackKeys({bins:i,groups:o});return i?f.map(function(h){var d=h.split("-"),p=d[0],m=d[1],v={x0:p,x1:m},x=i.find(function(g){return g.x0.toString()===p.toString()});return c.forEach(function(g){v[g]=x.filter(function(y){return y[u]===g}).length}),v}):f.map(function(h){var d={sharedStackKey:h};return c.forEach(function(p){var m=l.find(function(x){var g=e.services.cartesianScales.getDomainIdentifier(x);return x[u]===p&&x.hasOwnProperty(g)&&x[g].toString()===h}),v=e.services.cartesianScales.getRangeIdentifier(d);d[p]=m?m[v]:null}),d})},t.prototype.getStackedData=function(n){var e=n.percentage,r=e===void 0?!1:e,i=n.groups,a=i===void 0?null:i,o=n.divergent,s=o===void 0?!1:o,u=this.getOptions(),l=u.data.groupMapsTo,c=this.getDataGroupNames(a),f=this.getDataValuesGroupedByKeys({groups:a});if(r){var h=_.fromPairs(f.map(function(p){return[p.sharedStackKey,0]}));f.forEach(function(p){c.forEach(function(m){h[p.sharedStackKey]+=p[m]})}),f.forEach(function(p){c.forEach(function(m){h[p.sharedStackKey]?p[m]=p[m]/h[p.sharedStackKey]*100:p[m]=0})})}var d=s?eu().offset(DE):eu();return d.keys(c)(f).map(function(p,m){return Object.keys(p).filter(function(v){return!isNaN(v)}).map(function(v){var x=p[v];return x[l]=c[m],x})})},t.prototype.getOptions=function(){return this.state.options},t.prototype.set=function(n,e){this.state=Object.assign({},this.state,n);var r=Object.assign({skipUpdate:!1,animate:!0},e);r.skipUpdate||this.update(r.animate)},t.prototype.get=function(n){return n?this.state[n]:this.state},t.prototype.setOptions=function(n){var e=this.getOptions();_.updateLegendAdditionalItems(e,n),this.set({options:_.merge(e,n)})},t.prototype.update=function(n){n===void 0&&(n=!0),!!this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(P.Model.UPDATE,{animate:n}))},t.prototype.toggleDataLabel=function(n){var e=Rt.items.status,r=e.ACTIVE,i=e.DISABLED,a=this.getDataGroups(),o=a.some(function(h){return h.status===i}),s=a.filter(function(h){return h.status===r});if(o)if(s.length===1&&s[0].name===n)a.forEach(function(h,d){a[d].status=r});else{var u=a.findIndex(function(h){return h.name===n});a[u].status=a[u].status===i?r:i}else a.forEach(function(h,d){a[d].status=h.name===n?r:i});var l=a.filter(function(h){return h.status===r}),c=this.getOptions(),f=a.some(function(h){return h.status===i});f?c.data.selectedGroups=l.map(function(h){return h.name}):c.data.selectedGroups=[],this.services.events.dispatchEvent(P.Legend.ITEMS_UPDATE,{dataGroups:a}),this.set({dataGroups:a})},t.prototype.getIsFilled=function(n,e,r,i){var a=this.getOptions();return a.getIsFilled?a.getIsFilled(n,e,r,i):i},t.prototype.getFillColor=function(n,e,r){var i=this.getOptions(),a=_.getProperty(this.colorScale,n);return i.getFillColor?i.getFillColor(n,e,r,a):a},t.prototype.getStrokeColor=function(n,e,r){var i=this.getOptions(),a=_.getProperty(this.colorScale,n);return i.getStrokeColor?i.getStrokeColor(n,e,r,a):a},t.prototype.isUserProvidedColorScaleValid=function(){var n=_.getProperty(this.getOptions(),"color","scale"),e=this.getDataGroups();return n==null||Object.keys(n).length==0?!1:e.some(function(r){return Object.keys(n).includes(r.name)})},t.prototype.getColorClassName=function(n){var e=this.colorClassNames(n.dataGroupName),r=n.originalClassName;return n.classNameTypes.forEach(function(i){return r=n.originalClassName?r+" "+i+"-"+e:i+"-"+e}),r},t.prototype.getStatus=function(){return null},t.prototype.getAllDataGroupsNames=function(){return this.allDataGroups},t.prototype.transformToTabularData=function(n){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://carbon-design-system.github.io/carbon-charts/?path=/story/docs-tutorials--tabular-data-format");var e=[],r=n.datasets,i=n.labels;return r.forEach(function(a){a.data.forEach(function(o,s){var u,l=_.getProperty(a,"label");if(l===null){var c=_.getProperty(i,s);c?u=c:u="Ungrouped"}else u=l;var f={group:u,key:i[s]};isNaN(o)?(f.value=o.value,f.date=o.date):f.value=o,e.push(f)})}),e},t.prototype.getTabularDataArray=function(){return[]},t.prototype.exportToCSV=function(){var n=this.getTabularDataArray().map(function(i){return i.map(function(a){return'"'+a+'"'})}),e="",r="";n.forEach(function(i,a){r=i.join(","),e+=a<n.length?r+`
`:r}),this.services.files.downloadCSV(e,"myChart.csv")},t.prototype.getTabularData=function(n){return Array.isArray(n)?n:this.transformToTabularData(n)},t.prototype.sanitize=function(n){return n=this.getTabularData(n),n},t.prototype.updateAllDataGroups=function(){var n=this;this.allDataGroups?this.getDataGroupNames().forEach(function(e){n.allDataGroups.indexOf(e)===-1&&n.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()},t.prototype.generateDataGroups=function(n){var e=this.getOptions().data.groupMapsTo,r=Rt.items.status,i=r.ACTIVE,a=r.DISABLED,o=this.getOptions(),s=_.removeArrayDuplicates(n.map(function(c){return c[e]}));if(o.data.selectedGroups.length){var u=o.data.selectedGroups.every(function(c){return s.includes(c)});u||(o.data.selectedGroups=[])}var l=function(c){return!o.data.selectedGroups.length||o.data.selectedGroups.includes(c)?i:a};return s.map(function(c){return{name:c,status:l(c)}})},t.prototype.setCustomColorScale=function(){var n=this;if(!!this.isUserProvidedColorScaleValid()){var e=this.getOptions(),r=_.getProperty(e,"color","scale");Object.keys(r).forEach(function(a){n.allDataGroups.includes(a)||console.warn('"'+a+'" does not exist in data groups.')});var i=this.allDataGroups.filter(function(a){return r[a]});i.forEach(function(a){return n.colorScale[a]=r[a]})}},t.prototype.setColorClassNames=function(){var n=_.getProperty(this.getOptions(),"color","pairing"),e=_.getProperty(n,"numberOfVariants");(!e||e<this.allDataGroups.length)&&(e=this.allDataGroups.length);var r=_.getProperty(n,"option"),i=Oo.pairingOptions,a=e>5?14:e;r=r<=i[a+"-color"]?r:1;var o=this.allDataGroups.map(function(s,u){return a+"-"+r+"-"+(u%14+1)});this.colorClassNames=Ci().range(o).domain(this.allDataGroups)},t}(),Pe=function(){function t(n,e){this.model=n,this.services=e,this.init()}return t.prototype.init=function(){},t.prototype.update=function(){},t.prototype.setModel=function(n){this.model=n},t.prototype.setServices=function(n){this.services=n},t}(),LE={prefix:"bx",selectorTabbable:`
    a[href], area[href], input:not([disabled]):not([tabindex='-1']),
    button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
    textarea:not([disabled]):not([tabindex='-1']),
    iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]
  `,selectorFocusable:`
    a[href], area[href], input:not([disabled]),
    button:not([disabled]),select:not([disabled]),
    textarea:not([disabled]),
    iframe, object, embed, *[tabindex], *[contenteditable=true]
  `},RE=LE,It=RE,sd=function(){if(typeof Map!="undefined")return Map;function t(n,e){var r=-1;return n.some(function(i,a){return i[0]===e?(r=a,!0):!1}),r}return function(){function n(){this.__entries__=[]}var e={size:{configurable:!0}};return e.size.get=function(){return this.__entries__.length},n.prototype.get=function(r){var i=t(this.__entries__,r),a=this.__entries__[i];return a&&a[1]},n.prototype.set=function(r,i){var a=t(this.__entries__,r);~a?this.__entries__[a][1]=i:this.__entries__.push([r,i])},n.prototype.delete=function(r){var i=this.__entries__,a=t(i,r);~a&&i.splice(a,1)},n.prototype.has=function(r){return!!~t(this.__entries__,r)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(r,i){var a=this;i===void 0&&(i=null);for(var o=0,s=a.__entries__;o<s.length;o+=1){var u=s[o];r.call(i,u[1],u[0])}},Object.defineProperties(n.prototype,e),n}()}(),nu=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Xi=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),kE=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Xi):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),IE=2,NE=function(t,n){var e=!1,r=!1,i=0;function a(){e&&(e=!1,t()),r&&s()}function o(){kE(a)}function s(){var u=Date.now();if(e){if(u-i<IE)return;r=!0}else e=!0,r=!1,setTimeout(o,n);i=u}return s},BE=20,UE=["top","right","bottom","left","width","height","size","weight"],VE=typeof MutationObserver!="undefined",ue=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=NE(this.refresh.bind(this),BE)};ue.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()};ue.prototype.removeObserver=function(t){var n=this.observers_,e=n.indexOf(t);~e&&n.splice(e,1),!n.length&&this.connected_&&this.disconnect_()};ue.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()};ue.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0};ue.prototype.connect_=function(){!nu||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),VE?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)};ue.prototype.disconnect_=function(){!nu||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)};ue.prototype.onTransitionEnd_=function(t){var n=t.propertyName;n===void 0&&(n="");var e=UE.some(function(r){return!!~n.indexOf(r)});e&&this.refresh()};ue.getInstance=function(){return this.instance_||(this.instance_=new ue),this.instance_};ue.instance_=null;var ud=function(t,n){for(var e=0,r=Object.keys(n);e<r.length;e+=1){var i=r[e];Object.defineProperty(t,i,{value:n[i],enumerable:!1,writable:!1,configurable:!0})}return t},Un=function(t){var n=t&&t.ownerDocument&&t.ownerDocument.defaultView;return n||Xi},ld=Ki(0,0,0,0);function Zi(t){return parseFloat(t)||0}function cd(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];return n.reduce(function(r,i){var a=t["border-"+i+"-width"];return r+Zi(a)},0)}function $E(t){for(var n=["top","right","bottom","left"],e={},r=0,i=n;r<i.length;r+=1){var a=i[r],o=t["padding-"+a];e[a]=Zi(o)}return e}function GE(t){var n=t.getBBox();return Ki(0,0,n.width,n.height)}function FE(t){var n=t.clientWidth,e=t.clientHeight;if(!n&&!e)return ld;var r=Un(t).getComputedStyle(t),i=$E(r),a=i.left+i.right,o=i.top+i.bottom,s=Zi(r.width),u=Zi(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+a)!==n&&(s-=cd(r,"left","right")+a),Math.round(u+o)!==e&&(u-=cd(r,"top","bottom")+o)),!zE(t)){var l=Math.round(s+a)-n,c=Math.round(u+o)-e;Math.abs(l)!==1&&(s-=l),Math.abs(c)!==1&&(u-=c)}return Ki(i.left,i.top,s,u)}var HE=function(){return typeof SVGGraphicsElement!="undefined"?function(t){return t instanceof Un(t).SVGGraphicsElement}:function(t){return t instanceof Un(t).SVGElement&&typeof t.getBBox=="function"}}();function zE(t){return t===Un(t).document.documentElement}function WE(t){return nu?HE(t)?GE(t):FE(t):ld}function jE(t){var n=t.x,e=t.y,r=t.width,i=t.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return ud(o,{x:n,y:e,width:r,height:i,top:e,right:n+r,bottom:i+e,left:n}),o}function Ki(t,n,e,r){return{x:t,y:n,width:e,height:r}}var ru=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ki(0,0,0,0),this.target=t};ru.prototype.isActive=function(){var t=WE(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight};ru.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var qE=function(t,n){var e=jE(n);ud(this,{target:t,contentRect:e})},Ve=function(t,n,e){if(this.activeObservations_=[],this.observations_=new sd,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=e};Ve.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Un(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new ru(t)),this.controller_.addObserver(this),this.controller_.refresh())}};Ve.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Un(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}};Ve.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)};Ve.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})};Ve.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(e){return new qE(e.target,e.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}};Ve.prototype.clearActive=function(){this.activeObservations_.splice(0)};Ve.prototype.hasActive=function(){return this.activeObservations_.length>0};var fd=typeof WeakMap!="undefined"?new WeakMap:new sd,iu=function(t){if(!(this instanceof iu))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ue.getInstance(),e=new Ve(t,n,this);fd.set(this,e)};["observe","unobserve","disconnect"].forEach(function(t){iu.prototype[t]=function(){return(n=fd.get(this))[t].apply(n,arguments);var n}});var YE=function(){return typeof Xi.ResizeObserver!="undefined"?Xi.ResizeObserver:iu}(),hd={exports:{}};(function(t){(function(n){var e=y(),r=T(),i=b(),a=O(),o={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:u,toPng:c,toJpeg:f,toBlob:h,toPixelData:l,impl:{fontFaces:i,images:a,util:e,inliner:r,options:{}}};t.exports=s;function u(k,w){return w=w||{},d(w),Promise.resolve(k).then(function(R){return m(R,w.filter,!0)}).then(v).then(x).then(S).then(function(R){return g(R,w.width||e.width(k),w.height||e.height(k))});function S(R){return w.bgcolor&&(R.style.backgroundColor=w.bgcolor),w.width&&(R.style.width=w.width+"px"),w.height&&(R.style.height=w.height+"px"),w.style&&Object.keys(w.style).forEach(function(C){R.style[C]=w.style[C]}),R}}function l(k,w){return p(k,w||{}).then(function(S){return S.getContext("2d").getImageData(0,0,e.width(k),e.height(k)).data})}function c(k,w){return p(k,w||{}).then(function(S){return S.toDataURL()})}function f(k,w){return w=w||{},p(k,w).then(function(S){return S.toDataURL("image/jpeg",w.quality||1)})}function h(k,w){return p(k,w||{}).then(e.canvasToBlob)}function d(k){typeof k.imagePlaceholder=="undefined"?s.impl.options.imagePlaceholder=o.imagePlaceholder:s.impl.options.imagePlaceholder=k.imagePlaceholder,typeof k.cacheBust=="undefined"?s.impl.options.cacheBust=o.cacheBust:s.impl.options.cacheBust=k.cacheBust}function p(k,w){return u(k,w).then(e.makeImage).then(e.delay(100)).then(function(R){var C=S(k);return C.getContext("2d").drawImage(R,0,0),C});function S(R){var C=document.createElement("canvas");if(C.width=w.width||e.width(R),C.height=w.height||e.height(R),w.bgcolor){var N=C.getContext("2d");N.fillStyle=w.bgcolor,N.fillRect(0,0,C.width,C.height)}return C}}function m(k,w,S){if(!S&&w&&!w(k))return Promise.resolve();return Promise.resolve(k).then(R).then(function(L){return C(k,L,w)}).then(function(L){return N(k,L)});function R(L){return L instanceof HTMLCanvasElement?e.makeImage(L.toDataURL()):L.cloneNode(!1)}function C(L,I,E){var A=L.childNodes;if(A.length===0)return Promise.resolve(I);return D(I,e.asArray(A),E).then(function(){return I});function D(B,M,U){var G=Promise.resolve();return M.forEach(function(q){G=G.then(function(){return m(q,U)}).then(function(tt){tt&&B.appendChild(tt)})}),G}}function N(L,I){if(!(I instanceof Element))return I;return Promise.resolve().then(E).then(A).then(D).then(B).then(function(){return I});function E(){M(window.getComputedStyle(L),I.style);function M(U,G){U.cssText?G.cssText=U.cssText:q(U,G);function q(tt,J){e.asArray(tt).forEach(function(Y){J.setProperty(Y,tt.getPropertyValue(Y),tt.getPropertyPriority(Y))})}}}function A(){[":before",":after"].forEach(function(U){M(U)});function M(U){var G=window.getComputedStyle(L,U),q=G.getPropertyValue("content");if(q===""||q==="none")return;var tt=e.uid();I.className=I.className+" "+tt;var J=document.createElement("style");J.appendChild(Y(tt,U,G)),I.appendChild(J);function Y(Q,K,nt){var z="."+Q+":"+K,Z=nt.cssText?at(nt):H(nt);return document.createTextNode(z+"{"+Z+"}");function at(ct){var ot=ct.getPropertyValue("content");return ct.cssText+" content: "+ot+";"}function H(ct){return e.asArray(ct).map(ot).join("; ")+";";function ot(dt){return dt+": "+ct.getPropertyValue(dt)+(ct.getPropertyPriority(dt)?" !important":"")}}}}}function D(){L instanceof HTMLTextAreaElement&&(I.innerHTML=L.value),L instanceof HTMLInputElement&&I.setAttribute("value",L.value)}function B(){I instanceof SVGElement&&(I.setAttribute("xmlns","http://www.w3.org/2000/svg"),I instanceof SVGRectElement&&["width","height"].forEach(function(M){var U=I.getAttribute(M);!U||I.style.setProperty(M,U)}))}}}function v(k){return i.resolveAll().then(function(w){var S=document.createElement("style");return k.appendChild(S),S.appendChild(document.createTextNode(w)),k})}function x(k){return a.inlineAll(k).then(function(){return k})}function g(k,w,S){return Promise.resolve(k).then(function(R){return R.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(R)}).then(e.escapeXhtml).then(function(R){return'<foreignObject x="0" y="0" width="100%" height="100%">'+R+"</foreignObject>"}).then(function(R){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+w+'" height="'+S+'">'+R+"</svg>"}).then(function(R){return"data:image/svg+xml;charset=utf-8,"+R})}function y(){return{escape:B,parseExtension:w,mimeType:S,dataAsUrl:D,isDataUrl:R,canvasToBlob:N,resolveUrl:L,getAndEncode:A,uid:I(),delay:M,asArray:U,escapeXhtml:G,makeImage:E,width:q,height:tt};function k(){var Y="application/font-woff",Q="image/jpeg";return{woff:Y,woff2:Y,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Q,jpeg:Q,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function w(Y){var Q=/\.([^\.\/]*?)$/g.exec(Y);return Q?Q[1]:""}function S(Y){var Q=w(Y).toLowerCase();return k()[Q]||""}function R(Y){return Y.search(/^(data:)/)!==-1}function C(Y){return new Promise(function(Q){for(var K=window.atob(Y.toDataURL().split(",")[1]),nt=K.length,z=new Uint8Array(nt),Z=0;Z<nt;Z++)z[Z]=K.charCodeAt(Z);Q(new Blob([z],{type:"image/png"}))})}function N(Y){return Y.toBlob?new Promise(function(Q){Y.toBlob(Q)}):C(Y)}function L(Y,Q){var K=document.implementation.createHTMLDocument(),nt=K.createElement("base");K.head.appendChild(nt);var z=K.createElement("a");return K.body.appendChild(z),nt.href=Q,z.href=Y,z.href}function I(){var Y=0;return function(){return"u"+Q()+Y++;function Q(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function E(Y){return new Promise(function(Q,K){var nt=new Image;nt.onload=function(){Q(nt)},nt.onerror=K,nt.src=Y})}function A(Y){var Q=3e4;return s.impl.options.cacheBust&&(Y+=(/\?/.test(Y)?"&":"?")+new Date().getTime()),new Promise(function(K){var nt=new XMLHttpRequest;nt.onreadystatechange=at,nt.ontimeout=H,nt.responseType="blob",nt.timeout=Q,nt.open("GET",Y,!0),nt.send();var z;if(s.impl.options.imagePlaceholder){var Z=s.impl.options.imagePlaceholder.split(/,/);Z&&Z[1]&&(z=Z[1])}function at(){if(nt.readyState===4){if(nt.status!==200){z?K(z):ct("cannot fetch resource: "+Y+", status: "+nt.status);return}var ot=new FileReader;ot.onloadend=function(){var dt=ot.result.split(/,/)[1];K(dt)},ot.readAsDataURL(nt.response)}}function H(){z?K(z):ct("timeout of "+Q+"ms occured while fetching resource: "+Y)}function ct(ot){console.error(ot),K("")}})}function D(Y,Q){return"data:"+Q+";base64,"+Y}function B(Y){return Y.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function M(Y){return function(Q){return new Promise(function(K){setTimeout(function(){K(Q)},Y)})}}function U(Y){for(var Q=[],K=Y.length,nt=0;nt<K;nt++)Q.push(Y[nt]);return Q}function G(Y){return Y.replace(/#/g,"%23").replace(/\n/g,"%0A")}function q(Y){var Q=J(Y,"border-left-width"),K=J(Y,"border-right-width");return Y.scrollWidth+Q+K}function tt(Y){var Q=J(Y,"border-top-width"),K=J(Y,"border-bottom-width");return Y.scrollHeight+Q+K}function J(Y,Q){var K=window.getComputedStyle(Y).getPropertyValue(Q);return parseFloat(K.replace("px",""))}}function T(){var k=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:C,shouldProcess:w,impl:{readUrls:S,inline:R}};function w(N){return N.search(k)!==-1}function S(N){for(var L=[],I;(I=k.exec(N))!==null;)L.push(I[1]);return L.filter(function(E){return!e.isDataUrl(E)})}function R(N,L,I,E){return Promise.resolve(L).then(function(D){return I?e.resolveUrl(D,I):D}).then(E||e.getAndEncode).then(function(D){return e.dataAsUrl(D,e.mimeType(L))}).then(function(D){return N.replace(A(L),"$1"+D+"$3")});function A(D){return new RegExp(`(url\\(['"]?)(`+e.escape(D)+`)(['"]?\\))`,"g")}}function C(N,L,I){if(E())return Promise.resolve(N);return Promise.resolve(N).then(S).then(function(A){var D=Promise.resolve(N);return A.forEach(function(B){D=D.then(function(M){return R(M,B,L,I)})}),D});function E(){return!w(N)}}}function b(){return{resolveAll:k,impl:{readAll:w}};function k(){return w().then(function(S){return Promise.all(S.map(function(R){return R.resolve()}))}).then(function(S){return S.join(`
`)})}function w(){return Promise.resolve(e.asArray(document.styleSheets)).then(R).then(S).then(function(N){return N.map(C)});function S(N){return N.filter(function(L){return L.type===CSSRule.FONT_FACE_RULE}).filter(function(L){return r.shouldProcess(L.style.getPropertyValue("src"))})}function R(N){var L=[];return N.forEach(function(I){try{e.asArray(I.cssRules||[]).forEach(L.push.bind(L))}catch(E){console.log("Error while reading CSS rules from "+I.href,E.toString())}}),L}function C(N){return{resolve:function(){var I=(N.parentStyleSheet||{}).href;return r.inlineAll(N.cssText,I)},src:function(){return N.style.getPropertyValue("src")}}}}}function O(){return{inlineAll:w,impl:{newImage:k}};function k(S){return{inline:R};function R(C){return e.isDataUrl(S.src)?Promise.resolve():Promise.resolve(S.src).then(C||e.getAndEncode).then(function(N){return e.dataAsUrl(N,e.mimeType(S.src))}).then(function(N){return new Promise(function(L,I){S.onload=L,S.onerror=I,S.src=N})})}}function w(S){if(!(S instanceof Element))return Promise.resolve(S);return R(S).then(function(){return S instanceof HTMLImageElement?k(S).inline():Promise.all(e.asArray(S.childNodes).map(function(C){return w(C)}))});function R(C){var N=C.style.getPropertyValue("background");return N?r.inlineAll(N).then(function(L){C.style.setProperty("background",L,C.style.getPropertyPriority("background"))}).then(function(){return C}):Promise.resolve(C)}}}})()})(hd);var dd=hd.exports,XE=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),pd="DONT_STYLE_ME_css_styles_verifier",$=function(t){XE(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.chartID=Math.floor((1+Math.random())*281474976710656).toString(16),i}return n.getHTMLElementSize=function(e){return{width:e.clientWidth,height:e.clientHeight}},n.getSVGElementSize=function(e,r){r===void 0&&(r={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}),e.attr||(e=V(e));var i={width:0,height:0},a=function(d){d&&Object.keys(i).forEach(function(p){if(d[p]){var m=d[p],v=parseFloat(m);m&&v>i[p]&&(""+m).indexOf("%")===-1&&(i[p]=v)}})},o={width:e.attr("width"),height:e.attr("height")},s,u,l,c;try{s=e.node().getBBox(),u={width:s.width,height:s.height}}catch{}try{l=e.node().getBoundingClientRect(),c={width:l.width,height:l.height}}catch{}var f={width:e.node().clientWidth,height:e.node().clientHeight};if(r){if(r.useAttrs&&(a(o),i.width>0&&i.height>0))return i;if(r.useClientDimensions&&(a(f),i.width>0&&i.height>0))return f;if(r.useBBox&&(a(u),i.width>0&&i.height>0))return u;if(r.useBoundingRect&&(a(c),i.width>0&&i.height>0))return c}try{var h={width:_.getProperty(e.node(),"width","baseVal","value"),height:_.getProperty(e.node(),"height","baseVal","value")};a(h)}catch{a(f),a(u),a(o)}return i},n.appendOrSelect=function(e,r){var i=e.select(""+r);if(i.empty()){var a=r.split("#"),o=void 0,s=void 0;return a.length===2?(o=a[0],a=a[1].split("."),s=a[0]):(a=r.split("."),o=a[0]),e.append(o).attr("id",s).attr("class",a.slice(1).join(" "))}return i},n.prototype.init=function(){this.styleHolderElement(),this.addMainContainer(),this.verifyCSSStylesBeingApplied(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()},n.prototype.getChartID=function(){return this.chartID},n.prototype.generateElementIDString=function(e){return"chart-"+this.chartID+"-"+e},n.prototype.addMainContainer=function(){var e=this.model.getOptions(),r=_.getProperty(e,"style","prefix"),i=V(this.getHolder()).append("div").classed(It.prefix+"--"+r+"--chart-wrapper",!0).style("height","100%").style("width","100%");i.append("g").attr("class",pd),this.mainContainer=i.node()},n.prototype.update=function(){this.styleHolderElement()},n.prototype.styleHolderElement=function(){var e=this.getHolder();V(this.getHolder()).classed(It.prefix+"--chart-holder",!0);var r=this.model.getOptions(),i=r.width,a=r.height;i!==this.width&&(e.style.width=i,this.width=i),a!==this.height&&(e.style.height=a,this.height=a)},n.prototype.getHolder=function(){return this.model.get("holder")},n.prototype.exportToJPG=function(){var e=this,r=this.getHolder(),i=V(r);i.classed("filled",!0),dd.toJpeg(this.getMainContainer(),{bgcolor:typeof window!="undefined"?window.getComputedStyle(r).getPropertyValue("background-color"):void 0,quality:1,filter:function(a){return!(a.classList&&a.classList.contains("bx--cc--toolbar"))}}).then(function(a){e.services.files.downloadImage(a,"myChart.jpg"),i.classed("filled",!1)})},n.prototype.exportToPNG=function(){var e=this,r=this.getHolder(),i=V(r);i.classed("filled",!0),dd.toPng(this.getMainContainer(),{bgcolor:typeof window!="undefined"?window.getComputedStyle(r).getPropertyValue("background-color"):void 0,quality:1,filter:function(a){return!(a.classList&&a.classList.contains("bx--cc--toolbar"))}}).then(function(a){e.services.files.downloadImage(a,"myChart.png"),i.classed("filled",!1)}).catch(function(a){console.error("oops, something went wrong!",a)})},n.prototype.toggleFullscreen=function(){var e=this.getHolder(),r=V(e),i=r.classed("fullscreen");i&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},n.prototype.handleFullscreenChange=function(){var e=this;document.addEventListener("fullscreenchange",function(){var r=V(e.getHolder()),i=r.classed("fullscreen");r.classed("fullscreen",!i)})},n.prototype.verifyCSSStylesBeingApplied=function(){var e=this;setTimeout(function(){var r=V(e.mainContainer).select("g."+pd).node(),i=getComputedStyle(r);(i.getPropertyValue("overflow")!=="hidden"||i.getPropertyValue("opacity")!=="0")&&console.error("Missing CSS styles for Carbon Charts. Please read the Carbon Charts getting started guide.")})},n.prototype.setSVGMaxHeight=function(){if(!this.model.getOptions().height){var e=n.getSVGElementSize(V(this.mainContainer),{useBBox:!0}).height,r=V(this.mainContainer).attr("class"),i=V(this.mainContainer).selectAll("."+r+" > svg"),a=0;i.nodes().forEach(function(o){a+=Number(n.getSVGElementSize(V(o),{useBBox:!0}).height)}),a<=e?V(this.mainContainer).attr("height",a):V(this.mainContainer).attr("height","100%")}},n.prototype.getMainContainer=function(){return this.mainContainer},n.prototype.addHolderListeners=function(){var e=this,r=this.getHolder();!r||V(r).on("mouseover",function(){e.services.events.dispatchEvent(P.Chart.MOUSEOVER)}).on("mouseout",function(){e.services.events.dispatchEvent(P.Chart.MOUSEOUT)})},n.prototype.addResizeListener=function(){var e=this,r=this.getHolder();if(!!r){var i=r.clientWidth,a=r.clientHeight,o=_.debounce(function(u,l){!r||(Math.abs(i-r.clientWidth)>1||Math.abs(a-r.clientHeight)>1)&&(i=r.clientWidth,a=r.clientHeight,e.services.events.dispatchEvent(P.Chart.RESIZE))},12.5),s=new YE(o);s.observe(r)}},n}(Pe),ZE=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),KE=function(t){ZE(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.init=function(){this.documentFragment=document.createDocumentFragment()},n.prototype.addEventListener=function(e,r){this.documentFragment.addEventListener(e,r)},n.prototype.removeEventListener=function(e,r){this.documentFragment.removeEventListener(e,r)},n.prototype.dispatchEvent=function(e,r){var i;r?i=new CustomEvent(e,{detail:r}):(i=document.createEvent("Event"),i.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(i)},n}(Pe),QE=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JE=function(t){QE(n,t);function n(e,r){return t.call(this,e,r)||this}return n.prototype.downloadCSV=function(e,r,i){var a=document.createElement("a");if(i="text/csv;encoding:utf-8",navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),r);else if(URL&&"download"in a){var o=URL.createObjectURL(new Blob([e],{type:i}));a.href=o,a.setAttribute("download",r),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}else location.href="data:application/octet-stream,"+encodeURIComponent(e)},n.prototype.downloadImage=function(e,r){var i=document.createElement("a");i.download=r,i.href=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)},n}(Pe),tM=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),eM=function(t){tM(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.pendingTransitions={},e}return n.prototype.init=function(){var e=this;this.services.events.addEventListener(P.Model.UPDATE,function(){e.pendingTransitions={}})},n.prototype.setupTransition=function(e){var r=this,i=e.transition,a=e.name,o=e.animate;return this.pendingTransitions[i._id]=i,i.on("end interrupt cancel",function(){delete r.pendingTransitions[i._id]}),this.model.getOptions().animations===!1||o===!1?i.duration(0):i.duration(_.getProperty(wo,a,"duration")||wo.default.duration)},n.prototype.getPendingTransitions=function(){return this.pendingTransitions},n}(Pe),nM=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),au=function(t){nM(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.appendOrUpdateLinearGradient=function(e){var r=e.svg.select("defs linearGradient#"+e.id);r.empty()&&(r=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),r.selectAll("stop").remove(),r.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",function(i){return i.offset}).style("stop-color",function(i){return i.color}).style("stop-opacity",function(i){return i.opacity})},n.getOffsetRatio=function(e){var r=(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%";return r},n.getStops=function(e,r){var i=e[0]<0&&e[1]>0,a=[{offset:"0%",color:r,opacity:"0.6"},{offset:"80%",color:r,opacity:"0"}];return i&&(a=[{offset:"0%",color:r,opacity:"0.6"},{offset:n.getOffsetRatio(e),color:r,opacity:"0"},{offset:"100%",color:r,opacity:"0.6"}]),a},n}(Pe);function gt(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&n==="[object Date]"?new Date(t.getTime()):typeof t=="number"||n==="[object Number]"?new Date(t):((typeof t=="string"||n==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Ot(t){if(t===null||t===!0||t===!1)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function vd(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=Ot(n);return e.setDate(e.getDate()+r),e}function Qi(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t).getTime(),r=Ot(n);return new Date(e+r)}var rM=36e5;function gd(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return Qi(t,e*rM)}var md=6e4;function ou(t){var n=new Date(t.getTime()),e=Math.ceil(n.getTimezoneOffset());n.setSeconds(0,0);var r=n.getTime()%md;return e*md+r}function yd(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=gt(t);return n.setHours(0,0,0,0),n}var iM=864e5;function aM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=yd(t),r=yd(n),i=e.getTime()-ou(e),a=r.getTime()-ou(r);return Math.round((i-a)/iM)}var oM=6e4;function su(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return Qi(t,e*oM)}function sM(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=gt(t),e=n.getFullYear(),r=n.getMonth(),i=new Date(0);return i.setFullYear(e,r+1,0),i.setHours(0,0,0,0),i.getDate()}function uu(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=Ot(n),i=e.getMonth()+r,a=new Date(0);a.setFullYear(e.getFullYear(),i,1),a.setHours(0,0,0,0);var o=sM(a);return e.setMonth(i,Math.min(o,e.getDate())),e}function lu(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return Qi(t,e*1e3)}function _d(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return uu(t,e*12)}function Vn(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=gt(n),i=e.getTime()-r.getTime();return i<0?-1:i>0?1:i}function uM(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=gt(t);return!isNaN(n)}function lM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=gt(n),i=e.getFullYear()-r.getFullYear(),a=e.getMonth()-r.getMonth();return i*12+a}function cM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=gt(n);return e.getFullYear()-r.getFullYear()}function fM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=gt(n),i=Vn(e,r),a=Math.abs(aM(e,r));e.setDate(e.getDate()-i*a);var o=Vn(e,r)===-i,s=i*(a-o);return s===0?0:s}function cu(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=gt(n);return e.getTime()-r.getTime()}var hM=36e5;function dM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=cu(t,n)/hM;return e>0?Math.floor(e):Math.ceil(e)}var pM=6e4;function xd(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=cu(t,n)/pM;return e>0?Math.floor(e):Math.ceil(e)}function vM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=gt(n),i=Vn(e,r),a=Math.abs(lM(e,r));e.setMonth(e.getMonth()-i*a);var o=Vn(e,r)===-i,s=i*(a-o);return s===0?0:s}function bd(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=cu(t,n)/1e3;return e>0?Math.floor(e):Math.ceil(e)}function gM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=gt(t),r=gt(n),i=Vn(e,r),a=Math.abs(cM(e,r));e.setFullYear(e.getFullYear()-i*a);var o=Vn(e,r)===-i,s=i*(a-o);return s===0?0:s}var Ji={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function mM(t,n,e){e=e||{};var r;return typeof Ji[t]=="string"?r=Ji[t]:n===1?r=Ji[t].one:r=Ji[t].other.replace("{{count}}",n),e.addSuffix?e.comparison>0?"in "+r:r+" ago":r}function fu(t){return function(n){var e=n||{},r=e.width?String(e.width):t.defaultWidth,i=t.formats[r]||t.formats[t.defaultWidth];return i}}var yM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},_M={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bM={date:fu({formats:yM,defaultWidth:"full"}),time:fu({formats:_M,defaultWidth:"full"}),dateTime:fu({formats:xM,defaultWidth:"full"})},OM=bM,TM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function wM(t,n,e,r){return TM[t]}function Br(t){return function(n,e){var r=e||{},i=r.context?String(r.context):"standalone",a;if(i==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,s=r.width?String(r.width):o;a=t.formattingValues[s]||t.formattingValues[o]}else{var u=t.defaultWidth,l=r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[u]}var c=t.argumentCallback?t.argumentCallback(n):n;return a[c]}}var SM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},MM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},CM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},PM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};function DM(t,n){var e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}var LM={ordinalNumber:DM,era:Br({values:SM,defaultWidth:"wide"}),quarter:Br({values:EM,defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Br({values:MM,defaultWidth:"wide"}),day:Br({values:CM,defaultWidth:"wide"}),dayPeriod:Br({values:AM,defaultWidth:"wide",formattingValues:PM,defaultFormattingWidth:"wide"})},RM=LM;function kM(t){return function(n,e){var r=String(n),i=e||{},a=r.match(t.matchPattern);if(!a)return null;var o=a[0],s=r.match(t.parsePattern);if(!s)return null;var u=t.valueCallback?t.valueCallback(s[0]):s[0];return u=i.valueCallback?i.valueCallback(u):u,{value:u,rest:r.slice(o.length)}}}function Ur(t){return function(n,e){var r=String(n),i=e||{},a=i.width,o=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],s=r.match(o);if(!s)return null;var u=s[0],l=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c;return Object.prototype.toString.call(l)==="[object Array]"?c=NM(l,function(f){return f.test(r)}):c=IM(l,function(f){return f.test(r)}),c=t.valueCallback?t.valueCallback(c):c,c=i.valueCallback?i.valueCallback(c):c,{value:c,rest:r.slice(u.length)}}}function IM(t,n){for(var e in t)if(t.hasOwnProperty(e)&&n(t[e]))return e}function NM(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return e}var BM=/^(\d+)(th|st|nd|rd)?/i,UM=/\d+/i,VM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$M={any:[/^b/i,/^(a|c)/i]},GM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FM={any:[/1/i,/2/i,/3/i,/4/i]},HM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},jM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},YM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},XM={ordinalNumber:kM({matchPattern:BM,parsePattern:UM,valueCallback:function(t){return parseInt(t,10)}}),era:Ur({matchPatterns:VM,defaultMatchWidth:"wide",parsePatterns:$M,defaultParseWidth:"any"}),quarter:Ur({matchPatterns:GM,defaultMatchWidth:"wide",parsePatterns:FM,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ur({matchPatterns:HM,defaultMatchWidth:"wide",parsePatterns:zM,defaultParseWidth:"any"}),day:Ur({matchPatterns:WM,defaultMatchWidth:"wide",parsePatterns:jM,defaultParseWidth:"any"}),dayPeriod:Ur({matchPatterns:qM,defaultMatchWidth:"any",parsePatterns:YM,defaultParseWidth:"any"})},ZM=XM,KM={code:"en-US",formatDistance:mM,formatLong:OM,formatRelative:wM,localize:RM,match:ZM,options:{weekStartsOn:0,firstWeekContainsDate:1}},QM=KM;function JM(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return Qi(t,-e)}function vt(t,n){for(var e=t<0?"-":"",r=Math.abs(t).toString();r.length<n;)r="0"+r;return e+r}var tC={y:function(t,n){var e=t.getUTCFullYear(),r=e>0?e:1-e;return vt(n==="yy"?r%100:r,n.length)},M:function(t,n){var e=t.getUTCMonth();return n==="M"?String(e+1):vt(e+1,2)},d:function(t,n){return vt(t.getUTCDate(),n.length)},a:function(t,n){var e=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":case"aaa":return e.toUpperCase();case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h:function(t,n){return vt(t.getUTCHours()%12||12,n.length)},H:function(t,n){return vt(t.getUTCHours(),n.length)},m:function(t,n){return vt(t.getUTCMinutes(),n.length)},s:function(t,n){return vt(t.getUTCSeconds(),n.length)},S:function(t,n){var e=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,e-3));return vt(i,n.length)}},$e=tC,eC=864e5;function nC(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=gt(t),e=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=n.getTime(),i=e-r;return Math.floor(i/eC)+1}function ta(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=1,e=gt(t),r=e.getUTCDay(),i=(r<n?7:0)+r-n;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}function Od(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=gt(t),e=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(e+1,0,4),r.setUTCHours(0,0,0,0);var i=ta(r),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var o=ta(a);return n.getTime()>=i.getTime()?e+1:n.getTime()>=o.getTime()?e:e-1}function rC(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Od(t),e=new Date(0);e.setUTCFullYear(n,0,4),e.setUTCHours(0,0,0,0);var r=ta(e);return r}var iC=6048e5;function aC(t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=gt(t),e=ta(n).getTime()-rC(n).getTime();return Math.round(e/iC)+1}function ea(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=n||{},r=e.locale,i=r&&r.options&&r.options.weekStartsOn,a=i==null?0:Ot(i),o=e.weekStartsOn==null?a:Ot(e.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=gt(t),u=s.getUTCDay(),l=(u<o?7:0)+u-o;return s.setUTCDate(s.getUTCDate()-l),s.setUTCHours(0,0,0,0),s}function Td(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=gt(t,n),r=e.getUTCFullYear(),i=n||{},a=i.locale,o=a&&a.options&&a.options.firstWeekContainsDate,s=o==null?1:Ot(o),u=i.firstWeekContainsDate==null?s:Ot(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=new Date(0);l.setUTCFullYear(r+1,0,u),l.setUTCHours(0,0,0,0);var c=ea(l,n),f=new Date(0);f.setUTCFullYear(r,0,u),f.setUTCHours(0,0,0,0);var h=ea(f,n);return e.getTime()>=c.getTime()?r+1:e.getTime()>=h.getTime()?r:r-1}function oC(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=n||{},r=e.locale,i=r&&r.options&&r.options.firstWeekContainsDate,a=i==null?1:Ot(i),o=e.firstWeekContainsDate==null?a:Ot(e.firstWeekContainsDate),s=Td(t,n),u=new Date(0);u.setUTCFullYear(s,0,o),u.setUTCHours(0,0,0,0);var l=ea(u,n);return l}var sC=6048e5;function uC(t,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var e=gt(t),r=ea(e,n).getTime()-oC(e,n).getTime();return Math.round(r/sC)+1}var $n={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lC={G:function(t,n,e){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(t,n,e){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return $e.y(t,n)},Y:function(t,n,e,r){var i=Td(t,r),a=i>0?i:1-i;if(n==="YY"){var o=a%100;return vt(o,2)}return n==="Yo"?e.ordinalNumber(a,{unit:"year"}):vt(a,n.length)},R:function(t,n){var e=Od(t);return vt(e,n.length)},u:function(t,n){var e=t.getUTCFullYear();return vt(e,n.length)},Q:function(t,n,e){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return vt(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,e){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return vt(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,e){var r=t.getUTCMonth();switch(n){case"M":case"MM":return $e.M(t,n);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,e){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return vt(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,e,r){var i=uC(t,r);return n==="wo"?e.ordinalNumber(i,{unit:"week"}):vt(i,n.length)},I:function(t,n,e){var r=aC(t);return n==="Io"?e.ordinalNumber(r,{unit:"week"}):vt(r,n.length)},d:function(t,n,e){return n==="do"?e.ordinalNumber(t.getUTCDate(),{unit:"date"}):$e.d(t,n)},D:function(t,n,e){var r=nC(t);return n==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):vt(r,n.length)},E:function(t,n,e){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,e,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return vt(a,2);case"eo":return e.ordinalNumber(a,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});case"eeee":default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,e,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return vt(a,n.length);case"co":return e.ordinalNumber(a,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});case"cccc":default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,e){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return vt(i,n.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,e){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,e){var r=t.getUTCHours(),i;switch(r===12?i=$n.noon:r===0?i=$n.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,e){var r=t.getUTCHours(),i;switch(r>=17?i=$n.evening:r>=12?i=$n.afternoon:r>=4?i=$n.morning:i=$n.night,n){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,e){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return $e.h(t,n)},H:function(t,n,e){return n==="Ho"?e.ordinalNumber(t.getUTCHours(),{unit:"hour"}):$e.H(t,n)},K:function(t,n,e){var r=t.getUTCHours()%12;return n==="Ko"?e.ordinalNumber(r,{unit:"hour"}):vt(r,n.length)},k:function(t,n,e){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?e.ordinalNumber(r,{unit:"hour"}):vt(r,n.length)},m:function(t,n,e){return n==="mo"?e.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):$e.m(t,n)},s:function(t,n,e){return n==="so"?e.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):$e.s(t,n)},S:function(t,n){return $e.S(t,n)},X:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return Sd(a);case"XXXX":case"XX":return hn(a);case"XXXXX":case"XXX":default:return hn(a,":")}},x:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return Sd(a);case"xxxx":case"xx":return hn(a);case"xxxxx":case"xxx":default:return hn(a,":")}},O:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+wd(a,":");case"OOOO":default:return"GMT"+hn(a,":")}},z:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+wd(a,":");case"zzzz":default:return"GMT"+hn(a,":")}},t:function(t,n,e,r){var i=r._originalDate||t,a=Math.floor(i.getTime()/1e3);return vt(a,n.length)},T:function(t,n,e,r){var i=r._originalDate||t,a=i.getTime();return vt(a,n.length)}};function wd(t,n){var e=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=r%60;if(a===0)return e+String(i);var o=n||"";return e+String(i)+o+vt(a,2)}function Sd(t,n){if(t%60==0){var e=t>0?"-":"+";return e+vt(Math.abs(t)/60,2)}return hn(t,n)}function hn(t,n){var e=n||"",r=t>0?"-":"+",i=Math.abs(t),a=vt(Math.floor(i/60),2),o=vt(i%60,2);return r+a+e+o}var cC=lC;function Ed(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}}function Md(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}}function fC(t,n){var e=t.match(/(P+)(p+)?/),r=e[1],i=e[2];if(!i)return Ed(t,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",Ed(r,n)).replace("{{time}}",Md(i,n))}var hC={p:Md,P:fC},dC=hC,pC=["D","DD"],vC=["YY","YYYY"];function gC(t){return pC.indexOf(t)!==-1}function mC(t){return vC.indexOf(t)!==-1}function Cd(t){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if(t==="YY")throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if(t==="D")throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if(t==="DD")throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}var yC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_C=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xC=/^'([^]*?)'?$/,bC=/''/g,OC=/[a-zA-Z]/;function Vr(t,n,e){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(n),i=e||{},a=i.locale||QM,o=a.options&&a.options.firstWeekContainsDate,s=o==null?1:Ot(o),u=i.firstWeekContainsDate==null?s:Ot(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var l=a.options&&a.options.weekStartsOn,c=l==null?0:Ot(l),f=i.weekStartsOn==null?c:Ot(i.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var h=gt(t);if(!uM(h))throw new RangeError("Invalid time value");var d=ou(h),p=JM(h,d),m={firstWeekContainsDate:u,weekStartsOn:f,locale:a,_originalDate:h},v=r.match(_C).map(function(x){var g=x[0];if(g==="p"||g==="P"){var y=dC[g];return y(x,a.formatLong,m)}return x}).join("").match(yC).map(function(x){if(x==="''")return"'";var g=x[0];if(g==="'")return TC(x);var y=cC[g];if(y)return!i.useAdditionalWeekYearTokens&&mC(x)&&Cd(x),!i.useAdditionalDayOfYearTokens&&gC(x)&&Cd(x),y(p,x,a.localize,m);if(g.match(OC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return x}).join("");return v}function TC(t){return t.match(xC)[1].replace(bC,"'")}function wC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return vd(t,-e)}function SC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return gd(t,-e)}function Ad(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return su(t,-e)}function EC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return uu(t,-e)}function Pd(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return lu(t,-e)}function MC(t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var e=Ot(n);return _d(t,-e)}var CC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),AC=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},PC=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},DC=function(t){CC(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.scaleTypes={top:null,right:null,bottom:null,left:null},e.scales={top:null,right:null,bottom:null,left:null},e}return n.prototype.getDomainAxisPosition=function(e){var r=(e===void 0?{}:e).datum,i=r===void 0?null:r,a;if(this.dualAxes&&i){var o=this.model.getOptions(),s=o.data.groupMapsTo,u=_.getProperty(o,"axes",this.secondaryDomainAxisPosition),l=i[s];if(((a=u)===null||a===void 0?void 0:a.correspondingDatasets)&&u.correspondingDatasets.includes(l))return this.secondaryDomainAxisPosition}return this.domainAxisPosition},n.prototype.getRangeAxisPosition=function(e){var r=e===void 0?{}:e,i=r.datum,a=i===void 0?null:i,o=r.groups,s=o===void 0?null:o,u;if(this.dualAxes){var l=this.model.getOptions(),c=l.data.groupMapsTo,f=_.getProperty(l,"axes",this.secondaryRangeAxisPosition),h=void 0;if(a!==null?h=a[c]:s&&s.length>0&&(h=s[0]),((u=f)===null||u===void 0?void 0:u.correspondingDatasets)&&f.correspondingDatasets.includes(h))return this.secondaryRangeAxisPosition}return this.rangeAxisPosition},n.prototype.getAxisOptions=function(e){return _.getProperty(this.model.getOptions(),"axes",e)},n.prototype.getDomainAxisOptions=function(){var e=this.getDomainAxisPosition();return this.getAxisOptions(e)},n.prototype.getRangeAxisOptions=function(){var e=this.getRangeAxisPosition();return this.getAxisOptions(e)},n.prototype.getScaleLabel=function(e){var r=this.getAxisOptions(e),i=r.title;return i||(e===j.BOTTOM||e===j.TOP?"x-value":"y-value")},n.prototype.getDomainLabel=function(){return this.getScaleLabel(this.getDomainAxisPosition())},n.prototype.getRangeLabel=function(){return this.getScaleLabel(this.getRangeAxisPosition())},n.prototype.update=function(e){var r=this;this.determineAxisDuality(),this.findDomainAndRangeAxes(),this.determineOrientation();var i=Object.keys(j).map(function(a){return j[a]});i.forEach(function(a){r.scales[a]=r.createScale(a)})},n.prototype.findDomainAndRangeAxes=function(){var e=this.findVerticalAxesPositions(),r=this.findHorizontalAxesPositions(),i=this.findDomainAndRangeAxesPositions(e,r);this.domainAxisPosition=i.primaryDomainAxisPosition,this.rangeAxisPosition=i.primaryRangeAxisPosition,this.isDualAxes()&&(this.secondaryDomainAxisPosition=i.secondaryDomainAxisPosition,this.secondaryRangeAxisPosition=i.secondaryRangeAxisPosition)},n.prototype.determineOrientation=function(){(this.rangeAxisPosition===j.LEFT||this.rangeAxisPosition===j.RIGHT)&&(this.domainAxisPosition===j.BOTTOM||this.domainAxisPosition===j.TOP)?this.orientation=At.VERTICAL:this.orientation=At.HORIZONTAL},n.prototype.isDualAxes=function(){return this.dualAxes},n.prototype.determineAxisDuality=function(){var e,r,i,a,o=this.model.getOptions(),s=_.getProperty(o,"axes");(((e=s[j.LEFT])===null||e===void 0?void 0:e.correspondingDatasets)&&s[j.RIGHT]||((r=s[j.RIGHT])===null||r===void 0?void 0:r.correspondingDatasets)&&s[j.LEFT]||((i=s[j.TOP])===null||i===void 0?void 0:i.correspondingDatasets)&&s[j.BOTTOM]||((a=s[j.BOTTOM])===null||a===void 0?void 0:a.correspondingDatasets)&&s[j.TOP])&&(this.dualAxes=!0)},n.prototype.getOrientation=function(){return this.orientation},n.prototype.getScaleByPosition=function(e){return this.scales[e]},n.prototype.getScaleTypeByPosition=function(e){return this.scaleTypes[e]},n.prototype.getDomainAxisScaleType=function(){var e=this.getDomainAxisPosition();return this.getScaleTypeByPosition(e)},n.prototype.getRangeAxisScaleType=function(){var e=this.getRangeAxisPosition();return this.getScaleTypeByPosition(e)},n.prototype.getDomainScale=function(){return this.scales[this.domainAxisPosition]},n.prototype.getRangeScale=function(){return this.scales[this.rangeAxisPosition]},n.prototype.getMainXAxisPosition=function(){var e=[j.BOTTOM,j.TOP];return[this.domainAxisPosition,this.rangeAxisPosition].find(function(r){return e.indexOf(r)>-1})},n.prototype.getMainYAxisPosition=function(){var e=[j.LEFT,j.RIGHT];return[this.domainAxisPosition,this.rangeAxisPosition].find(function(r){return e.indexOf(r)>-1})},n.prototype.getMainXScale=function(){return this.scales[this.getMainXAxisPosition()]},n.prototype.getMainYScale=function(){return this.scales[this.getMainYAxisPosition()]},n.prototype.getValueFromScale=function(e,r,i,a,o){var s=this.model.getOptions(),u=_.getProperty(s,"axes"),l=u[i],c=l.mapsTo,f=_.getProperty(a,c)!==null?a[c]:a,h;switch(r){case et.LABELS:h=e(f)+e.step()/2;break;case et.TIME:h=e(new Date(f));break;default:h=e(f)}return h},n.prototype.getBoundedScaledValues=function(e,r){var i=this.model.getOptions().bounds,a=this.scales[this.rangeAxisPosition],o=this.model.getOptions(),s=_.getProperty(o,"axes"),u=s[this.rangeAxisPosition],l=u.mapsTo,c=e[l]!==void 0?e[l]:e,f=[a(_.getProperty(e,i.upperBoundMapsTo)!==null?e[i.upperBoundMapsTo]:c),a(_.getProperty(e,i.lowerBoundMapsTo)!==null?e[i.lowerBoundMapsTo]:c)];return f},n.prototype.getValueThroughAxisPosition=function(e,r,i){var a=this.scaleTypes[e],o=this.scales[e];return this.getValueFromScale(o,a,e,r,i)},n.prototype.getDomainValue=function(e,r){var i=this.getDomainAxisPosition({datum:e});return this.getValueThroughAxisPosition(i,e,r)},n.prototype.getRangeValue=function(e,r){var i=this.getRangeAxisPosition({datum:e});return this.getValueThroughAxisPosition(i,e,r)},n.prototype.getMainXScaleType=function(){return this.getScaleTypeByPosition(this.getMainXAxisPosition())},n.prototype.getMainYScaleType=function(){return this.getScaleTypeByPosition(this.getMainYAxisPosition())},n.prototype.getDomainIdentifier=function(e){var r=this.model.getOptions();return _.getProperty(r,"axes",this.getDomainAxisPosition({datum:e}),"mapsTo")},n.prototype.getRangeIdentifier=function(e){var r=this.model.getOptions();return _.getProperty(r,"axes",this.getRangeAxisPosition({datum:e}),"mapsTo")},n.prototype.extendsDomain=function(e,r){var i=this.model.getOptions(),a=_.getProperty(i,"axes",e);if(a.scaleType===et.TIME){var o=_.getProperty(i,"timeScale","addSpaceOnEdges");return LC(r,o)}else return RC(r,Ye.paddingRatio,a.scaleType)},n.prototype.findVerticalAxesPositions=function(){var e=this.model.getOptions(),r=_.getProperty(e,"axes"),i=this.isDualAxes();return _.getProperty(r,j.LEFT)===null&&_.getProperty(r,j.RIGHT)!==null||_.getProperty(r,j.RIGHT,"main")===!0||i&&_.getProperty(r,j.LEFT,"correspondingDatasets")?{primary:j.RIGHT,secondary:j.LEFT}:{primary:j.LEFT,secondary:j.RIGHT}},n.prototype.findHorizontalAxesPositions=function(){var e=this.model.getOptions(),r=_.getProperty(e,"axes"),i=this.isDualAxes();return _.getProperty(r,j.BOTTOM)===null&&_.getProperty(r,j.TOP)!==null||_.getProperty(r,j.TOP,"main")===!0||i&&_.getProperty(r,j.BOTTOM,"correspondingDatasets")?{primary:j.TOP,secondary:j.BOTTOM}:{primary:j.BOTTOM,secondary:j.TOP}},n.prototype.findDomainAndRangeAxesPositions=function(e,r){var i=this.model.getOptions(),a=_.getProperty(i,"axes",e.primary),o=_.getProperty(i,"axes",r.primary),s=a.scaleType||et.LINEAR,u=o.scaleType||et.LINEAR,l={primaryDomainAxisPosition:null,secondaryDomainAxisPosition:null,primaryRangeAxisPosition:null,secondaryRangeAxisPosition:null};return l.primaryDomainAxisPosition=r.primary,l.primaryRangeAxisPosition=e.primary,l.secondaryDomainAxisPosition=r.secondary,l.secondaryRangeAxisPosition=e.secondary,(!(u===et.LABELS||u===et.TIME)&&s===et.LABELS||s===et.TIME)&&(l.primaryDomainAxisPosition=e.primary,l.primaryRangeAxisPosition=r.primary,l.secondaryDomainAxisPosition=e.secondary,l.secondaryRangeAxisPosition=r.secondary),l},n.prototype.getScaleDomain=function(e){var r=this.model.getOptions(),i=_.getProperty(r,"axes",e),a=_.getProperty(r,"bounds"),o=i.includeZero,s=_.getProperty(i,"scaleType")||et.LINEAR;if(this.model.isDataEmpty())return[];if(i.binned){var u=this.model.getBinConfigurations().bins;return[0,an(u,function(S){return S.length})]}else if(i.limitDomainToBins){var u=this.model.getBinConfigurations().bins,l=this.model.getStackKeys({bins:u});return[l[0].split("-")[0],l[l.length-1].split("-")[1]]}var c=this.model.getDisplayData(),f=i.extendLinearDomainBy,h=i.mapsTo,d=i.percentage,p=i.thresholds,m=Ye.ratio,v=m.reference,x=m.compareTo;if(i.domain)return s===et.LABELS?i.domain:(s===et.TIME&&(i.domain=i.domain.map(function(S){return S.getTime===void 0?new Date(S):S})),this.extendsDomain(e,i.domain));if(d)return[0,100];if(i&&s===et.LABELS)return _.removeArrayDuplicates(c.map(function(S){return S[h]}));var g,y,T=this.model.getDataGroupNames();if(s===et.LABELS_RATIO)return c.map(function(S){return S[v]+"/"+S[x]});if(s===et.TIME)y=c.map(function(S){return+new Date(S[h])});else if(a&&r.axes)y=[],c.forEach(function(S){y.push(S[h]),S[a.upperBoundMapsTo]&&y.push(S[a.upperBoundMapsTo]),S[a.lowerBoundMapsTo]&&y.push(S[a.lowerBoundMapsTo])});else if(i.stacked===!0&&T&&e===this.getRangeAxisPosition()){var b=r.data.groupMapsTo,O=this.model.getDataValuesGroupedByKeys({groups:T}),k=c.filter(function(S){return!T.includes(S[b])}),w=[];O.forEach(function(S){S.sharedStackKey;var R=AC(S,["sharedStackKey"]),C=0,N=0;Object.values(R).forEach(function(L){isNaN(L)||(L<0?N+=L:C+=L)}),w.push([N,C])}),y=PC(_.flatten(w),k.map(function(S){return S[h]}))}else y=[],c.forEach(function(S){var R=S[h];Array.isArray(R)&&R.length===2?(y.push(R[0]),y.push(R[1])):(f&&y.push(Math.max(S[h],S[f])),y.push(R))});return s!==et.TIME&&s!==et.LOG&&o&&y.push(0),p&&p.length>0&&p.forEach(function(S){var R=_.getProperty(S,"value");R!==null&&y.push(R)}),g=Se(y),g=this.extendsDomain(e,g),g},n.prototype.createScale=function(e){var r=this.model.getOptions(),i=_.getProperty(r,"axes",e);if(!i)return null;var a=_.getProperty(i,"scaleType")||et.LINEAR;this.scaleTypes[e]=a;var o;return a===et.TIME?o=Uh():a===et.LOG?o=dh().base(i.base||10):a===et.LABELS||a===et.LABELS_RATIO?o=Ai():o=Be(),o.domain(this.getScaleDomain(e)),o},n.prototype.getHighestDomainThreshold=function(){var e=_.getProperty(this.model.getOptions(),"axes"),r=this.getDomainAxisPosition(),i=e[r].thresholds;if(!i)return null;var a=this.getDomainScale(),o=i.sort(function(u,l){return l.value-u.value})[0],s=this.getScaleTypeByPosition(r);return s===et.TIME&&(typeof o.value=="string"||o.value.getTime===void 0)&&(o.value=new Date(o.value)),{threshold:o,scaleValue:a(o.value)}},n.prototype.getHighestRangeThreshold=function(){var e=_.getProperty(this.model.getOptions(),"axes"),r=this.getRangeAxisPosition(),i=e[r].thresholds;if(!i)return null;var a=this.getRangeScale(),o=i.sort(function(s,u){return u.value-s.value})[0];return{threshold:o,scaleValue:a(o.value)}},n}(Pe);function LC(t,n){var e=new Date(t[0]),r=new Date(t[1]);return gM(r,e)>1?[MC(e,n),_d(r,n)]:vM(r,e)>1?[EC(e,n),uu(r,n)]:fM(r,e)>1?[wC(e,n),vd(r,n)]:dM(r,e)>1?[SC(e,n),gd(r,n)]:xd(r,e)>30?[Ad(e,n*30),su(r,n*30)]:xd(r,e)>1?[Ad(e,n),su(r,n)]:bd(r,e)>15?[Pd(e,n*15),lu(r,n*15)]:bd(r,e)>1?[Pd(e,n),lu(r,n)]:[e,r]}function RC(t,n,e){var r=t[0],i=t[1],a=i-r,o=a*n,s=i<=0&&i+o>0?0:i+o,u=r>=0&&r-o<0?0:r-o;if(e===et.LOG&&u<=0){if(r<=0)throw Error("Data must have values greater than 0 if log scale type is used.");u=r}return[u,s]}var kC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),IC=function(t){kC(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.curveTypes={curveLinear:Gi,curveLinearClosed:Kh,curveBasis:dE,curveBasisClosed:pE,curveBasisOpen:vE,curveBundle:gE,curveCardinal:mE,curveCardinalClosed:yE,curveCardinalOpen:_E,curveCatmullRom:xE,curveCatmullRomClosed:bE,curveCatmullRomOpen:OE,curveMonotoneX:TE,curveMonotoneY:wE,curveNatural:SE,curveStep:EE,curveStepAfter:CE,curveStepBefore:ME},e}return n.prototype.getD3Curve=function(){var e="curveLinear",r=this.model.getOptions().curve;if(r&&(typeof r=="string"?e=r:e=r.name),this.curveTypes[e]){var i=this.curveTypes[e];return r&&Object.keys(r).forEach(function(a){i[a]&&(i=i[a](r[a]))}),i}return console.warn("The curve type '"+e+"' is invalid, using 'curveLinear' instead"),this.curveTypes.curveLinear},n}(Pe),NC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),BC=function(t){NC(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.isZoomBarEnabled=function(){if(!this.services.cartesianScales||!_.getProperty(this.model.getOptions(),"zoomBar","top","enabled"))return!1;this.services.cartesianScales.findDomainAndRangeAxes();var e=this.services.cartesianScales.getMainXAxisPosition(),r=_.getProperty(this.model.getOptions(),"axes",e,"scaleType");return e===j.BOTTOM&&r===et.TIME},n.prototype.getZoomBarData=function(){var e=this.model.getZoomBarData();return e&&e.length>1?e:this.model.getDisplayData()},n.prototype.getDefaultZoomBarDomain=function(e){var r=e||this.services.zoom.getZoomBarData(),i=this.services.cartesianScales,a=i.getMainXAxisPosition(),o=i.getDomainIdentifier();return i.extendsDomain(a,Se(r,function(s){return s[o]}))},n.prototype.handleDomainChange=function(e,r){r===void 0&&(r={dispatchEvent:!0}),this.model.set({zoomDomain:e},{animate:!1}),r.dispatchEvent&&this.services.events.dispatchEvent(P.ZoomDomain.CHANGE,{newDomain:e})},n.prototype.getZoomRatio=function(){return _.getProperty(this.model.getOptions(),"zoomBar","zoomRatio")},n.prototype.filterDataForRangeAxis=function(e,r){var i=this.model.get("zoomDomain"),a=Object.assign({stacked:!1},r),o=_.getProperty(this.model.getOptions(),"zoomBar","updateRangeAxis");if(this.isZoomBarEnabled()&&o&&i){var s=a.stacked?"sharedStackKey":this.services.cartesianScales.getDomainIdentifier(),u=e.filter(function(l){return new Date(l[s])>=i[0]&&new Date(l[s])<=i[1]});if(u.length>0)return u}return e},n.prototype.zoomIn=function(e){e===void 0&&(e=this.getZoomRatio());var r=this.model.get("zoomDomain"),i=Wt.handleWidth,a=this.services.cartesianScales.getMainXScale().copy();a.domain(this.getDefaultZoomBarDomain());var o=a(r[0]),s=a(r[1]);if(!(s-o<i+1)){var u=a.range(),l=s-o,c=Math.min((u[1]-u[0])/2*(e/2),l/2),f=o+c,h=s-c;f>=h&&(f=o+l/2-i/2,h=s-l/2+i/2);var d=[a.invert(f),a.invert(h)];(r[0].valueOf()!==d[0].valueOf()||r[1].valueOf()!==d[1].valueOf())&&this.handleDomainChange(d)}},n.prototype.zoomOut=function(e){e===void 0&&(e=this.getZoomRatio());var r=this.model.get("zoomDomain"),i=this.services.cartesianScales.getMainXScale().copy();i.domain(this.getDefaultZoomBarDomain());var a=i(r[0]),o=i(r[1]),s=i.range(),u=(s[1]-s[0])/2*(e/2),l=Math.max(a-u,s[0]),c=Math.min(o+u,s[1]),f=[i.invert(l),i.invert(c)];(r[0].valueOf()!==f[0].valueOf()||r[1].valueOf()!==f[1].valueOf())&&this.handleDomainChange(f)},n.prototype.resetZoomDomain=function(){var e=this.model.get("zoomDomain"),r=this.getDefaultZoomBarDomain();(e[0].valueOf()!==r[0].valueOf()||e[1].valueOf()!==r[1].valueOf())&&this.handleDomainChange(r)},n.prototype.isMinZoomDomain=function(){var e=this.model.get("zoomDomain"),r=this.getDefaultZoomBarDomain();if(!e||!r)return!1;var i=e[1].valueOf()-e[0].valueOf(),a=r[1].valueOf()-r[0].valueOf(),o=_.getProperty(this.model.getOptions(),"zoomBar","minZoomRatio");return i/a<o},n.prototype.isMaxZoomDomain=function(){var e=this.model.get("zoomDomain"),r=this.getDefaultZoomBarDomain();return!!(e&&r&&e[0].valueOf()===r[0].valueOf()&&e[1].valueOf()===r[1].valueOf())},n.prototype.isEmptyState=function(){return this.getZoomBarData().length===0},n.prototype.isZoomBarLoading=function(e){return _.getProperty(this.model.getOptions(),"zoomBar",e,"loading")},n.prototype.isZoomBarLocked=function(e){return _.getProperty(this.model.getOptions(),"zoomBar",e,"locked")},n}(Pe),UC=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),VC=function(t){UC(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.zoomIn=function(e,r,i){var a,o,s,u=i||On;e&&(a=e.x,o=e.y,s=2);var l=$.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0}),c=l.width,f=l.height;r.transition().duration(u.duration).ease(u.ease).attr("transform","translate("+c/2+", "+f/2+") scale("+s+") translate("+-a+","+-o+")"),this.services.events.dispatchEvent(P.CanvasZoom.CANVAS_ZOOM_IN,{element:V(e)})},n.prototype.zoomOut=function(e,r){var i=r||On;e.transition().duration(i.duration).ease(i.ease).attr("transform",""),this.services.events.dispatchEvent(P.CanvasZoom.CANVAS_ZOOM_OUT)},n}(Pe),ft=function(){function t(n,e,r){if(this.renderType=it.HTML,this.configs={},this.model=n,this.services=e,r&&(this.configs=r,this.configs.id)){var i=_.getProperty(this.model.getOptions(),"style","prefix");this.id=i+"--"+this.configs.id}this.parent||this.setParent(V(this.services.domUtils.getMainContainer()))}return t.prototype.init=function(){},t.prototype.render=function(n){console.error("render() method is not implemented")},t.prototype.destroy=function(){},t.prototype.setModel=function(n){this.model=n},t.prototype.setServices=function(n){this.services=n},t.prototype.setParent=function(n){var e=this.parent;if(this.parent=n,!(e&&e.node()===n.node())&&this.type){var r=_.getProperty(this.model.getOptions(),"style","prefix");this.parent.classed(It.prefix+"--"+r+"--"+this.type,!0),e&&e.classed(It.prefix+"--"+r+"--"+this.type,!1)}},t.prototype.getParent=function(){return this.parent},t.prototype.getComponentContainer=function(n){if(n===void 0&&(n={withinChartClip:!1}),this.type){var e=_.getProperty(this.model.getOptions(),"style","prefix"),r=this.id?"#"+this.id:"",i=$.appendOrSelect(this.parent,""+(this.renderType===it.SVG?"svg":"div")+r+"."+It.prefix+"--"+e+"--"+this.type);if(n.withinChartClip){var a=this.model.get("chartClipId");if(a){var o=V("#"+a),s=o.select("rect");s.size()!==0&&parseFloat(s.attr("height"))>0&&i.attr("clip-path","url(#"+a+")")}}return i.attr("width","100%").attr("height","100%")}return this.parent},t.prototype.getOptions=function(){if(this.configs.options){var n=_.merge({},this.model.getOptions(),this.configs.options);return n}return this.model.getOptions()},t}(),$C=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dd=function(t){$C(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="legend",e.renderType=it.HTML,e}return n.prototype.render=function(){var e=this,r=this.getOptions(),i=_.getProperty(r,"legend"),a=_.getProperty(i,"alignment"),o=_.getProperty(r,"legend","orientation"),s=this.model.getDataGroups(),u=Rt.items.status.DISABLED,l=s.some(function(w){return w.status===u}),c=_.getProperty(i,"order"),f=this.getComponentContainer().classed("center-aligned",a===Lt.CENTER).classed("right-aligned",a===Lt.RIGHT).classed(o,!0).classed("has-deactivated-items",l).attr("role",st.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(s=this.sortDataGroups(s,c));var h=f.selectAll("div.legend-item").data(s,function(w){return w.name}),d=h.enter().append("div").attr("class","legend-item");d.merge(f.selectAll("div.legend-item")).classed("active",function(w,S){return w.status===Rt.items.status.ACTIVE});var p=_.getProperty(this.getOptions(),"legend","clickable");f.classed("clickable",p&&s.length>1);var m=Rt.checkbox.radius,v=d.append("div").classed("checkbox",!0),x=v.merge(h.select("div.checkbox")).attr("role",st.CHECKBOX).attr("tabindex",p?0:-1).attr("aria-labelledby",function(w,S){return e.services.domUtils.generateElementIDString("legend-datagroup-"+S+"-title")}).attr("aria-checked",function(w){var S=w.status;return S===Rt.items.status.ACTIVE}).attr("width",m*2).attr("height",m*2).attr("class",function(w,S){return e.model.getColorClassName({classNameTypes:[rt.BACKGROUND],dataGroupName:w.name,originalClassName:"checkbox"})}).style("background",function(w){return w.status===Rt.items.status.ACTIVE?e.model.getFillColor(w.name)||e.model.getStrokeColor(w.name):null}).classed("active",function(w,S){return w.status===Rt.items.status.ACTIVE});v.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),d.append("p").merge(h.select("p"));var g=_.getProperty(r,"legend","additionalItems");if(g&&s.length){var y=this,T=f.selectAll("div.additional-item").data(g);T.exit().remove();var b=T.enter().append("div").merge(T).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",function(w,S){return e.services.domUtils.generateElementIDString("legend-datagroup-"+(x.size()+S)+"-title")});b.selectAll("*").remove();var O,k=1;b.append("svg").classed("icon",!0).each(function(w,S){var R=V(this);!O||O!=w.type?(O=w.type,k=1):k++,y.addAdditionalItem(R,w,k)}),b.append("p").merge(b.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),p&&d.size()>1&&this.addEventListeners()},n.prototype.sortDataGroups=function(e,r){if(e.sort(function(o,s){return r.indexOf(o.name)-r.indexOf(s.name)}),r.length<e.length){var i=e.length-r.length,a=e.slice(i);return a.concat(e.slice(0,i))}return e},n.prototype.addAdditionalItem=function(e,r,i){var a=Rt.area,o=a.width,s=a.height;if(r.type===Ct.RADIUS?e.style("width",s+"px").style("height",s+"px"):e.style("width",o+"px").style("height",s+"px"),r.type===Ct.RADIUS){var u=Rt.radius,l=u.iconData,c=u.fill,f=u.stroke,h=e.attr("fill","none").selectAll("circle").data(l).enter();h.append("circle").classed("radius",!0).attr("role",st.IMG).attr("aria-label","radius").attr("cx",function(T){return T.cx}).attr("cy",function(T){return T.cy}).attr("r",function(T){return T.r}).style("fill",r.fill?r.fill:c).style("stroke",r.stroke?r.stroke:f)}else if(r.type===Ct.LINE){var d=Rt.line;e.select("line.line").empty()&&e.append("line").classed("line-"+i,!0).attr("role",st.IMG).attr("aria-label","line").attr("x1",0).attr("y1",d.yPosition).attr("x2",o).attr("y2",d.yPosition).style("stroke",r.stroke?r.stroke:d.stroke).style("stroke-width",d.strokeWidth)}else if(r.type===Ct.AREA)e.select("rect.area").empty()&&e.append("rect").classed("area-"+i,!0).attr("role",st.IMG).attr("aria-label","area").attr("width",o).attr("height",s).style("fill",i>3&&!r.fill?Rt.area.fill:r.fill).style("stroke",r.stroke);else if(r.type===Ct.SIZE){var p=Rt.size,l=p.iconData,c=p.fill,f=p.stroke,m=e.attr("fill","none").attr("role",st.IMG).attr("aria-label","size").selectAll("rect").data(l).enter();m.append("rect").classed("size",!0).attr("width",function(k){return k.width}).attr("height",function(k){return k.height}).attr("y",function(k){return 0}).style("fill",r.fill?r.fill:c).style("stroke",r.stroke?r.stroke:f).style("stroke-width",1)}else if(r.type===Ct.QUARTILE){var l=Rt.quartile.iconData,v=e.selectAll("rect").attr("role",st.IMG).attr("aria-label","quartile").data(l).enter();v.append("rect").attr("class",function(b,O){return"quartile-"+(O===0?"wrapper":"line")}).attr("x",function(b){return b.x}).attr("y",function(b){return b.y}).attr("width",function(b){return b.width}).attr("height",function(b){return b.height})}else if(r.type===Ct.ZOOM){var x=_.getProperty(Pf,"legend","zoom"),l=x.iconData,g=x.color,y=e.attr("role",st.IMG).attr("aria-label","zoom").selectAll("g.icon").data(l).enter();y.append("g").attr("x",function(b){return b.x}).attr("y",function(b){return b.y}).attr("width",function(b){return b.width}).attr("height",function(b){return b.height}).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",function(b){return r.color?r.color:g}),y.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",function(b){return r.color?r.color:g})}},n.prototype.truncateLegendText=function(){var e=this.getComponentContainer(),r=_.getProperty(this.getOptions(),"legend","truncation"),i=_.getProperty(r,"type"),a=_.getProperty(r,"threshold"),o=_.getProperty(r,"numCharacter"),s=e.selectAll("div.legend-item p");s.attr("id",function(u,l){var c=this.parentNode.querySelector("div.checkbox")||this.parentNode;return c.getAttribute("aria-labelledby")}),i!==Oe.NONE?s.html(function(u){return u.name.length>a?_.truncateLabel(u.name,i,o):u.name}):s.html(function(u){return u.name})},n.prototype.addEventListeners=function(){var e=this,r=this.getComponentContainer(),i=this.getOptions(),a=_.getProperty(i,"legend"),o=_.getProperty(a,"truncation","threshold");r.selectAll("div.legend-item").on("mouseover",function(s){e.services.events.dispatchEvent(P.Legend.ITEM_HOVER,{hoveredElement:V(this)});var u=V(this);u.select("div.checkbox").classed("hovered",!0);var l=u.datum();l.name.length>o&&e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:s,hoveredElement:u,content:l.name})}).on("mousemove",function(s){e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:s})}).on("click",function(){e.services.events.dispatchEvent(P.Legend.ITEM_CLICK,{clickedElement:V(this)});var s=V(this),u=s.datum();e.model.toggleDataLabel(u.name)}).on("mouseout",function(){var s=V(this);s.select("div.checkbox").classed("hovered",!1),e.services.events.dispatchEvent(P.Tooltip.HIDE),e.services.events.dispatchEvent(P.Legend.ITEM_MOUSEOUT,{hoveredElement:s})}),r.selectAll("div.legend-item div.checkbox").on("keyup",function(s){s.key&&s.key==="Tab"&&e.services.events.dispatchEvent(P.Legend.ITEM_HOVER,{hoveredElement:V(this)})}),r.selectAll("div.legend-item div.checkbox").on("keydown",function(s,u){s.key&&s.key===" "?(s.preventDefault(),e.model.toggleDataLabel(u.name)):s.key&&s.key==="Tab"&&e.services.events.dispatchEvent(P.Legend.ITEM_MOUSEOUT,{hoveredElement:V(this)})}),r.selectAll("g.additional-item").on("mouseover",function(s){var u=V(this),l=u.datum();l.name.length>o&&e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:s,hoveredElement:u,content:l.name})})},n}(ft);function GC(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function FC(t){return jC(t)||WC(t)||zC(t)||HC()}function HC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zC(t,n){if(!!t){if(typeof t=="string")return hu(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hu(t,n)}}function WC(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jC(t){if(Array.isArray(t))return hu(t)}function hu(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Ld(t){return t.reduce(function(n,e){return Array.isArray(e)?n.push.apply(n,FC(Ld(e))):n.push(e),n},[])}function qC(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Ld(n).reduce(function(r,i){return i(r)},function(){function r(){GC(this,r)}return r}())}function na(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?na=function(e){return typeof e}:na=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(t)}function YC(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Rd(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function XC(t,n,e){return n&&Rd(t.prototype,n),e&&Rd(t,e),t}function ZC(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&du(t,n)}function du(t,n){return du=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},du(t,n)}function KC(t){var n=JC();return function(){var r=ra(t),i;if(n){var a=ra(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return QC(this,i)}}function QC(t,n){return n&&(na(n)==="object"||typeof n=="function")?n:kd(t)}function kd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ra(t){return ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ra(t)}function tA(t){var n=function(e){ZC(i,e);var r=KC(i);function i(a){var o,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(YC(this,i),o=r.call(this,a,s),o.children=[],!a||a.nodeType!==Node.ELEMENT_NODE)throw new TypeError("DOM element should be given to initialize this widget.");return o.element=a,o.options=Object.assign(Object.create(o.constructor.options),s),o.constructor.components.set(o.element,kd(o)),o}return XC(i,[{key:"release",value:function(){for(var o=this.children.pop();o;o=this.children.pop())o.release();return this.constructor.components.delete(this.element),null}}],[{key:"create",value:function(o,s){return this.components.get(o)||new this(o,s)}}]),i}(t);return n}function ia(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ia=function(e){return typeof e}:ia=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia(t)}function eA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Id(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nA(t,n,e){return n&&Id(t.prototype,n),e&&Id(t,e),t}function aa(t,n,e){return typeof Reflect!="undefined"&&Reflect.get?aa=Reflect.get:aa=function(i,a,o){var s=rA(i,a);if(!!s){var u=Object.getOwnPropertyDescriptor(s,a);return u.get?u.get.call(o):u.value}},aa(t,n,e||t)}function rA(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&(t=Gn(t),t!==null););return t}function iA(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&pu(t,n)}function pu(t,n){return pu=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},pu(t,n)}function aA(t){var n=uA();return function(){var r=Gn(t),i;if(n){var a=Gn(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return oA(this,i)}}function oA(t,n){return n&&(ia(n)==="object"||typeof n=="function")?n:sA(t)}function sA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gn(t){return Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gn(t)}function lA(t){var n=function(e){iA(i,e);var r=aA(i);function i(){var a;eA(this,i);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=r.call.apply(r,[this].concat(s)),a.handles=new Set,a}return nA(i,[{key:"manage",value:function(o){return this.handles.add(o),o}},{key:"unmanage",value:function(o){return this.handles.delete(o),o}},{key:"release",value:function(){var o=this;return this.handles.forEach(function(s){s.release(),o.handles.delete(s)}),aa(Gn(i.prototype),"release",this).call(this)}}]),i}(t);return n}function $r(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t.addEventListener.apply(t,e),{release:function(){return t.removeEventListener.apply(t,e),null}}}function oa(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oa=function(e){return typeof e}:oa=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(t)}function cA(t){return pA(t)||dA(t)||hA(t)||fA()}function fA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hA(t,n){if(!!t){if(typeof t=="string")return vu(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vu(t,n)}}function dA(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pA(t){if(Array.isArray(t))return vu(t)}function vu(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function vA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Nd(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gA(t,n,e){return n&&Nd(t.prototype,n),e&&Nd(t,e),t}function mA(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&gu(t,n)}function gu(t,n){return gu=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},gu(t,n)}function yA(t){var n=bA();return function(){var r=sa(t),i;if(n){var a=sa(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return _A(this,i)}}function _A(t,n){return n&&(oa(n)==="object"||typeof n=="function")?n:xA(t)}function xA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sa(t){return sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sa(t)}function OA(t){var n=function(e){mA(i,e);var r=yA(i);function i(){return vA(this,i),r.apply(this,arguments)}return gA(i,[{key:"_changeState",value:function(){throw new Error("_changeState() should be overriden to perform actual change in state.")}},{key:"changeState",value:function(){for(var o=this,s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];var c=typeof u[0]=="string"?u.shift():void 0,f=Object(u[0])===u[0]&&typeof u[0]!="function"?u.shift():void 0,h=typeof u[0]=="function"?u.shift():void 0;if(typeof this.shouldStateBeChanged=="function"&&!this.shouldStateBeChanged(c,f)){h&&h(null,!0);return}var d={group:f&&f.group,state:c},p=[d.group,c].filter(Boolean).join("-").split("-").map(function(T){return T[0].toUpperCase()+T.substr(1)}).join(""),m=new CustomEvent(this.options["eventBefore".concat(p)],{bubbles:!0,cancelable:!0,detail:f}),v=f&&f.delegatorNode||this.element,x=!v.dispatchEvent(m);if(x){if(h){var g=new Error("Changing state (".concat(JSON.stringify(d),") has been canceled."));g.canceled=!0,h(g)}}else{var y=[c,f].filter(Boolean);this._changeState.apply(this,cA(y).concat([function(){v.dispatchEvent(new CustomEvent(o.options["eventAfter".concat(p)],{bubbles:!0,cancelable:!0,detail:f})),h&&h()}]))}}}]),i}(t);return n}function mu(t,n){var e=t.target,r=t.currentTarget;if(typeof e.matches=="function"){if(e.matches(n))return e;if(e.matches("".concat(n," *"))){var i=e.closest(n);if((r.nodeType===Node.DOCUMENT_NODE?r.documentElement:r).contains(i))return i}}}function Bd(t){if(!t||typeof t=="function")return{launchingElement:null,launchingEvent:null};var n=t.delegateTarget||t.currentTarget||t,e=t.currentTarget&&t;if(n&&!n.nodeType)throw new TypeError("DOM Node should be given for launching element.");if(e&&!e.type)throw new TypeError("DOM event should be given for launching event.");return{launchingElement:n,launchingEvent:e}}function ua(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ua=function(e){return typeof e}:ua=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(t)}function TA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Ud(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wA(t,n,e){return n&&Ud(t.prototype,n),e&&Ud(t,e),t}function SA(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&yu(t,n)}function yu(t,n){return yu=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},yu(t,n)}function EA(t){var n=AA();return function(){var r=la(t),i;if(n){var a=la(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return MA(this,i)}}function MA(t,n){return n&&(ua(n)==="object"||typeof n=="function")?n:CA(t)}function CA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function la(t){return la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},la(t)}function PA(t){var n=function(e){SA(i,e);var r=EA(i);function i(){return TA(this,i),r.apply(this,arguments)}return wA(i,[{key:"show",value:function(o,s){(!o||typeof o=="function")&&(s=o),this.changeState("shown",Bd(o),s)}},{key:"hide",value:function(o,s){(!o||typeof o=="function")&&(s=o),this.changeState("hidden",Bd(o),s)}}]),i}(t);return n}var DA=[OA,PA],LA=DA;function ca(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ca=function(e){return typeof e}:ca=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(t)}function RA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Vd(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kA(t,n,e){return n&&Vd(t.prototype,n),e&&Vd(t,e),t}function IA(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_u(t,n)}function _u(t,n){return _u=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},_u(t,n)}function NA(t){var n=VA();return function(){var r=fa(t),i;if(n){var a=fa(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return BA(this,i)}}function BA(t,n){return n&&(ca(n)==="object"||typeof n=="function")?n:UA(t)}function UA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fa(t){return fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fa(t)}function $A(t){var n=function(e){IA(i,e);var r=NA(i);function i(){return RA(this,i),r.apply(this,arguments)}return kA(i,null,[{key:"init",value:function(){var o=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object.assign(Object.create(this.options),u);if(!s||s.nodeType!==Node.ELEMENT_NODE&&s.nodeType!==Node.DOCUMENT_NODE)throw new TypeError("DOM document or DOM element should be given to search for and initialize this widget.");if(s.nodeType===Node.ELEMENT_NODE&&s.matches(l.selectorInit))this.create(s,u);else{var c=l.initEventNames.map(function(f){return $r(s,f,function(h){var d=mu(h,"[".concat(l.attribInitTarget,"]"));if(d){h.delegateTarget=d;var p=d.ownerDocument.querySelectorAll(d.getAttribute(l.attribInitTarget));if(p.length>1)throw new Error("Target widget must be unique.");if(p.length===1){d.tagName==="A"&&h.preventDefault();var m=o.create(p[0],u);typeof m.createdByLauncher=="function"&&m.createdByLauncher(h)}}})});return{release:function(){for(var h=c.pop();h;h=c.pop())h.release()}}}return""}}]),i.forLazyInit=!0,i}(t);return n}function ha(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ha=function(e){return typeof e}:ha=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ha(t)}function GA(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function $d(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FA(t,n,e){return n&&$d(t.prototype,n),e&&$d(t,e),t}function HA(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&xu(t,n)}function xu(t,n){return xu=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},xu(t,n)}function zA(t){var n=qA();return function(){var r=da(t),i;if(n){var a=da(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return WA(this,i)}}function WA(t,n){return n&&(ha(n)==="object"||typeof n=="function")?n:jA(t)}function jA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qA(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function da(t){return da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},da(t)}var YA=function(t){HA(e,t);var n=zA(e);function e(r,i){var a;return GA(this,e),a=n.call(this,r,i),a._handleFocusinListener=void 0,a._handleKeydownListener=void 0,a._handleFocusin=function(o){var s=a.element.querySelector(a.options.selectorModalContainer)||a.element;a.element.classList.contains(a.options.classVisible)&&!s.contains(o.target)&&a.options.selectorsFloatingMenus.every(function(u){return!mu(o,u)})&&a.element.querySelector(It.selectorTabbable).focus()},a._hookCloseActions(),a}return FA(e,[{key:"createdByLauncher",value:function(i){this.show(i)}},{key:"shouldStateBeChanged",value:function(i){return i==="shown"?!this.element.classList.contains(this.options.classVisible):this.element.classList.contains(this.options.classVisible)}},{key:"_changeState",value:function(i,a,o){var s=this,u,l=function(){if(u&&(u=s.unmanage(u).release()),i==="shown"&&s.element.offsetWidth>0&&s.element.offsetHeight>0){s.previouslyFocusedNode=s.element.ownerDocument.activeElement;var d=s.element.querySelector(s.options.selectorPrimaryFocus)||s.element.querySelector(It.selectorTabbable);d.focus()}o()};if(this._handleFocusinListener&&(this._handleFocusinListener=this.unmanage(this._handleFocusinListener).release()),i==="shown"){var c="onfocusin"in this.element.ownerDocument.defaultView,f=c?"focusin":"focus";this._handleFocusinListener=this.manage($r(this.element.ownerDocument,f,this._handleFocusin,!c))}i==="hidden"?(this.element.classList.toggle(this.options.classVisible,!1),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!1),(this.options.selectorFocusOnClose||this.previouslyFocusedNode)&&(this.element.ownerDocument.querySelector(this.options.selectorFocusOnClose)||this.previouslyFocusedNode).focus()):i==="shown"&&(this.element.classList.toggle(this.options.classVisible,!0),this.element.ownerDocument.body.classList.toggle(this.options.classBody,!0)),u=this.manage($r(this.element,"transitionend",l))}},{key:"_hookCloseActions",value:function(){var i=this;this.manage($r(this.element,"click",function(a){var o=mu(a,i.options.selectorModalClose);o&&(a.delegateTarget=o),(o||a.target===i.element)&&i.hide(a)})),this._handleKeydownListener&&(this._handleKeydownListener=this.unmanage(this._handleKeydownListener).release()),this._handleKeydownListener=this.manage($r(this.element.ownerDocument.body,"keydown",function(a){a.which===27&&i.shouldStateBeChanged("hidden")&&(a.stopPropagation(),i.hide(a))}))}}],[{key:"options",get:function(){var i=It.prefix;return{selectorInit:"[data-modal]",selectorModalClose:"[data-modal-close]",selectorPrimaryFocus:"[data-modal-primary-focus]",selectorsFloatingMenus:[".".concat(i,"--overflow-menu-options"),".".concat(i,"--tooltip"),".flatpickr-calendar"],selectorModalContainer:".".concat(i,"--modal-container"),classVisible:"is-visible",classBody:"".concat(i,"--body--with-modal-open"),attribInitTarget:"data-modal-target",initEventNames:["click"],eventBeforeShown:"modal-beingshown",eventAfterShown:"modal-shown",eventBeforeHidden:"modal-beinghidden",eventAfterHidden:"modal-hidden"}}}]),e.components=new WeakMap,e}(qC(tA,$A,LA,lA)),XA=YA,ZA=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gd=function(t){ZA(n,t);function n(e,r,i){var a=t.call(this,e,r,i)||this;return a.type="modal",a.isEventListenerAdded=!1,a.handleShowModal=function(){a.modal.html(a.getModalHTML()),a.modal.select("div.bx--modal-footer button.bx--btn").on("click",function(){return a.model.exportToCSV()});var o=XA.create(a.modal.node());o.show()},a.handleHideModal=function(){},a.init(),a}return n.prototype.addEventListeners=function(){this.services.events.addEventListener(P.Modal.SHOW,this.handleShowModal),this.services.events.addEventListener(P.Modal.HIDE,this.handleHideModal)},n.prototype.removeEventListeners=function(){this.services.events.removeEventListener(P.Modal.SHOW,this.handleShowModal),this.services.events.removeEventListener(P.Modal.HIDE,this.handleHideModal)},n.prototype.getModalHTML=function(){var e=this.model.getOptions(),r=_.getProperty(e,"style","prefix"),i=this.model.getTabularDataArray();return`
		<div class="bx--modal-container">
			<div class="bx--modal-header">
				<p class="bx--modal-header__label bx--type-delta" id="modal-title">Tabular representation</p>
				<p class="bx--modal-header__heading bx--type-beta" id="modal-description">`+e.title+`</p>
				<button class="bx--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="bx--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>
			<div class="bx--modal-content"><table class="bx--data-table bx--data-table--no-border">
					<thead>
						<tr>
							`+bt(i,0).map(function(a){return`<th scope="col">
								<div class="bx--table-header-label">`+a+`</div>
							</th>`}).join("")+`
						</tr>
					</thead>
					<tbody>`+i.slice(1).map(function(a){return`
							<tr>
								`+a.map(function(o){return"<td>"+o+"</td>"}).join("")+`
							</tr>`}).join("")+`
					</tbody>
				</table>
			</div>
			<div class="bx--modal-footer">
			  <div class="`+It.prefix+"--"+r+`-modal-footer-spacer"></div>
			  <button class="bx--btn bx--btn--primary" type="button" data-modal-primary-focus>Download as CSV</button>
			</div>
		</div>`},n.prototype.render=function(){var e=this.model.getOptions();if(!this.isEventListenerAdded){var r=V(this.services.domUtils.getHolder()),i=_.getProperty(e,"style","prefix");this.modal=$.appendOrSelect(r,"div."+It.prefix+"--"+i+"--modal"),this.addEventListeners(),this.isEventListenerAdded=!0,this.modal.attr("data-modal",!0).attr("class","bx--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby","modal-title").attr("aria-describedby","modal-description").attr("tabindex",-1)}},n.prototype.destroy=function(){this.removeEventListeners(),this.isEventListenerAdded=!1},n}(ft),Fn,Nt;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Nt||(Nt={}));var Fd=(Fn={},Fn[Nt.LEFT]=function(t,n,e){return{top:t.top-Math.round(n.offsetHeight/2)+Math.round(e.height/2),left:Math.round(t.left-n.offsetWidth)}},Fn[Nt.RIGHT]=function(t,n,e){return{top:t.top-Math.round(n.offsetHeight/2)+Math.round(e.height/2),left:Math.round(t.left+e.width)}},Fn[Nt.TOP]=function(t,n,e){return{top:Math.round(t.top-n.offsetHeight),left:t.left-Math.round(n.offsetWidth/2)+Math.round(e.width/2)}},Fn[Nt.BOTTOM]=function(t,n,e){return{top:Math.round(t.top+e.height),left:t.left-Math.round(n.offsetWidth/2)+Math.round(e.width/2)}},Fn),pa=typeof window!="undefined"?window:{innerHeight:0,scrollY:0,innerWidth:0,scrollX:0},va=function(){function t(n){n===void 0&&(n={}),this.positions=Fd,this.positions=Object.assign({},Fd,n)}return t.prototype.getRelativeOffset=function(n){for(var e={left:n.offsetLeft,top:n.offsetTop};n.offsetParent&&getComputedStyle(n.offsetParent).position==="static";)e.left+=n.offsetLeft,e.top+=n.offsetTop,n=n.offsetParent;return e},t.prototype.getAbsoluteOffset=function(n){for(var e=n,r={top:0,left:0};e.offsetParent;){var i=getComputedStyle(e.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),e=e.offsetParent}var a=n.getBoundingClientRect(),o=document.body.getBoundingClientRect();return{top:a.top-o.top+r.top,left:a.left-o.left+r.left}},t.prototype.findRelative=function(n,e,r){var i=this.getRelativeOffset(n),a=n.getBoundingClientRect();return this.calculatePosition(i,a,e,r)},t.prototype.findAbsolute=function(n,e,r){var i=this.getAbsoluteOffset(n),a=n.getBoundingClientRect();return this.calculatePosition(i,a,e,r)},t.prototype.findPosition=function(n,e,r,i){i===void 0&&(i=this.getAbsoluteOffset);var a=i(n),o=n.getBoundingClientRect();return this.calculatePosition(a,o,e,r)},t.prototype.findPositionAt=function(n,e,r){return this.calculatePosition(n,{height:0,width:0},e,r)},t.prototype.getPlacementBox=function(n,e){var r=n.offsetHeight+e.top,i=n.offsetWidth+e.left;return{top:e.top,bottom:r,left:e.left,right:i}},t.prototype.addOffset=function(n,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),Object.assign({},n,{top:n.top+e,left:n.left+r})},t.prototype.setElement=function(n,e){n.style.top=e.top+"px",n.style.left=e.left+"px"},t.prototype.findBestPlacement=function(n,e,r,i,a){var o=this;i===void 0&&(i=this.defaultContainerFunction),a===void 0&&(a=this.findPosition);var s=r.map(function(u){var l=a(n,e,u),c=o.getPlacementBox(e,l),f=c.bottom-i().height,h=c.right-i().width;f=f<0?e.offsetHeight:f,h=h<0?e.offsetWidth:h;var d=e.offsetHeight*e.offsetWidth,p=f*h,m=d-p;m=m===0?d:m;var v=m/d;return{placement:u,weight:v}});return s.sort(function(u,l){return l.weight-u.weight}),s[0].placement},t.prototype.findBestPlacementAt=function(n,e,r,i){var a=this;i===void 0&&(i=this.defaultContainerFunction);var o=function(s,u,l){return a.findPositionAt(n,u,l)};return this.findBestPlacement(null,e,r,i,o)},t.prototype.defaultContainerFunction=function(){return{width:pa.innerHeight-pa.scrollY,height:pa.innerWidth-pa.scrollX}},t.prototype.calculatePosition=function(n,e,r,i){return this.positions[i]?this.positions[i](n,r,e):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t}();new va;var bu=[["15seconds",15*1e3],["minute",60*1e3],["30minutes",30*60*1e3],["hourly",60*60*1e3],["daily",24*60*60*1e3],["monthly",30*24*60*60*1e3],["quarterly",3*30*24*60*60*1e3],["yearly",12*30*24*60*60*1e3]];function Hd(t,n,e,r,i){var a=n===0,o=Number(Vr(new Date(t),"c"))===2,s=Number(Vr(new Date(t),"q"))===1,u=n!==0?e[n-1]:null;switch(r){case"15seconds":return a||ma(t)||Gr(t,u)||dn(t);case"minute":return a||ma(t)||Gr(t,u)||dn(t);case"30minutes":return a||ma(t)||Gr(t,u)||dn(t);case"hourly":return a||ma(t)||Gr(t,u)||dn(t);case"daily":return i?a||o||dn(t):a||Gr(t,u)||dn(t);case"monthly":return a||dn(t);case"quarterly":return a||s;case"yearly":return!1;default:throw new Error(r+" is not a valid time interval.")}}function Ou(t,n,e,r,i){var a=i.showDayName,o=r==="daily"&&a?"weekly":r,s=new Date(t),u=_.getProperty(i,"timeIntervalFormats")[o],l=_.getProperty(u,"primary"),c=_.getProperty(u,"secondary"),f=Hd(t,n,e,r,a)?l:c,h=i.localeObject;return Vr(s,f,{locale:h})}function ga(t){var n=new Date(t);return{M:n.getMonth()+1,d:n.getDate(),H:n.getHours(),m:n.getMinutes(),s:n.getSeconds()}}function KA(t){if(!!t)return t.slice(1).map(function(n,e){return n-t[e]})}function QA(t){var n=bu.reduce(function(e,r,i){r[0];var a=r[1],o=bu[e][1],s=Math.abs(o-t),u=Math.abs(a-t);return s<u?e:i},0);return bu[n][0]}function Tu(t){if(t.length===1)return"15seconds";var n=KA(t),e=Ln(n);return QA(e)}function ma(t){var n=ga(t),e=n.s,r=n.m,i=n.H;return i===0&&r===0&&e===0}function Gr(t,n){var e=ga(t).M,r=ga(n).M;return e!==r}function dn(t){var n=ga(t),e=n.M,r=n.d,i=n.s,a=n.m,o=n.H;return e===1&&r===1&&o===0&&a===0&&i===0}var JA=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tP=function(t){JA(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.type="threshold",i.renderType=it.SVG,i.positionService=new va,i}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!1);var i=_.getProperty(this.getOptions(),"axes"),a=[];Object.keys(i).forEach(function(p){var m,v;if(Object.values(j).includes(p)){var x=i[p];x.thresholds&&x.thresholds.length>0&&a.push({axisPosition:p,thresholds:x.thresholds,correspondingDatasets:(m=x)===null||m===void 0?void 0:m.correspondingDatasets,mapsTo:(v=x)===null||v===void 0?void 0:v.mapsTo})}});var o=this.getComponentContainer({withinChartClip:!0}),s=o.selectAll("g.axis-thresholds").data(a,function(p){return p.axisPosition});s.exit().attr("opacity",0).remove();var u=s.enter().append("g"),l=u.merge(s);l.attr("class",function(p){return"axis-thresholds "+p.axisPosition});var c=l.selectAll("g.threshold-group").data(function(p){return p.thresholds.map(function(m){return m.axisPosition=p.axisPosition,m.datum=r.constructDatumObj(p,m),m})});c.exit().attr("opacity",0).remove();var f=c.enter().append("g");f.append("line").attr("class","threshold-line"),f.append("rect").attr("class","threshold-hoverable-area");var h=f.merge(c);h.attr("class","threshold-group");var d=this;l.each(function(p){var m=p.axisPosition,v=d.services.cartesianScales.getScaleByPosition(m),x=d.services.cartesianScales.getScaleTypeByPosition(m),g=null,y=null;m===j.LEFT||m===j.RIGHT?(y=v,g=d.services.cartesianScales.getMainXScale()):(g=v,y=d.services.cartesianScales.getMainYScale());var T=x===et.LABELS,b=g.range(),O=b[0],k=b[1],w=y.range(),S=w[0],R=w[1],C=d.services.cartesianScales,N=C.getOrientation(),L=function(M){return C.getDomainValue(M)},I=function(M){return C.getRangeValue(M)},E=_.flipDomainAndRangeBasedOnOrientation(L,I,N),A=E[0],D=E[1],B=V(this);m===j.TOP||m===j.BOTTOM?(B.selectAll("line.threshold-line").transition().call(function(M){return d.services.transitions.setupTransition({transition:M,name:"threshold-line-update",animate:e})}).attr("y1",R).attr("y2",S).attr("x1",function(M){var U=M.datum;return A(U)+(T?v.step()/2:0)}).attr("x2",function(M){var U=M.datum;return A(U)+(T?v.step()/2:0)}).style("stroke",function(M){var U=M.fillColor;return U}),B.selectAll("rect.threshold-hoverable-area").attr("x",0).attr("y",function(M){var U=M.datum;return-A(U)}).attr("width",Math.abs(S-R)).classed("rotate",!0)):(B.selectAll("line.threshold-line").transition().call(function(M){return d.services.transitions.setupTransition({transition:M,name:"threshold-line-update",animate:e})}).attr("x1",O).attr("x2",k).attr("y1",function(M){var U=M.datum;return D(U)+(T?v.step()/2:0)}).attr("y2",function(M){var U=M.datum;return D(U)+(T?v.step()/2:0)}).style("stroke",function(M){var U=M.fillColor;return U}),B.selectAll("rect.threshold-hoverable-area").attr("x",O).attr("y",function(M){var U=M.datum;return D(U)}).attr("width",Math.abs(k-O)).classed("rotate",!1))}),this.services.events.addEventListener(P.Threshold.SHOW,function(p){r.setThresholdLabelPosition(p.detail),r.label.classed("hidden",!1)}),this.services.events.addEventListener(P.Threshold.HIDE,function(p){r.label.classed("hidden",!0)}),this.appendThresholdLabel(),this.addEventListeners()},n.prototype.getFormattedValue=function(e){var r=e.value,i=e.axisPosition,a=this.getOptions(),o=this.services.cartesianScales.getScaleTypeByPosition(i);if(o===et.TIME){var s=[j.LEFT,j.RIGHT].includes(i),u=this.services.cartesianScales.getMainXScale(),l=this.services.cartesianScales.getMainYScale(),c=s?l:u,f=_.getProperty(a,"timeScale"),h=Tu(c.ticks());return Ou(r,0,c.ticks(),h,f)}return r.toLocaleString("en")},n.prototype.appendThresholdLabel=function(){var e=V(this.services.domUtils.getHolder()),r=_.getProperty(this.getOptions(),"style","prefix");this.label=$.appendOrSelect(e,"div."+It.prefix+"--"+r+"--threshold--label").classed("hidden",!0)},n.prototype.setThresholdLabelPosition=function(e){var r=e.event,i=e.datum,a=this.services.domUtils.getHolder(),o=nn(r,a),s=i.valueFormatter?i.valueFormatter(i.value):this.getFormattedValue(i);this.label.html((i.label||"Threshold")+": "+s).style("background-color",i.fillColor);var u=this.label.node(),l=this.positionService.findBestPlacementAt({left:o[0],top:o[1]},u,[Nt.RIGHT,Nt.LEFT,Nt.TOP,Nt.BOTTOM],function(){return{width:a.offsetWidth,height:a.offsetHeight}}),c=this.positionService.findPositionAt({left:o[0],top:o[1]},u,l);this.positionService.setElement(u,c)},n.prototype.constructDatumObj=function(e,r){var i={};return e.correspondingDatasets&&(i.group=_.getProperty(e,"correspondingDatasets",0)),i[e.mapsTo]=r.value,i},n.prototype.addEventListeners=function(){var e=this,r=this.getComponentContainer({withinChartClip:!0});r.selectAll("rect.threshold-hoverable-area").on("mouseover mousemove",function(i){V(this.parentNode).select("line.threshold-line").classed("active",!0),e.services.events.dispatchEvent(P.Threshold.SHOW,{event:i,hoveredElement:V(this),datum:V(this).datum()})}).on("mouseout",function(i){V(this.parentNode).select("line.threshold-line").classed("active",!1),e.services.events.dispatchEvent(P.Threshold.HIDE,{event:i,hoveredElement:V(this),datum:V(this).datum()})})},n}(ft),eP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),wu=function(t){eP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="title",e.renderType=it.HTML,e}return n.prototype.render=function(){var e=this.getComponentContainer(),r=_.getProperty(this.getOptions(),"title"),i=e.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(function(o){return o}),i.node()&&i.node().offsetWidth<i.node().scrollWidth){var a=this;i.on("mouseover",function(o){a.services.events.dispatchEvent(P.Tooltip.SHOW,{event:o,hoveredElement:i,content:i.text()})}).on("mousemove",function(o){a.services.events.dispatchEvent(P.Tooltip.MOVE,{event:o})}).on("mouseout",function(){a.services.events.dispatchEvent(P.Tooltip.HIDE)})}i.exit().remove()},n.prototype.truncateTitle=function(e,r){if(!(r<=0)){var i=e.text();if(e.node().getComputedTextLength()>r){e.append("tspan").text("...");var a=$.appendOrSelect(e,"tspan").node().getComputedTextLength(),o=e.text(),s=this.getSubstringIndex(e.node(),0,o.length-1,r-a);e.html(o.substring(0,s-1)).append("tspan").text("...");var u=this;e.on("mouseover",function(l){u.services.events.dispatchEvent(P.Tooltip.SHOW,{event:l,hoveredElement:e,content:i})}).on("mousemove",function(l){u.services.events.dispatchEvent(P.Tooltip.MOVE,{event:l})}).on("mouseout",function(){u.services.events.dispatchEvent(P.Tooltip.HIDE)})}}},n.prototype.getMaxTitleWidth=function(){return $.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width},n.prototype.getSubstringIndex=function(e,r,i,a){var o=Math.floor((i+r)/2);return e.getSubStringLength(0,o)>a?this.getSubstringIndex(e,r,o,a):e.getSubStringLength(0,o)<a?e.getSubStringLength(0,o+1)>a?o:this.getSubstringIndex(e,o,i,a):o},n}(ft),nP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),rP=function(t){nP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="meter-title",e.renderType=it.SVG,e}return n.prototype.render=function(){var e=_.getProperty(this.model.getDisplayData(),0),r=this.getOptions(),i=this.getComponentContainer(),a=r.data.groupMapsTo,o=_.getProperty(r,"meter","proportional");if(o)this.displayTotal(),this.displayBreakdownTitle();else{var s=i.selectAll("text.meter-title").data([e[a]]);s.enter().append("text").classed("meter-title",!0).merge(s).attr("x",0).attr("y","1em").text(function(c){return c}),s.exit().remove(),this.appendPercentage(),this.displayStatus()}var u=this.getMaxTitleWidth(),l=$.appendOrSelect(i,"text.meter-title");u>0&&l.node().getComputedTextLength()>u&&this.truncateTitle(l,u)},n.prototype.displayBreakdownTitle=function(){var e=this.getComponentContainer(),r=this.getOptions(),i=this.model.getMaximumDomain(this.model.getDisplayData()),a=_.getProperty(r,"meter","proportional","total"),o=_.getProperty(r,"meter","proportional","unit")?_.getProperty(r,"meter","proportional","unit"):"",s;if(i===a)s=null;else{var u=a!==null?a-i:i,l=_.getProperty(r,"meter","proportional","breakdownFormatter");s=l!==null?l({datasetsTotal:i,total:a}):i+" "+o+" used ("+u+" "+o+" available)"}var c=e.selectAll("text.proportional-meter-title").data([s]);c.enter().append("text").classed("proportional-meter-title",!0).merge(c).attr("x",0).attr("y","1em").text(function(d){return d}),c.exit().remove();var f=this.getMaxTitleWidth(),h=$.appendOrSelect(e,"text.proportional-meter-title");f>0&&h.node().getComputedTextLength()>f&&this.truncateTitle(h,f)},n.prototype.displayTotal=function(){var e=this.getComponentContainer(),r=this.getOptions(),i=_.getProperty(r,"meter","proportional","total"),a=i?_.getProperty(r,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),o=_.getProperty(r,"meter","proportional","unit")?_.getProperty(r,"meter","proportional","unit"):"",s=_.getProperty(r,"meter","proportional","totalFormatter"),u=s!==null?s(a):i+" "+o+" total",l=$.getSVGElementSize(this.services.domUtils.getMainContainer(),{useAttrs:!0}),c=l.width?l.width:this.parent.node().getAttribute("width"),f=e.selectAll("text.proportional-meter-total").data([u]);f.enter().append("text").classed("proportional-meter-total",!0).merge(f).attr("x",c).attr("y","1em").attr("text-anchor","end").text(function(h){return h}),f.exit().remove()},n.prototype.displayStatus=function(){var e=this,r=this.getComponentContainer(),i=$.getHTMLElementSize(this.services.domUtils.getMainContainer()),a=i.width?i.width:0,o=this.model.getStatus(),s=Ht.status.indicatorSize/2,u=$.appendOrSelect(r,"g.status-indicator").attr("class",o!==null?"status-indicator status--"+o:"").attr("transform","translate("+(a-s)+", 0)"),l=o?[o]:[],c=u.selectAll("circle.status").data(l);c.enter().append("circle").merge(c).attr("class","status").attr("r",s).attr("cx",0).attr("cy","calc(1em / 2)");var f=u.selectAll("path.innerFill").data(l);f.enter().append("path").merge(f).attr("d",e.getStatusIconPathString(o)).attr("transform","translate(-"+s+", 0)").attr("class","innerFill"),f.exit().remove(),c.exit().remove()},n.prototype.appendPercentage=function(){var e=_.getProperty(this.model.getDisplayData(),0,"value"),r=this.getComponentContainer(),i=$.appendOrSelect(r,"text.meter-title"),a=_.getProperty(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")===!0?[e]:[],o=r.selectAll("text.percent-value").data(a),s=Ht.statusBar.paddingRight;o.enter().append("text").classed("percent-value",!0).merge(o).text(function(u){return u+"%"}).attr("x",+i.attr("x")+i.node().getComputedTextLength()+s).attr("y",i.attr("y")),o.exit().remove()},n.prototype.truncateTitle=function(e,r){t.prototype.truncateTitle.call(this,e,r);var i=$.appendOrSelect(this.parent,"tspan"),a=Ht.statusBar.paddingRight,o=Math.ceil(i.node().getComputedTextLength()),s=$.appendOrSelect(this.parent,"text.percent-value");s.attr("x",+e.attr("x")+e.node().getComputedTextLength()+o+a)},n.prototype.getMaxTitleWidth=function(){var e=$.getHTMLElementSize(this.services.domUtils.getMainContainer()),r=_.getProperty(this.getOptions(),"meter","proportional"),i=e.width?e.width:this.parent.node().getAttribute("width");if(r!==null){var a=$.appendOrSelect(this.parent,"text.proportional-meter-total").node(),o=$.getSVGElementSize(a,{useBBox:!0}).width;return i-o-Ht.total.paddingLeft}else{var s=$.appendOrSelect(this.parent,"text.percent-value"),u=Ht.statusBar.paddingRight,l=s.node().getComputedTextLength(),c=$.appendOrSelect(this.parent,"g.status-indicator").node(),f=$.getSVGElementSize(c,{useBBox:!0}).width+Ht.status.paddingLeft;return i-l-u-f}},n.prototype.getStatusIconPathString=function(e){switch(e){case ar.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case ar.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case ar.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}},n}(wu),iP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zd=function(t){iP(n,t);function n(e,r,i){var a=t.call(this,e,r,i)||this;return a.type="tooltip",a.renderType=it.HTML,a.isEventListenerAdded=!1,a.positionService=new va,a.handleShowTooltip=function(o){var s=o.detail.data||o.detail.items,u=a.getTooltipHTML(o),l=$.appendOrSelect(a.tooltip,"div.content-box");if(_.getProperty(a.getOptions(),"tooltip","customHTML"))if(o.detail.content){var c='<div class="title-tooltip"><p>'+o.detail.content+"</p></div>";l.html(c)}else l.html(a.model.getOptions().tooltip.customHTML(s,u));else l.html(u);a.positionTooltip(o),a.tooltip.classed("hidden",!1).attr("aria-hidden",!1)},a.handleHideTooltip=function(){a.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},a.init(),a}return n.prototype.addTooltipEventListener=function(){var e=this;this.services.events.addEventListener(P.Tooltip.MOVE,function(r){e.tooltip.classed("hidden")===!1&&e.positionTooltip(r)}),this.services.events.addEventListener(P.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(P.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(P.Chart.MOUSEOUT,this.handleHideTooltip)},n.prototype.removeTooltipEventListener=function(){this.services.events.removeEventListener(P.Tooltip.MOVE,null),this.services.events.removeEventListener(P.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(P.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(P.Chart.MOUSEOUT,this.handleHideTooltip)},n.prototype.getItems=function(e){return e.detail.items?e.detail.items:[]},n.prototype.formatItems=function(e){var r=this,i=this.getOptions(),a=_.getProperty(i,"tooltip","truncation","type"),o=_.getProperty(i,"tooltip","truncation","threshold"),s=_.getProperty(i,"tooltip","truncation","numCharacter");return a!==Oe.NONE?e.map(function(u){var l=u.labelIcon?12:0;return u.value=u.value?r.valueFormatter(u.value,u.label):u.value,u.label&&u.label.length+l>o&&(u.label=_.truncateLabel(u.label,a,s)),u.value&&u.value.length>o&&(u.value=_.truncateLabel(u.value,a,s)),u}):e},n.prototype.getTooltipHTML=function(e){var r;if(e.detail.content)r='<div class="title-tooltip"><p>'+e.detail.content+"</p></div>";else{var i=this.getItems(e),a=this.formatItems(i);r='<ul class="multi-tooltip">'+a.map(function(o){return`<li>
							<div class="datapoint-tooltip `+(o.bold?"bold":"")+`">
								`+(o.class?'<div class="tooltip-color '+o.class+'"></div>':"")+`
								`+(o.color?'<div style="background-color: '+o.color+'" class="tooltip-color"></div>':"")+`
								<div class="label">
								<p>`+(o.label||"")+`</p>
								`+(o.labelIcon?'<span class="label-icon"/>'+o.labelIcon+"</span>":"")+`
								</div>
								`+(o.value===void 0||o.value===null?"":'<p class="value"/>'+o.value+"</p>")+`
							</div>
						</li>`}).join("")+"</ul>"}return r},n.prototype.valueFormatter=function(e,r){var i=this.getOptions(),a=_.getProperty(i,"tooltip","valueFormatter");return a?a(e,r):typeof e.getTime=="function"?Vr(e,"MMM d, yyyy"):e.toLocaleString()},n.prototype.render=function(){var e=this.getOptions(),r=_.getProperty(e,"tooltip","enabled");if(r){var i=V(this.services.domUtils.getHolder()),a=_.getProperty(e,"style","prefix");this.tooltip=$.appendOrSelect(i,"div."+It.prefix+"--"+a+"--tooltip"),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)},n.prototype.positionTooltip=function(e){var r=this.services.domUtils.getHolder(),i=this.tooltip.node(),a=this.getOptions(),o=_.getProperty(a,"zoomBar","top","enabled"),s=_.getProperty(e,"detail","mousePosition");if(!s)s=nn(_.getProperty(e,"detail","event"),r);else{var u=_.getProperty(a,"zoomBar","top","type"),l=Wt.height[u];o&&(s[1]+=l+Wt.spacerHeight)}var c,f=r.offsetWidth,h=r.offsetHeight,d;s[0]/f>.9?d=Nt.LEFT:s[0]/f<.1?d=Nt.RIGHT:d=this.positionService.findBestPlacementAt({left:s[0],top:s[1]},i,[Nt.RIGHT,Nt.LEFT,Nt.TOP,Nt.BOTTOM],function(){return{width:f,height:h}});var p=Ml.horizontalOffset;d===Nt.LEFT&&(p*=-1),c=this.positionService.findPositionAt({left:s[0]+p,top:s[1]},i,d),this.positionService.setElement(i,c)},n}(ft),aP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oP=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},sP=function(t){aP(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getItems=function(e){var r=this;if(e.detail.items)return e.detail.items;var i=e.detail.data;if(!i.length||!i[0])return[];var a=this.getOptions(),o=this.services.cartesianScales,s=o.getDomainIdentifier(),u=a.data.groupMapsTo,l=o.getDomainLabel(),c=o.getRangeLabel(),f=i[0][s],h;if(i.length===1){var d=i[0],p=o.getRangeIdentifier(d),m=d[p];h=oP([{label:l,value:f}],Array.isArray(m)&&m.length===2?[{label:"Start",value:m[0]},{label:"End",value:m[1]}]:[{label:c,value:d[p]}]),e.detail.additionalItems&&e.detail.additionalItems.forEach(function(g){return h.push({label:g.label,value:g.value})}),h.push({label:a.tooltip.groupLabel,value:d[u],color:this.model.getFillColor(d[u]),class:this.model.getColorClassName({classNameTypes:[rt.TOOLTIP],dataGroupName:d[u]})})}else if(i.length>1){h=[{label:l,value:f}],h=h.concat(i.map(function(g){return{label:g[u],value:g[o.getRangeIdentifier(g)],color:r.model.getFillColor(g[u]),class:r.model.getColorClassName({classNameTypes:[rt.TOOLTIP],dataGroupName:g[u]})}}).sort(function(g,y){return y.value-g.value}));var v=o.isDualAxes();if(!v&&_.getProperty(a,"tooltip","showTotal")===!0){var x=o.getRangeIdentifier();h.push({label:bt(a,"tooltip.totalLabel")||"Total",value:i.reduce(function(g,y){return g+y[x]},0),bold:!0})}}return h},n}(zd),uP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wd=function(t){uP(n,t);function n(e,r,i){var a=t.call(this,e,r,i)||this;return a.type="chart-clip",a.renderType=it.SVG,a.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),a.init(),a}return n.prototype.init=function(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})},n.prototype.render=function(e){this.createClipPath()},n.prototype.createClipPath=function(){var e=this.parent,r=this.services.cartesianScales,i=r.getMainXScale(),a=r.getMainYScale(),o=i.range(),s=o[0],u=o[1],l=a.range(),c=l[0],f=l[1];this.chartClipPath=$.appendOrSelect(e,"clipPath."+this.type).attr("id",this.chartClipId);var h=$.appendOrSelect(this.chartClipPath,"rect."+this.type);h.attr("x",s).attr("y",f).attr("width",u-s).attr("height",c-f),this.chartClipPath.merge(h).lower()},n}(ft),lP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cP=function(t){lP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="canvas-chart-clip",e.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999),e}return n.prototype.createClipPath=function(){var e=this.parent,r=$.getSVGElementSize(this.parent,{useAttrs:!0}),i=r.width,a=r.height;this.chartClipPath=$.appendOrSelect(e,"clipPath."+this.type).attr("id",this.chartClipId);var o=$.appendOrSelect(this.chartClipPath,"rect."+this.type);o.attr("x",0).attr("y",0).attr("width",i).attr("height",a),this.chartClipPath.merge(o).lower()},n}(Wd),fP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ge=globalThis&&globalThis.__rest||function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e},hP=function(t){fP(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.type="highlight",i.renderType=it.SVG,i.positionService=new va,i.highlightStrokeWidth=1,i}return n.prototype.render=function(e){e===void 0&&(e=!1);var r=_.getProperty(this.getOptions(),"axes"),i=[];Object.keys(r).forEach(function(d){if(Object.values(j).includes(d)){var p=r[d];p.highlights&&p.highlights.data.length>0&&i.push({axisPosition:d,highlightStartMapsTo:p.highlights.highlightStartMapsTo,highlightEndMapsTo:p.highlights.highlightEndMapsTo,labelMapsTo:p.highlights.labelMapsTo,highlight:p.highlights.data,color:p.highlights.color})}});var a=this.getComponentContainer({withinChartClip:!0}),o=a.selectAll("g.axis-highlight").data(i,function(d){return d.axisPosition});o.exit().attr("opacity",0).remove();var s=o.enter().append("g"),u=s.merge(o);u.attr("class",function(d){return"axis-highlight "+d.axisPosition});var l=u.selectAll("g.highlight-group").data(function(d){return d.highlight.map(function(p){return p.axisPosition=d.axisPosition,p.highlightStartMapsTo=d.highlightStartMapsTo,p.labelMapsTo=d.labelMapsTo,p.color=d.color,p.highlightEndMapsTo=d.highlightEndMapsTo,p})});l.exit().attr("opacity",0).remove();var c=l.enter().append("g");c.append("rect").attr("class","highlight-bar"),c.append("line").attr("class","highlight-line");var f=c.merge(l);f.attr("class","highlight-group");var h=this;u.each(function(d){var p=d.axisPosition,m=h.services.cartesianScales.getMainXScale(),v=h.services.cartesianScales.getMainYScale(),x=m.range(),g=x[0],y=x[1],T=v.range(),b=T[0],O=T[1],k=h.services.cartesianScales,w=k.getOrientation(),S=function(E){return k.getDomainValue(E)},R=function(E){return k.getRangeValue(E)},C=_.flipDomainAndRangeBasedOnOrientation(S,R,w),N=C[0],L=C[1],I=V(this);p===j.TOP||p===j.BOTTOM?I.selectAll("rect.highlight-bar").transition().call(function(E){return h.services.transitions.setupTransition({transition:E,name:"highlight-bar-update",animate:e})}).attr("y",Math.max(O+h.highlightStrokeWidth,0)).attr("height",Math.max(b-2*h.highlightStrokeWidth,0)).attr("x",function(E){var A=E.highlightStartMapsTo,D=Ge(E,["highlightStartMapsTo"]);return N(D[A])}).attr("width",function(E){var A=E.highlightStartMapsTo,D=E.highlightEndMapsTo,B=Ge(E,["highlightStartMapsTo","highlightEndMapsTo"]);return Math.max(N(B[D])-N(B[A]),0)}).style("stroke",function(E){var A=E.color,D=E.labelMapsTo,B=Ge(E,["color","labelMapsTo"]);return A&&A.scale[B[D]]?A.scale[B[D]]:null}).style("stroke-dasharray","2, 2").attr("stroke-width",h.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",function(E){var A=E.color,D=E.labelMapsTo,B=Ge(E,["color","labelMapsTo"]);return A&&A.scale[B[D]]?A.scale[B[D]]:null}):I.selectAll("rect.highlight-bar").transition().call(function(E){return h.services.transitions.setupTransition({transition:E,name:"highlight-bar-update",animate:e})}).attr("x",g).attr("width",Math.max(y-g,0)).attr("y",function(E){var A=E.highlightEndMapsTo,D=Ge(E,["highlightEndMapsTo"]);return L(D[A])}).attr("height",function(E){var A=E.highlightStartMapsTo,D=E.highlightEndMapsTo,B=Ge(E,["highlightStartMapsTo","highlightEndMapsTo"]);return Math.max(L(B[A])-L(B[D]),0)}).style("stroke",function(E){var A=E.color,D=E.labelMapsTo,B=Ge(E,["color","labelMapsTo"]);return A&&A.scale[B[D]]?A.scale[B[D]]:null}).style("stroke-dasharray","2, 2").attr("stroke-width",h.highlightStrokeWidth+"px").style("fill-opacity",.1).style("fill",function(E){var A=E.color,D=E.labelMapsTo,B=Ge(E,["color","labelMapsTo"]);return A&&A.scale[B[D]]?A.scale[B[D]]:null})})},n}(ft),dP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jd=function(t){dP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area",e.renderType=it.SVG,e.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("path.area").transition("legend-hover-area").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-area"})}).attr("opacity",function(a){return a.name!==i.datum().name?he.opacity.unselected:he.opacity.selected})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.area").transition("legend-mouseout-area").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-area"})}).attr("opacity",he.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer({withinChartClip:!0}),a=[0,0],o=this.services.cartesianScales,s=o.getOrientation(),u=Xs().curve(this.services.curves.getD3Curve()).defined(function(w,S){var R=o.getRangeIdentifier(),C=w[R];return C!=null}),l=this.model.getGroupedData(this.configs.groups),c=_.getProperty(this.getOptions(),"bounds"),f=c&&l&&l.length===1;!f&&c&&console.warn("Bounds can only be shown when having 1 single datagroup, you've supplied "+l.length);var h=function(w,S){return f?o.getBoundedScaledValues(w,S)[0]:o.getRangeValue(0)},d=function(w,S){return f?o.getBoundedScaledValues(w,S)[1]:o.getRangeValue(w,S)};s===At.VERTICAL?(a=this.services.cartesianScales.getMainYScale().domain(),u.x(function(w,S){return o.getDomainValue(w,S)}).y0(function(w,S){return h(w,S)}).y1(function(w,S){return d(w,S)})):(a=this.services.cartesianScales.getMainXScale().domain(),u.x0(function(w,S){return h(w,S)}).x1(function(w,S){return d(w,S)}).y(function(w,S){return o.getDomainValue(w,S)}));var p=_.getProperty(this.getOptions(),"color","gradient","enabled"),m=l&&l.length===1&&p;l.length>1&&p&&console.error("Gradients can only be enabled when having 1 single dataset");var v=i.selectAll("path.area").data(l,function(w){return w.name}),x=V(this.services.domUtils.getMainContainer());if(v.exit().attr("opacity",0).remove(),!!l.length){if(m){var g=x.select("path."+this.model.getColorClassName({classNameTypes:[rt.STROKE],dataGroupName:l[0].name})).node(),y=void 0;if(g)y=getComputedStyle(g,null).getPropertyValue("stroke");else{var T=_.getProperty(this.model.getOptions(),"color","scale");if(T!==null){var b=Object.keys(T);y=T[b[0]]}}au.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(l[0].name.replace(" ","")+"_"+this.gradient_id),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:au.getStops(a,y)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});var O=this,k=v.enter().append("path");m?k.merge(v).style("fill",function(w){return"url(#"+r.services.domUtils.generateElementIDString(w.name.replace(" ","")+"_"+r.gradient_id)+")"}).attr("class","area").attr("class",function(w){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:w.name,originalClassName:"area"})}).attr("d",function(w){var S=w.data;return u(S)}):(k.attr("opacity",0).merge(v).attr("class","area").attr("class",function(w){return r.model.getColorClassName({classNameTypes:[rt.FILL,rt.STROKE],dataGroupName:w.name,originalClassName:"area"})}).style("fill",function(w){return O.model.getFillColor(w.name)}).transition().call(function(w){return r.services.transitions.setupTransition({transition:w,name:"area-update-enter",animate:e})}).attr("opacity",f?1:he.opacity.selected).attr("d",function(w){var S=w.data;return u(S)}),f&&k.attr("fill-opacity",he.opacity.selected).style("stroke",function(w){return O.model.getStrokeColor(w.name)}).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}},n.prototype.destroy=function(){var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ft),pP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qd=function(t){pP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area-stacked",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("path.area").transition("legend-hover-area").call(function(s){return e.services.transitions.setupTransition({transition:s,name:"legend-hover-area"})}).attr("opacity",function(s){return _.getProperty(s,0,o)!==i.datum().name?he.opacity.unselected:he.opacity.selected})},e.handleLegendMouseOut=function(){e.parent.selectAll("path.area").transition("legend-mouseout-area").call(function(r){return e.services.transitions.setupTransition({transition:r,name:"legend-mouseout-area"})}).attr("opacity",he.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer({withinChartClip:!0}),a=this,o=this.getOptions(),s=o.data.groupMapsTo,u=Object.keys(o.axes).some(function(v){return o.axes[v].percentage}),l=this.model.getStackedData({percentage:u,groups:this.configs.groups}),c=_.getProperty(l,0,0),f=this.services.cartesianScales.getDomainAxisPosition({firstDatum:c}),h=this.services.cartesianScales.getRangeAxisPosition({firstDatum:c}),d=this.services.cartesianScales.getScaleByPosition(h),p=i.selectAll("path.area").data(l,function(v){return _.getProperty(v,0,s)});this.areaGenerator=Xs().x(function(v,x){return r.services.cartesianScales.getValueThroughAxisPosition(f,v.data.sharedStackKey,x)}).y0(function(v){return d(v[0])}).y1(function(v){return d(v[1])}).curve(this.services.curves.getD3Curve()),p.exit().attr("opacity",0).remove();var m=p.enter().append("path").attr("opacity",0);m.merge(p).data(l,function(v){return _.getProperty(v,0,s)}).attr("class","area").attr("class",function(v){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:_.getProperty(v,0,s),originalClassName:"area"})}).style("fill",function(v){return a.model.getFillColor(_.getProperty(v,0,s))}).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",function(v){return _.getProperty(v,0,s)}).transition().call(function(v){return r.services.transitions.setupTransition({transition:v,name:"area-update-enter",animate:e})}).attr("opacity",he.opacity.selected).attr("d",this.areaGenerator)},n}(ft),vP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Su=function(t){vP(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getBarWidth=function(e){var r=this.getOptions();if(r.bars.width)return r.bars.width;var i=this.model.getDisplayData().length,a=this.services.cartesianScales.getMainXScale(),o=$.getSVGElementSize(this.parent,{useAttrs:!0}).width;return a.step?Math.min(r.bars.maxWidth,a.step()/2):Math.min(r.bars.maxWidth,o*.25/i)},n.prototype.isOutsideZoomedDomain=function(e,r){var i=this.model.getDisplayData().length;if(i<=1)return!1;var a=this.model.get("zoomDomain");if(a!==void 0){var o=this.services.cartesianScales.getDomainScale();return e<o(a[0])||r>o(a[1])}return!1},n}(ft),gP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yd=function(t){gP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="simple-bar",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-simple-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-simple-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getOptions(),a=i.data.groupMapsTo,o=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),u=this.services.cartesianScales.getOrientation(),l=o.selectAll("path.bar").data(s,function(f){return f[a]});l.exit().attr("opacity",0).remove();var c=l.enter().append("path").attr("opacity",0);c.merge(l).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(function(f){return r.services.transitions.setupTransition({transition:f,name:"bar-update-enter",animate:e})}).attr("class",function(f){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:f[a],originalClassName:"bar"})}).style("fill",function(f){return r.model.getFillColor(f[a])}).attr("d",function(f,h){var d=r.services.cartesianScales.getRangeIdentifier(),p=r.getBarWidth(),m=f[d],v=r.services.cartesianScales.getDomainValue(f,h)-p/2,x=v+p,g,y;if(Array.isArray(m)&&m.length===2)g=r.services.cartesianScales.getRangeValue(m[0]),y=r.services.cartesianScales.getRangeValue(m[1],h);else{var T=r.services.cartesianScales.getRangeScale(),b=T.domain()[0];g=r.services.cartesianScales.getRangeValue(Math.max(0,b)),y=r.services.cartesianScales.getRangeValue(f,h)}var O=Math.abs(y-g);if(O!==0&&O<2&&(m>0&&u===At.VERTICAL||m<0&&u===At.HORIZONTAL?y=g-2:y=g+2),!r.isOutsideZoomedDomain(v,x))return _.generateSVGPathString({x0:v,x1:x,y0:g,y1:y},u)}).attr("opacity",1).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(f){return f.value}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.bar").on("mouseover",function(r,i){var a=V(this);a.classed("hovered",!0),e.services.events.dispatchEvent(P.Bar.BAR_MOUSEOVER,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i]})}).on("mousemove",function(r,i){e.services.events.dispatchEvent(P.Bar.BAR_MOUSEMOVE,{event:r,element:V(this),datum:i}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(P.Bar.BAR_CLICK,{event:r,element:V(this),datum:i})}).on("mouseout",function(r,i){var a=V(this);a.classed("hovered",!1),e.services.events.dispatchEvent(P.Bar.BAR_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:a})})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(Su),mP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xd=function(t){mP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="grouped-bar",e.renderType=it.SVG,e.padding=5,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.model.getDisplayData(this.configs.groups),a=this.getOptions(),o=a.data.groupMapsTo;this.setGroupScale();var s=this.getComponentContainer({withinChartClip:!0}),u=_.removeArrayDuplicates(i.map(function(p){var m=r.services.cartesianScales.getDomainIdentifier(p);return p[m]&&typeof p[m].toString=="function"?p[m].toString():p[m]})),l=s.selectAll("g.bars").data(u,function(p){return p});l.exit().attr("opacity",0).remove();var c=l.enter().append("g").classed("bars",!0).attr("role",st.GROUP).attr("data-name","bars"),f=c.merge(l);f.transition().call(function(p){return r.services.transitions.setupTransition({transition:p,name:"bar-group-update-enter",animate:e})}).attr("transform",function(p,m){var v=r.services.cartesianScales.getDomainValue(p,m),x=v-r.getGroupWidth()/2;return r.services.cartesianScales.getOrientation()===At.VERTICAL?"translate("+x+", 0)":"translate(0, "+x+")"});var h=f.selectAll("path.bar").data(function(p){return r.getDataCorrespondingToLabel(p)},function(p){return p[o]});h.exit().attr("opacity",0).remove();var d=h.enter().append("path").attr("opacity",0);d.merge(h).classed("bar",!0).transition().call(function(p){return r.services.transitions.setupTransition({transition:p,name:"bar-update-enter",animate:e})}).attr("class",function(p){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:p[o],originalClassName:"bar"})}).style("fill",function(p){return r.model.getFillColor(p[o])}).attr("d",function(p){var m=r.groupScale(p[o]),v=r.getBarWidth(),x=m,g=m+v,y=r.services.cartesianScales.getRangeAxisPosition({datum:p}),T=r.services.cartesianScales.getValueThroughAxisPosition(y,0),b=r.services.cartesianScales.getRangeValue(p);if(!r.isOutsideZoomedDomain(x,g))return _.generateSVGPathString({x0:x,x1:g,y0:T,y1:b},r.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(p){return p.value}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.bar").on("mouseover",function(r,i){var a=V(this);a.classed("hovered",!0),e.services.events.dispatchEvent(P.Bar.BAR_MOUSEOVER,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:r,hoveredElement:a,data:[i]})}).on("mousemove",function(r,i){var a=V(this);e.services.events.dispatchEvent(P.Bar.BAR_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(P.Bar.BAR_CLICK,{event:r,element:V(this),datum:i})}).on("mouseout",function(r,i){var a=V(this);a.classed("hovered",!1),e.services.events.dispatchEvent(P.Bar.BAR_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:a})})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.getDataCorrespondingToLabel=function(e){var r=this,i=this.model.getDisplayData(this.configs.groups);return i.filter(function(a){var o=r.services.cartesianScales.getDomainIdentifier(a);return a[o]===e})},n.prototype.getGroupWidth=function(){var e=this.model.getGroupedData(this.configs.groups),r=this.getTotalGroupPadding();return this.getBarWidth()*e.length+r},n.prototype.getTotalGroupPadding=function(){var e=this.model.getGroupedData(this.configs.groups);if(e.length===1)return 0;var r=this.services.cartesianScales.getDomainScale(),i=Math.min(5,5*(r.step()/70));return i*(e.length-1)},n.prototype.getBarWidth=function(){var e=this.getOptions(),r=_.getProperty(e,"bars","width"),i=_.getProperty(e,"bars","maxWidth");if(r!==null&&(i===null||r<=i))return r;var a=this.model.getGroupedData(this.configs.groups),o=a.length,s=this.getTotalGroupPadding(),u=this.services.cartesianScales.getDomainScale();return Math.min(i,(u.step()-s)/o)},n.prototype.setGroupScale=function(){var e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Ai().domain(e).rangeRound([0,this.getGroupWidth()])},n}(Su),yP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zd=function(t){yP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="stacked-bar",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.model.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=this.getOptions(),o=a.data.groupMapsTo,s=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),u=this.model.getActiveDataGroupNames(),l=i.selectAll("g.bars").data(s,function(f){return _.getProperty(f,0,o)});l.exit().attr("opacity",0).remove(),l.enter().append("g").classed("bars",!0).attr("role",st.GROUP).attr("data-name","bars");var c=i.selectAll("g.bars").selectAll("path.bar").data(function(f){return f},function(f){return f.data.sharedStackKey});c.exit().remove(),c.enter().append("path").merge(c).classed("bar",!0).transition().call(function(f){return r.services.transitions.setupTransition({transition:f,name:"bar-update-enter",animate:e})}).attr("class",function(f){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:f[o],originalClassName:"bar"})}).style("fill",function(f){return r.model.getFillColor(f[o])}).attr("d",function(f,h){var d=f.data.sharedStackKey,p=r.getBarWidth(),m=r.services.cartesianScales.getDomainValue(d,h)-p/2,v=m+p,x=r.services.cartesianScales.getRangeValue(f[0],h),g=r.services.cartesianScales.getRangeValue(f[1],h);if(!r.isOutsideZoomedDomain(m,v)){if(Math.abs(g-x)>0&&Math.abs(g-x)>a.bars.dividerSize){var y=f[0]<0&&f[1]<=0;y&&u.length>1?r.services.cartesianScales.getOrientation()===At.VERTICAL?g+=f[1]===0?2:1:g-=(f[1]===0,1):y||(r.services.cartesianScales.getOrientation()===At.VERTICAL?g+=1:g-=1)}return _.generateSVGPathString({x0:m,x1:v,y0:x,y1:g},r.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(f){return f[1]-f[0]}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this;this.parent.selectAll("path.bar").on("mouseover",function(a,o){var s,u=V(this);u.classed("hovered",!0),i.services.events.dispatchEvent(P.Bar.BAR_MOUSEOVER,{event:a,element:u,datum:o});var l=i.model.getDisplayData(i.configs.groups),c=l.find(function(d){var p=i.services.cartesianScales.getDomainIdentifier(d),m=i.services.cartesianScales.getRangeIdentifier(d);return d[m]===o.data[o[r]]&&d[p].toString()===o.data.sharedStackKey&&d[r]===o[r]});if(c===void 0){var f=i.services.cartesianScales.getDomainIdentifier(),h=i.services.cartesianScales.getRangeIdentifier();c=(s={},s[f]=o.data.sharedStackKey,s[h]=o.data[o[r]],s[r]=o[r],s)}i.services.events.dispatchEvent(P.Tooltip.SHOW,{event:a,hoveredElement:u,data:[c]})}).on("mousemove",function(a,o){var s=V(this);i.services.events.dispatchEvent(P.Bar.BAR_MOUSEMOVE,{event:a,element:s,datum:o}),i.services.events.dispatchEvent(P.Tooltip.MOVE,{event:a})}).on("click",function(a,o){i.services.events.dispatchEvent(P.Bar.BAR_CLICK,{event:a,element:V(this),datum:o})}).on("mouseout",function(a,o){var s=V(this);s.classed("hovered",!1),i.services.events.dispatchEvent(P.Bar.BAR_MOUSEOUT,{event:a,element:s,datum:o}),i.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:s})})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(Su),_P=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xP=function(t){_P(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="boxplot",e.renderType=it.SVG,e}return n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=this.getOptions(),o=a.data.groupMapsTo,s=this.model.getDataGroupNames(),u=this.services.cartesianScales.getMainXScale(),l=this.services.cartesianScales.getMainYScale(),c=u.range(),f=c[0],h=c[1],d=l.range(),p=d[0],m=d[1],v=h-f,x=p-m;if(v!==0){var g=this.services.cartesianScales,y=g.getOrientation(),T=y===At.VERTICAL,b=_.flipDomainAndRangeBasedOnOrientation(function(A,D){return r.services.cartesianScales.getDomainValue(A,D)},function(A,D){return r.services.cartesianScales.getRangeValue(A,D)},y),O=b[0],k=b[1],w=Math.floor((T?v:x)/s.length),S=Math.min(w/2,16),R=this.model.getBoxplotData(),C=i.selectAll(".box-group").data(R);C.exit().remove();var N=C.enter().append("g").attr("class","box-group"),L=C.merge(N);N.append("path").merge(C.select("path.vertical-line.start")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[rt.STROKE],originalClassName:"vertical-line start"})}).attr("stroke-width",Yt.strokeWidth.default).attr("fill","none").transition().call(function(A){return r.services.transitions.setupTransition({transition:A,name:"boxplot-update-verticalstartline",animate:e})}).attr("d",function(A){var D=g.getDomainValue(A[o]),B=D,M=g.getRangeValue(A.whiskers.min),U=g.getRangeValue(A.quartiles.q_25);return _.generateSVGPathString({x0:D,x1:B,y0:M,y1:U},y)}),N.append("path").merge(C.select("path.vertical-line.end")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[rt.STROKE],originalClassName:"vertical-line end"})}).attr("stroke-width",Yt.strokeWidth.default).attr("fill","none").transition().call(function(A){return r.services.transitions.setupTransition({transition:A,name:"boxplot-update-verticalendline",animate:e})}).attr("d",function(A){var D=g.getDomainValue(A[o]),B=D,M=g.getRangeValue(A.whiskers.max),U=g.getRangeValue(A.quartiles.q_75);return _.generateSVGPathString({x0:D,x1:B,y0:M,y1:U},y)}),N.append("path").merge(C.select("path.box")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[rt.FILL,rt.STROKE],originalClassName:"box"})}).attr("fill-opacity",Yt.box.opacity.default).attr("stroke-width",Yt.strokeWidth.default).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","box").attr("aria-label",function(A){return A[o]}).transition().call(function(A){return r.services.transitions.setupTransition({transition:A,name:"boxplot-update-quartiles",animate:e})}).attr("d",function(A){var D=g.getDomainValue(A[o])-S/2,B=D+S,M=g.getRangeValue(Math[T?"max":"min"](A.quartiles.q_75,A.quartiles.q_25)),U=M+Math.abs(g.getRangeValue(A.quartiles.q_75)-g.getRangeValue(A.quartiles.q_25));return _.generateSVGPathString({x0:D,x1:B,y0:M,y1:U},y)}),N.append("path").merge(C.select("path.highlight-area")).attr("class","highlight-area").attr("opacity",0).attr("d",function(A){var D=g.getDomainValue(A[o])-S/2,B=D+S,M=g.getRangeValue(A.whiskers.min),U=g.getRangeValue(A.whiskers.max);return _.generateSVGPathString({x0:D,x1:B,y0:M,y1:U},y)}),N.append("path").merge(C.select("path.whisker.start")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[rt.STROKE],originalClassName:"whisker start"})}).attr("stroke-width",Yt.strokeWidth.thicker).attr("fill","none").transition().call(function(A){return r.services.transitions.setupTransition({transition:A,name:"boxplot-update-startingwhisker",animate:e})}).attr("d",function(A){var D=g.getDomainValue(A[o])-S/4,B=D+S/2,M=g.getRangeValue(A.whiskers.min),U=g.getRangeValue(A.whiskers.min);return _.generateSVGPathString({x0:D,x1:B,y0:M,y1:U},y)}),N.append("path").merge(C.select("path.median")).attr("fill","none").attr("class",function(){return r.model.getColorClassName({classNameTypes:[rt.STROKE],originalClassName:"median"})}).attr("stroke-width",2).transition().call(function(A){return r.services.transitions.setupTransition({transition:A,name:"boxplot-update-median",animate:e})}).attr("d",function(A){var D=g.getDomainValue(A[o])-S/2,B=D+S,M=g.getRangeValue(A.quartiles.q_50),U=M;return _.generateSVGPathString({x0:D,x1:B,y0:M,y1:U},y)}),N.append("path").merge(C.select("path.whisker.end")).attr("class",function(){return r.model.getColorClassName({classNameTypes:[rt.STROKE],originalClassName:"whisker end"})}).attr("stroke-width",Yt.strokeWidth.thicker).attr("fill","none").transition().call(function(A){return r.services.transitions.setupTransition({transition:A,name:"boxplot-update-endingwhisker",animate:e})}).attr("d",function(A){var D=g.getDomainValue(A[o])-S/4,B=D+S/2,M=g.getRangeValue(A.whiskers.max),U=g.getRangeValue(A.whiskers.max);return _.generateSVGPathString({x0:D,x1:B,y0:M,y1:U},y)});var I=L.selectAll("circle.outlier").data(function(A){return A.outliers.map(function(D){var B;return B={min:A.whiskers.min,max:A.whiskers.max},B[o]=A[o],B.value=D,B})});I.exit().remove();var E=I.enter().append("circle");I.merge(E).attr("r",Yt.circle.radius).attr("class",function(){return r.model.getColorClassName({classNameTypes:[rt.FILL,rt.STROKE],originalClassName:"outlier"})}).attr("fill-opacity",Yt.circle.opacity.default).attr("cx",O).transition().call(function(A){return r.services.transitions.setupTransition({transition:A,name:"boxplot-update-circles",animate:e})}).attr("cy",k),this.addBoxEventListeners(),this.addCircleEventListeners()}},n.prototype.addBoxEventListeners=function(){var e=this,r=this.getOptions(),i=r.data.groupMapsTo;this.parent.selectAll("path.highlight-area").on("mouseover",function(a,o){var s=V(this),u=V(this.parentNode);u.select("path.box").classed("hovered",!0).attr("fill-opacity",Yt.box.opacity.hovered),e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:a,hoveredElement:s,items:[{label:r.tooltip.groupLabel,value:o[i],class:e.model.getColorClassName({classNameTypes:[rt.TOOLTIP]})},{label:"Minimum",value:o.whiskers.min},{label:"Q1",value:o.quartiles.q_25},{label:"Median",value:o.quartiles.q_50},{label:"Q3",value:o.quartiles.q_75},{label:"Maximum",value:o.whiskers.max},{label:"IQR",value:o.quartiles.q_75-o.quartiles.q_25}]}),e.services.events.dispatchEvent(P.Boxplot.BOX_MOUSEOVER,{event:a,element:s,datum:o})}).on("mousemove",function(a,o){var s=V(this);e.services.events.dispatchEvent(P.Boxplot.BOX_MOUSEMOVE,{event:a,element:s,datum:o}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:a})}).on("click",function(a,o){e.services.events.dispatchEvent(P.Boxplot.BOX_CLICK,{event:a,element:V(this),datum:o})}).on("mouseout",function(a,o){var s=V(this),u=V(this.parentNode);u.select("path.box").classed("hovered",!1).attr("fill-opacity",Yt.box.opacity.default),e.services.events.dispatchEvent(P.Boxplot.BOX_MOUSEOUT,{event:a,element:s,datum:o}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:s})})},n.prototype.addCircleEventListeners=function(){var e=this,r=this.getOptions(),i=r.data.groupMapsTo,a=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("circle").on("mouseover",function(o,s){var u=V(this);u.classed("hovered",!0).attr("fill-opacity",Yt.circle.opacity.hovered).classed("unfilled",!1),e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:o,hoveredElement:u,items:[{label:r.tooltip.groupLabel,value:s[i],class:e.model.getColorClassName({classNameTypes:[rt.TOOLTIP]})},{label:"Outlier",value:s[a]}]}),e.services.events.dispatchEvent(P.Boxplot.OUTLIER_MOUSEOVER,{event:o,element:u,datum:s})}).on("mousemove",function(o,s){var u=V(this);e.services.events.dispatchEvent(P.Boxplot.OUTLIER_MOUSEMOVE,{event:o,element:u,datum:s}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:o})}).on("click",function(o,s){e.services.events.dispatchEvent(P.Boxplot.OUTLIER_CLICK,{event:o,element:V(this),datum:s})}).on("mouseout",function(o,s){var u=V(this);u.classed("hovered",!1).attr("fill-opacity",Yt.circle.opacity.default),e.services.events.dispatchEvent(P.Boxplot.OUTLIER_MOUSEOUT,{event:o,element:u,datum:s}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:u})})},n}(ft),bP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ye=function(t){bP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="scatter",e.renderType=it.SVG,e.handleChartHolderOnHover=function(r){e.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},e.handleChartHolderOnMouseOut=function(r){e.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-scatter"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-scatter"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);var r=this.configs.fadeInOnChartHolderMouseover;r&&(e.addEventListener(P.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(P.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))},n.prototype.filterBasedOnZoomDomain=function(e){var r=this.services.cartesianScales.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(function(a){return a[r].getTime()>=i[0].getTime()&&a[r].getTime()<=i[1].getTime()}):e},n.prototype.getScatterData=function(){var e=this,r=this.getOptions(),i=this.configs.stacked,a;if(i){var o=Object.keys(r.axes).some(function(s){return r.axes[s].percentage});a=this.model.getStackedData({groups:this.configs.groups,percentage:o})}else a=this.model.getDisplayData(this.configs.groups).filter(function(s){var u=e.services.cartesianScales.getRangeIdentifier(s);return s[u]!==void 0&&s[u]!==null});return this.filterBasedOnZoomDomain(a)},n.prototype.render=function(e){var r=_.getProperty(this.getOptions(),"points","enabled")||_.getProperty(this.getOptions(),"bubble","enabled");if(!!r){var i=this.getComponentContainer({withinChartClip:!0}),a=this.getOptions(),o=a.data.groupMapsTo,s=this.services.cartesianScales.getDomainIdentifier(),u=i.selectAll("circle.dot").data(this.getScatterData(),function(f){return f[o]+"-"+f[s]});u.exit().attr("opacity",0).remove();var l=u.enter().append("circle").classed("dot",!0).attr("opacity",0),c=l.merge(u);this.styleCircles(c,e),this.addEventListeners()}},n.prototype.isDatapointThresholdAnomaly=function(e,r){var i=this,a=this.configs.handleThresholds;if(!a)return!1;var o=this.services.cartesianScales,s=o.getOrientation(),u=_.flipDomainAndRangeBasedOnOrientation(this.services.cartesianScales.getHighestDomainThreshold(),this.services.cartesianScales.getHighestRangeThreshold(),s),l=u[0],c=u[1],f=_.flipDomainAndRangeBasedOnOrientation(function(v,x){return i.services.cartesianScales.getDomainValue(v,x)},function(v,x){return i.services.cartesianScales.getRangeValue(v,x)},s),h=f[0],d=f[1],p=h(e,r),m=d(e,r);if(c&&l)return m<=c.scaleValue&&p>=l.scaleValue;if(c)return m<=c.scaleValue;if(l)return p>=l.scaleValue},n.prototype.styleCircles=function(e,r){var i=this,a=this.getOptions(),o=a.points,s=o.filled,u=o.fillOpacity,l=this.services,c=l.cartesianScales;l.transitions;var f=a.data.groupMapsTo,h=function(g,y){return c.getDomainValue(g,y)},d=function(g,y){return c.getRangeValue(g,y)},p=_.flipDomainAndRangeBasedOnOrientation(h,d,c.getOrientation()),m=p[0],v=p[1],x=this.configs.fadeInOnChartHolderMouseover;e.raise().classed("dot",!0).attr("class",function(g){var y=c.getDomainIdentifier(g),T=i.model.getIsFilled(g[f],g[y],g,s),b=T?[rt.FILL,rt.STROKE]:[rt.STROKE];return i.model.getColorClassName({classNameTypes:b,dataGroupName:g[f],originalClassName:"dot"})}).classed("threshold-anomaly",function(g,y){return i.isDatapointThresholdAnomaly(g,y)}).classed("filled",function(g){var y=c.getDomainIdentifier(g);return i.model.getIsFilled(g[f],g[y],g,s)}).classed("unfilled",function(g){var y=c.getDomainIdentifier(g);return!i.model.getIsFilled(g[f],g[y],g,s)}).transition().call(function(g){return i.services.transitions.setupTransition({transition:g,name:"scatter-update-enter",animate:r})}).attr("cx",m).attr("cy",v).attr("r",a.points.radius).style("fill",function(g){var y=c.getDomainIdentifier(g);if(i.model.getIsFilled(g[f],g[y],g,s))return i.model.getFillColor(g[f],g[y],g)}).style("stroke",function(g){var y=c.getDomainIdentifier(g);return i.model.getStrokeColor(g[f],g[y],g)}).attr("fill-opacity",s?u:1).attr("opacity",x?0:1).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",function(g){var y=c.getRangeIdentifier(g);return g[y]}),this.addEventListeners()},n.prototype.getTooltipAdditionalItems=function(e){return null},n.prototype.addEventListeners=function(){var e=this,r=e.getOptions().data.groupMapsTo;this.parent.selectAll("circle").on("mouseover",function(i,a){var o=V(this);o.classed("hovered",!0).attr("class",function(s){return e.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:s[r],originalClassName:o.attr("class")})}).style("fill",function(s){var u=e.services.cartesianScales.getDomainIdentifier(s);return e.model.getFillColor(s[r],s[u],s)}).classed("unfilled",!1),e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:i,hoveredElement:o,data:[a],additionalItems:e.getTooltipAdditionalItems(a)}),e.services.events.dispatchEvent(P.Scatter.SCATTER_MOUSEOVER,{event:i,element:o,datum:a})}).on("mousemove",function(i,a){var o=V(this);e.services.events.dispatchEvent(P.Scatter.SCATTER_MOUSEMOVE,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:i})}).on("click",function(i,a){e.services.events.dispatchEvent(P.Scatter.SCATTER_CLICK,{event:i,element:V(this),datum:a})}).on("mouseout",function(i,a){var o=V(this);if(o.classed("hovered",!1),!e.configs.filled){var s=e.getOptions().points.filled,u=e.services.cartesianScales.getDomainIdentifier(a),l=e.model.getIsFilled(a[r],a[u],a,s);o.classed("unfilled",!l).style("fill",function(c){return l||s?e.model.getFillColor(c[r],c[u],c):null})}e.services.events.dispatchEvent(P.Scatter.SCATTER_MOUSEOUT,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:o})})},n.prototype.destroy=function(){this.parent.selectAll("circle").on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),e.removeEventListener(P.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.removeEventListener(P.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)},n}(ft),OP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),TP=function(t){OP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bubble",e.renderType=it.SVG,e}return n.prototype.getRadiusScale=function(e){var r=this.getOptions(),i=r.bubble.radiusMapsTo,a=e.data(),o=a.map(function(c){return c[i]}).filter(function(c){return c}),s=$.getHTMLElementSize(this.services.domUtils.getMainContainer()),u=o.length>0,l=u?Se(o):[1,1];return Be().domain(l).range(u?r.bubble.radiusRange(s,a):[4,4])},n.prototype.styleCircles=function(e,r){var i=this,a=this.getOptions(),o=a.bubble.radiusMapsTo,s=this.getRadiusScale(e),u=a.data.groupMapsTo,l=this.services.cartesianScales,c=function(m,v){return l.getDomainValue(m,v)},f=function(m,v){return l.getRangeValue(m,v)},h=_.flipDomainAndRangeBasedOnOrientation(c,f,l.getOrientation()),d=h[0],p=h[1];e.raise().classed("dot",!0).attr("role",st.GRAPHICS_SYMBOL).attr("aria-label",function(m){var v=l.getRangeIdentifier(m);return m[v]}).transition().call(function(m){return i.services.transitions.setupTransition({transition:m,name:"bubble-update-enter",animate:r})}).attr("cx",d).attr("cy",p).attr("r",function(m){return s(m[o]||1)}).attr("class",function(m){return i.model.getColorClassName({classNameTypes:[rt.FILL,rt.STROKE],dataGroupName:m[u],originalClassName:"dot"})}).style("fill",function(m){var v=i.services.cartesianScales.getDomainIdentifier(m);return i.model.getFillColor(m[u],m[v],m)}).style("stroke",function(m){var v=i.services.cartesianScales.getDomainIdentifier(m);return i.model.getStrokeColor(m[u],m[v],m)}).attr("fill-opacity",a.bubble.fillOpacity).attr("opacity",1)},n.prototype.getTooltipAdditionalItems=function(e){var r=_.getProperty(this.getOptions(),"bubble");return[{label:_.getProperty(r,"radiusLabel"),value:e[_.getProperty(r,"radiusMapsTo")]}]},n}(ye),wP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),SP=function(t){wP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bullet",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-simple-bar"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-simple-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getOptions(),a=i.data.groupMapsTo,o=this.getComponentContainer({withinChartClip:!0}),s=this.model.getDisplayData(this.configs.groups),u=this.services.cartesianScales.getRangeScale(),l=this.services.cartesianScales.getRangeIdentifier(),c=u.range(),f=c[0],h=c[1],d=u.domain();d[0];var p=d[1],m=function(){var y=[];s.forEach(function(O){O.ranges?O.ranges.forEach(function(k,w){k!=null&&k<p&&y.push({datum:O,value:k,order:w+1})}):y.push({datum:O,order:1})});var T=$.appendOrSelect(o,"g.range-boxes").selectAll("path.range-box").data(y,function(O){return O[a]+"-"+O.order});T.exit().attr("opacity",0).remove();var b=T.enter().append("path").attr("opacity",0);b.merge(T).attr("class",function(O){return"range-box order-"+O.order}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"bullet-range-box-update-enter",animate:e})}).attr("d",function(O,k){var w=16,S,R,C,N;return O.order===1?(S=r.services.cartesianScales.getDomainValue(O.datum,k)-w/2,R=S+w,C=h-2,N=f+1):(S=r.services.cartesianScales.getDomainValue(O.datum,k)-w/2,R=S+w,C=r.services.cartesianScales.getRangeValue(O.value,k),N=h),_.generateSVGPathString({x0:S,x1:R,y0:C,y1:N},r.services.cartesianScales.getOrientation())}).attr("opacity",1)},v=function(){var y=$.appendOrSelect(o,"g.bars").selectAll("path.bar").data(s,function(b){return b[a]});y.exit().attr("opacity",0).remove();var T=y.enter().append("path").attr("opacity",0);T.merge(y).classed("bar",!0).transition().call(function(b){return r.services.transitions.setupTransition({transition:b,name:"bullet-bar-update-enter",animate:e})}).attr("class",function(b){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:b[a],originalClassName:"bar"})}).style("fill",function(b){return r.model.getFillColor(b[a])}).attr("d",function(b,O){var k=8,w=r.services.cartesianScales.getDomainValue(b,O)-k/2,S=w+k,R=r.services.cartesianScales.getRangeValue(0)+1,C=r.services.cartesianScales.getRangeValue(b,O);return _.generateSVGPathString({x0:w,x1:S,y0:R,y1:C},r.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(b){return b.value})},x=function(){var y=$.appendOrSelect(o,"g.markers").selectAll("path.marker").data(s.filter(function(b){return _.getProperty(b,"marker")!==null}),function(b){return b[a]});y.exit().attr("opacity",0).remove();var T=y.enter().append("path").attr("opacity",0);T.merge(y).classed("marker",!0).transition().call(function(b){return r.services.transitions.setupTransition({transition:b,name:"bullet-marker-update-enter",animate:e})}).attr("d",function(b,O){var k=24,w=r.services.cartesianScales.getDomainValue(b,O)-k/2,S=w+k,R=r.services.cartesianScales.getRangeValue(b.marker,O),C=R;return _.generateSVGPathString({x0:w,x1:S,y0:R,y1:C},r.services.cartesianScales.getOrientation())}).attr("opacity",1)},g=function(){var y=[];s.filter(function(O){return _.getProperty(O,"marker")!==null}).forEach(function(O){var k=O.marker,w=O[l];y=y.concat([{datum:O,value:k*.25,barValue:w},{datum:O,value:k*.5,barValue:w},{datum:O,value:k*.75,barValue:w}])});var T=$.appendOrSelect(o,"g.quartiles").selectAll("path.quartile").data(y,function(O){return O[a]});T.exit().attr("opacity",0).remove();var b=T.enter().append("path").attr("opacity",0);b.merge(T).attr("class",function(O){return"quartile "+(O.value<=O.barValue?"over-bar":"")}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"bullet-quartile-update-enter",animate:e})}).attr("d",function(O,k){var w=O.datum,S=O.value,R=4;w.ranges&&w.ranges.indexOf(S)!==-1&&(R=8);var C=r.services.cartesianScales.getDomainValue(w,k)-R/2,N=C+R,L=r.services.cartesianScales.getRangeValue(S,k),I=L;return _.generateSVGPathString({x0:C,x1:N,y0:L,y1:I},r.services.cartesianScales.getOrientation())}).attr("opacity",1)};m(),v(),x(),g(),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this,r=this.getOptions(),i=r.data.groupMapsTo,a=this.services.cartesianScales.getRangeIdentifier();this.parent.selectAll("path.bar").on("mouseover",function(o,s){var u=V(this);u.classed("hovered",!0),e.services.events.dispatchEvent(P.Bar.BAR_MOUSEOVER,{event:o,element:u,datum:s});var l=_.getProperty(r,"bullet","performanceAreaTitles"),c=e.model.getMatchingRangeIndexForDatapoint(s);e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:o,hoveredElement:u,items:[{label:r.tooltip.groupLabel||"Group",value:s[i],class:e.model.getColorClassName({classNameTypes:[rt.TOOLTIP],dataGroupName:s[i]})},{label:"Value",value:s[a]},{label:"Target",value:s.marker},{label:"Percentage",value:Math.floor(s[a]/s.marker*100)+"%"},{label:"Performance",value:l[c]}]})}).on("mousemove",function(o,s){e.services.events.dispatchEvent(P.Bar.BAR_MOUSEMOVE,{event:o,element:V(this),datum:s}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:o})}).on("click",function(o,s){e.services.events.dispatchEvent(P.Bar.BAR_CLICK,{event:o,element:V(this),datum:s})}).on("mouseout",function(o,s){var u=V(this);u.classed("hovered",!1),e.services.events.dispatchEvent(P.Bar.BAR_MOUSEOUT,{event:o,element:u,datum:s}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:u})})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ft),EP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),MP=function(t){EP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="histogram",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("path.bar").transition("legend-hover-bar").call(function(s){return e.services.transitions.setupTransition({transition:s,name:"legend-hover-bar"})}).attr("opacity",function(s){return s[o]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer(),a=this.model.getOptions(),o=a.groupIdentifier,s=a.data.groupMapsTo,u=this.model.getBinnedStackedData(),l=this.services.cartesianScales.getMainXScale(),c=i.selectAll("g.bars").data(u,function(h){return bt(h,"0."+s)});c.exit().attr("opacity",0).remove(),c.enter().append("g").classed("bars",!0).attr("role",st.GROUP);var f=i.selectAll("g.bars").selectAll("path.bar").data(function(h){return h});f.exit().remove(),f.enter().append("path").merge(f).classed("bar",!0).attr(o,function(h,d){return d}).transition().call(function(h){return r.services.transitions.setupTransition({transition:h,name:"histogram-bar-update-enter",animate:e})}).attr("class",function(h){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:h[s],originalClassName:"bar"})}).style("fill",function(h){return r.model.getFillColor(h[s])}).attr("d",function(h,d){var p=bt(h,"data");if(!!p){var m=l(p.x1)-l(p.x0)-1,v=r.services.cartesianScales.getDomainValue(p.x0,d),x=v+m,g=r.services.cartesianScales.getRangeValue(h[0],d),y=r.services.cartesianScales.getRangeValue(h[1],d);return Math.abs(y-g)>0&&Math.abs(y-g)>a.bars.dividerSize&&(r.services.cartesianScales.getOrientation()===At.VERTICAL?y+=1:y-=1),_.generateSVGPathString({x0:v,x1:x,y0:g,y1:y},r.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",function(h){return _.getProperty(h,"data",h[s])}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.model.getOptions(),r=e.data.groupMapsTo,i=this;this.parent.selectAll("path.bar").on("mouseover",function(a,o){var s=V(this);s.classed("hovered",!0);var u=parseFloat(bt(o,"data.x0")),l=parseFloat(bt(o,"data.x1")),c=i.services.cartesianScales.getRangeAxisPosition(),f=i.services.cartesianScales.getScaleLabel(c);i.services.events.dispatchEvent(P.Tooltip.SHOW,{event:a,hoveredElement:s,items:[{label:bt(e,"bins.rangeLabel")||"Range",value:u+" \u2013 "+l},{label:e.tooltip.groupLabel||"Group",value:o[r],class:i.model.getColorClassName({classNameTypes:[rt.TOOLTIP],dataGroupName:o[r]})},{label:f,value:bt(o,"data."+o[r])}]})}).on("mousemove",function(a,o){i.services.events.dispatchEvent(P.Tooltip.MOVE,{event:a})}).on("mouseout",function(a,o){var s=V(this);s.classed("hovered",!1),i.services.events.dispatchEvent(P.Tooltip.HIDE)})},n.prototype.destroy=function(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ft),CP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hn=function(t){CP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="line",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("path.line").transition("legend-hover-line").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-line"})}).attr("opacity",function(a){return a.name!==i.datum().name?de.opacity.unselected:de.opacity.selected})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.line").transition("legend-mouseout-line").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-line"})}).attr("opacity",de.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer({withinChartClip:!0}),a=this.services,o=a.cartesianScales,s=a.curves,u=function(b,O){return o.getDomainValue(b,O)},l=function(b,O){return o.getRangeValue(b,O)},c=_.flipDomainAndRangeBasedOnOrientation(u,l,o.getOrientation()),f=c[0],h=c[1],d=this.getOptions(),p=Fi().x(f).y(h).curve(s.getD3Curve()).defined(function(b,O){var k=o.getRangeIdentifier(b),w=b[k];return w!=null}),m=[];if(this.configs.stacked){var v=Object.keys(d.axes).some(function(b){return d.axes[b].percentage}),x=d.data.groupMapsTo,g=this.model.getStackedData({groups:this.configs.groups,percentage:v});m=g.map(function(b){var O=r.services.cartesianScales.getDomainIdentifier(b),k=r.services.cartesianScales.getRangeIdentifier(b);return{name:_.getProperty(b,0,x),data:b.map(function(w){var S;return S={},S[O]=w.data.sharedStackKey,S[x]=w[x],S[k]=w[1],S}),hidden:!_.some(b,function(w){return w[0]!==w[1]})}})}else m=this.model.getGroupedData(this.configs.groups);var y=i.selectAll("path.line").data(m,function(b){return b.name});y.exit().attr("opacity",0).remove();var T=y.enter().append("path").classed("line",!0).attr("opacity",0);T.merge(y).data(m,function(b){return b.name}).attr("class",function(b){return r.model.getColorClassName({classNameTypes:[rt.STROKE],dataGroupName:b.name,originalClassName:"line"})}).style("stroke",function(b){return r.model.getStrokeColor(b.name)}).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",function(b){var O=b.data;return O.map(function(k){var w=r.services.cartesianScales.getRangeIdentifier(k);return k[w]}).join(",")}).transition().call(function(b){return r.services.transitions.setupTransition({transition:b,name:"line-update-enter",animate:e})}).attr("opacity",function(b){return b.hidden?0:1}).attr("d",function(b){var O=b.data;return p(O)})},n.prototype.destroy=function(){var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n}(ft),AP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PP=function(t){AP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="lollipop",e.renderType=it.SVG,e.handleScatterOnHover=function(r){var i=r.detail,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("line.line").attr("stroke-width",function(s){return s[o]!==i.datum[o]?de.weight.unselected:de.weight.selected})},e.handleScatterOnMouseOut=function(r){e.parent.selectAll("line.line").attr("stroke-width",de.weight.unselected)},e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions(),o=a.data.groupMapsTo;e.parent.selectAll("line.line").transition("legend-hover-line").call(function(s){return e.services.transitions.setupTransition({transition:s,name:"legend-hover-line"})}).attr("opacity",function(s){return s[o]!==i.datum().name?de.opacity.unselected:de.opacity.selected})},e.handleLegendMouseOut=function(r){e.parent.selectAll("line.line").transition("legend-mouseout-line").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-line"})}).attr("opacity",de.opacity.selected)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=this.model.getOptions(),o=a.data.groupMapsTo,s=this.services.cartesianScales,u=s.getMainXScale(),l=s.getMainYScale(),c=s.getDomainIdentifier(),f=function(T,b){return s.getDomainValue(T,b)},h=function(T,b){return s.getRangeValue(T,b)},d=s.getOrientation(),p=_.flipDomainAndRangeBasedOnOrientation(f,h,d),m=p[0],v=p[1],x=i.selectAll("line.line").data(this.getScatterData(),function(T){return T[o]+"-"+T[c]});x.exit().attr("opacity",0).remove();var g=x.enter().append("line").attr("opacity",0),y=g.merge(x).classed("line",!0).attr("class",function(T){return r.model.getColorClassName({classNameTypes:[rt.STROKE],dataGroupName:T[o],originalClassName:"line"})}).transition().call(function(T){return r.services.transitions.setupTransition({transition:T,name:"lollipop-line-update-enter",animate:e})}).style("stroke",function(T){return r.model.getFillColor(T[o],T[c],T)}).attr("opacity",1);d===At.HORIZONTAL?y.attr("y1",v).attr("y2",v).attr("x1",u.range()[0]).attr("x2",function(T,b){return m(T,b)-a.points.radius}):y.attr("x1",m).attr("x2",m).attr("y1",l.range()[0]).attr("y2",function(T,b){return v(T,b)+a.points.radius}),this.addScatterPointEventListeners()},n.prototype.addScatterPointEventListeners=function(){this.services.events.addEventListener(P.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),this.services.events.addEventListener(P.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)},n.prototype.destroy=function(){var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),e.removeEventListener(P.Scatter.SCATTER_MOUSEOVER,this.handleScatterOnHover),e.removeEventListener(P.Scatter.SCATTER_MOUSEOUT,this.handleScatterOnMouseOut)},n}(ye),DP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kd=function(t){DP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="scatter-stacked",e.renderType=it.SVG,e}return n.prototype.render=function(e){var r=this,i=_.getProperty(this.getOptions(),"points","enabled");if(!!i){var a=this.getComponentContainer({withinChartClip:!0}),o=this.getOptions(),s=o.data.groupMapsTo,u=Object.keys(o.axes).some(function(m){return o.axes[m].percentage}),l=this.model.getStackedData({groups:this.configs.groups,percentage:u}),c=a.selectAll("g.dots").data(l,function(m){return _.getProperty(m,0,s)});c.exit().attr("opacity",0).remove();var f=c.enter().append("g").classed("dots",!0).attr("role",st.GROUP),h=f.merge(c).selectAll("circle.dot").data(function(m){return m});h.exit().attr("opacity",0).remove();var d=h.enter().append("circle").classed("dot",!0).attr("opacity",0),p=d.merge(h).datum(function(m){var v,x=m[s],g=r.services.cartesianScales.getDomainIdentifier(m),y=r.services.cartesianScales.getRangeIdentifier(m);return v={},v[s]=x,v[g]=m.data.sharedStackKey,v[y]=m[1],v});this.styleCircles(p,e),this.addEventListeners()}},n.prototype.getTooltipData=function(e,r){var i=this,a=this.getOptions(),o=a.data.groupMapsTo,s=Object.keys(a.axes).some(function(c){return a.axes[c].percentage}),u=this.model.getStackedData({groups:this.configs.groups,percentage:s}),l=[];return u.forEach(function(c,f){c.forEach(function(h,d){var p,m=h[o],v=h.data.sharedStackKey,x=h.data[m],g=h[1],y=i.services.cartesianScales.getDomainIdentifier(h),T=i.services.cartesianScales.getRangeIdentifier(h);x!=null&&e===i.services.cartesianScales.getDomainValue(v)&&r===i.services.cartesianScales.getRangeValue(g)&&(s&&(x=i.model.getStackedData({groups:i.configs.groups})[f][d].data[m]),x!==null&&l.push((p={},p[o]=m,p[y]=v,p[T]=x,p)))})}),this.model.getDisplayData(this.configs.groups).filter(function(c){var f=i.services.cartesianScales.getDomainIdentifier(c),h=i.services.cartesianScales.getRangeIdentifier(c);return l.find(function(d){return d[o]==c[o]&&d[f]==c[f]&&d[h]==c[h]})!==void 0})},n}(ye),LP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function RP(t,n){var e=this,r=Er(this._current,t);return function(i){return e._current=r(i),n(e._current)}}var Qd=function(t){LP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="pie",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("path.slice").transition("legend-hover-bar").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-bar"})}).attr("opacity",function(o){return o.data[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("path.slice").transition("legend-mouseout-bar").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-bar"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.getInnerRadius=function(){return mt.innerRadius},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this,a=this.getComponentContainer(),o=this.getOptions(),s=o.data.groupMapsTo,u=o.pie.valueMapsTo,l=this.model.getDisplayData().filter(function(I){return I[u]>0}),c=this.computeRadius();this.arc=Nr().innerRadius(this.getInnerRadius()).outerRadius(c),this.hoverArc=Nr().innerRadius(this.getInnerRadius()).outerRadius(c+mt.hoverArc.outerRadiusOffset);var f=iE().value(function(I){return I[u]}).sort(_.getProperty(o,"pie","sortFunction")).padAngle(mt.padAngle),h=f(l),d=$.appendOrSelect(a,"g.slices").attr("role",st.GROUP).attr("data-name","slices"),p=d.selectAll("path.slice").data(h,function(I){return I.data[s]});p.exit().attr("opacity",0).remove();var m=p.enter().append("path").classed("slice",!0).attr("opacity",0),v=m.merge(p).attr("class",function(I){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:I.data[s],originalClassName:"slice"})}).style("fill",function(I){return i.model.getFillColor(I.data[s])}).attr("d",this.arc);v.transition().call(function(I){return r.services.transitions.setupTransition({transition:I,name:"pie_slice_enter_update",animate:e})}).attr("opacity",1).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","slice").attr("aria-label",function(I){return I[u]+", "+(_.convertValueToPercentage(I.data[u],l,u)+"%")}).attrTween("d",function(I){return RP.bind(this)(I,i.arc)});var x=o.pie.labels.enabled,g=x?h.filter(function(I){return I.data[u]>0}):[],y=$.appendOrSelect(a,"g.labels").attr("role",st.GROUP).attr("data-name","labels"),T=y.selectAll("text.pie-label").data(g,function(I){return I.data[s]});T.exit().attr("opacity",0).remove();var b=T.enter().append("text").classed("pie-label",!0),O=[];b.merge(T).style("text-anchor","middle").text(function(I){return o.pie.labels.formatter?o.pie.labels.formatter(I):_.convertValueToPercentage(I.data[u],l,u)+"%"}).datum(function(I){var E=c+7,A=(I.endAngle-I.startAngle)/2+I.startAngle,D=A/Math.PI*180,B=this.getComputedTextLength();return I.textOffsetX=B/2,I.textOffsetY=D>90&&D<270?10:0,I.xPosition=(I.textOffsetX+E)*Math.sin(A),I.yPosition=(I.textOffsetY+E)*-Math.cos(A),I}).attr("transform",function(I,E){var A=g.length,D=(I.endAngle-I.startAngle)*(180/Math.PI);if(E>=A-2&&D<mt.callout.minSliceDegree){var B=void 0,M=void 0;return I.index===A-1?(B=I.xPosition+mt.callout.offsetX+mt.callout.textMargin+I.textOffsetX,M=I.yPosition-mt.callout.offsetY,I.direction=ir.RIGHT,O.push(I)):(B=I.xPosition-mt.callout.offsetX-I.textOffsetX-mt.callout.textMargin,M=I.yPosition-mt.callout.offsetY,I.direction=ir.LEFT,O.push(I)),"translate("+B+", "+M+")"}return"translate("+I.xPosition+", "+I.yPosition+")"}),this.renderCallouts(O);var k=_.getProperty(o,"donut")?"donut":"pie",w=_.getProperty(o,k,"alignment"),S=$.getSVGElementSize(this.getParent(),{useAttrs:!0}).width,R=x?mt.xOffset:0,C=x?mt.yOffset:0,N=c+R;w===Lt.CENTER?N=S/2:w===Lt.RIGHT&&(N=S-c-mt.xOffset);var L=c+C;O.length>0&&(L+=mt.yOffsetCallout),a.attr("x",N+7).attr("y",L),this.addEventListeners()},n.prototype.renderCallouts=function(e){var r=$.appendOrSelect(this.getComponentContainer(),"g.callouts").attr("role",st.GROUP).attr("data-name","callouts"),i=r.selectAll("g.callout").data(e);i.exit().remove();var a=i.enter().append("g").classed("callout",!0).attr("role",st.GROUP).attr("aria-roledescription","label callout");a.merge(i).datum(function(u){var l=u.xPosition,c=u.yPosition,f=u.direction;return f===ir.RIGHT?(u.startPos={x:l,y:c+u.textOffsetY},u.endPos={x:l+mt.callout.offsetX,y:c-mt.callout.offsetY+u.textOffsetY},u.intersectPointX=u.endPos.x-mt.callout.horizontalLineLength):(u.startPos={x:l,y:c+u.textOffsetY},u.endPos={x:l-mt.callout.offsetX,y:c-mt.callout.offsetY+u.textOffsetY},u.intersectPointX=u.endPos.x+mt.callout.horizontalLineLength),u});var o=a.append("line").classed("vertical-line",!0);o.merge(r.selectAll("line.vertical-line")).datum(function(u){return V(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",function(u){return u.startPos.x}).attr("y1",function(u){return u.startPos.y}).attr("x2",function(u){return u.intersectPointX}).attr("y2",function(u){return u.endPos.y});var s=a.append("line").classed("horizontal-line",!0);s.merge(r.selectAll("line.horizontal-line")).datum(function(u){return V(this.parentNode).datum()}).style("stroke-width","1px").attr("x1",function(u){return u.intersectPointX}).attr("y1",function(u){return u.endPos.y}).attr("x2",function(u){return u.endPos.x}).attr("y2",function(u){return u.endPos.y})},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.slice").on("mouseover",function(r,i){var a=V(this);a.classed("hovered",!0).transition("pie_slice_mouseover").call(function(u){return e.services.transitions.setupTransition({transition:u,name:"pie_slice_mouseover"})}).attr("d",e.hoverArc),e.services.events.dispatchEvent(P.Pie.SLICE_MOUSEOVER,{event:r,element:V(this),datum:i});var o=e.getOptions().data.groupMapsTo,s=e.getOptions().pie.valueMapsTo;e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:r,hoveredElement:a,items:[{label:i.data[o],value:i.data[s]}]})}).on("mousemove",function(r,i){var a=V(this);e.services.events.dispatchEvent(P.Pie.SLICE_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(P.Pie.SLICE_CLICK,{event:r,element:V(this),datum:i})}).on("mouseout",function(r,i){var a=V(this);a.classed("hovered",!1).transition("pie_slice_mouseout").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"pie_slice_mouseout"})}).attr("d",e.arc),e.services.events.dispatchEvent(P.Pie.SLICE_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:a})})},n.prototype.computeRadius=function(){var e=$.getSVGElementSize(this.parent,{useAttrs:!0}),r=e.width,i=e.height,a=this.getOptions(),o=Math.min(r,i)/2,s=a.pie.labels.enabled;return s?o+mt.radiusOffset:o},n}(ft),kP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jd="4,10 8,6 12,10",tp="12,6 8,10 4,6",IP=function(t){kP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="gauge",e.renderType=it.SVG,e}return n.prototype.getValue=function(){var e,r,i=this.model.getData(),a=(r=(e=i.find(function(o){return o.group==="value"}))===null||e===void 0?void 0:e.value,r!=null?r:null);return a},n.prototype.getValueRatio=function(){var e=_.clamp(this.getValue(),0,100);return e/100},n.prototype.getDelta=function(){var e,r,i=this.model.getData(),a=(r=(e=i.find(function(o){return o.group==="delta"}))===null||e===void 0?void 0:e.value,r!=null?r:null);return a},n.prototype.getArcRatio=function(){var e=this.getOptions(),r=_.getProperty(e,"gauge","type"),i=r===qe.FULL?1:.5;return i},n.prototype.getArcSize=function(){return this.getArcRatio()*Math.PI*2},n.prototype.getStartAngle=function(){var e=this.getArcSize();return e===2*Math.PI?0:-e/2},n.prototype.getArrow=function(e){var r=this.getOptions(),i=_.getProperty(r,"gauge","deltaArrow","direction");switch(i){case oi.UP:return Jd;case oi.DOWN:return tp;default:return e>0?Jd:tp}},n.prototype.render=function(e){var r=this,i=this.getComponentContainer().attr("width","100%").attr("height","100%"),a=this.getOptions(),o=this.getValue(),s=this.getValueRatio(),u=this.getArcSize(),l=this.getStartAngle(),c=s*u,f=l+c,h=l+u,d=this.computeRadius(),p=this.getInnerRadius();this.backgroundArc=Nr().innerRadius(p).outerRadius(d).startAngle(f).endAngle(h),this.arc=Nr().innerRadius(p).outerRadius(d).startAngle(l).endAngle(f),$.appendOrSelect(i,"path.arc-background").attr("d",this.backgroundArc);var m=i.selectAll("path.arc-foreground").data([o]),v=m.enter().append("path");v.merge(m).attr("class",this.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:"value",originalClassName:"arc-foreground"})).style("fill",function(T){return _.getProperty(r.getOptions(),"color","scale","value")}).attr("d",this.arc).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",function(T){return T}),this.drawValueNumber(),this.drawDelta(),m.exit().remove();var x=_.getProperty(a,"gauge","alignment"),g=$.getSVGElementSize(this.getParent(),{useAttrs:!0}).width,y=d;x===Lt.CENTER?y=g/2:x===Lt.RIGHT&&(y=g-d),i.attr("x",y).attr("y",d),this.addEventListeners()},n.prototype.drawValueNumber=function(){var e=this.getComponentContainer(),r=this.getOptions(),i=_.getProperty(r,"gauge","type"),a=this.getValue(),o=this.getDelta(),s=this.computeRadius(),u=_.getProperty(r,"gauge","valueFontSize"),l=_.getProperty(r,"gauge","deltaFontSize"),c=_.getProperty(r,"gauge","numberSpacing"),f=_.getProperty(r,"gauge","showPercentageSymbol"),h=0;i===qe.FULL&&!o?h=l(s):i===qe.SEMI&&o&&(h=-(l(s)+c));var d=$.appendOrSelect(e,"g.gauge-numbers").attr("transform","translate(0, "+h+")"),p=u(s),m=$.appendOrSelect(d,"g.gauge-value-number"),v=_.getProperty(r,"gauge","numberFormatter"),x=m.selectAll("text.gauge-value-number").data([a]);x.enter().append("text").attr("class","gauge-value-number").merge(x).style("font-size",p+"px").attr("text-anchor","middle").text(function(S){return v(S)});var g=$.getSVGElementSize($.appendOrSelect(e,"text.gauge-value-number"),{useBBox:!0}).width,y=p/2,T=f?"%":"",b=$.appendOrSelect(m,"text.gauge-value-symbol").style("font-size",y+"px").attr("x",g/2).text(T),O=$.getSVGElementSize(b,{useBBox:!0}),k=O.width,w=O.height;b.attr("y","-"+w/2+"px"),m.attr("transform","translate(-"+k/2+", 0)")},n.prototype.drawDelta=function(){var e=this,r=this.getComponentContainer(),i=this.getOptions(),a=this.getDelta(),o=this.computeRadius(),s=a?_.getProperty(i,"gauge","deltaFontSize"):function(){return 0},u=a?_.getProperty(i,"gauge","numberFormatter"):function(){return null},l=_.getProperty(i,"gauge","deltaArrow","size"),c=_.getProperty(i,"gauge","numberSpacing"),f=_.getProperty(i,"gauge","showPercentageSymbol"),h=$.appendOrSelect(r,"g.gauge-numbers"),d=$.appendOrSelect(h,"g.gauge-delta").attr("transform","translate(0, "+(s(o)+c)+")"),p=$.appendOrSelect(d,"text.gauge-delta-number"),m=f?"%":"";p.data(a===null?[]:[a]),p.enter().append("text").classed("gauge-delta-number",!0).merge(p).attr("text-anchor","middle").style("font-size",s(o)+"px").text(function(y){return""+u(y)+m});var v=$.getSVGElementSize($.appendOrSelect(r,".gauge-delta-number"),{useBBox:!0}).width,x=_.getProperty(i,"gauge","deltaArrow","enabled"),g=d.selectAll("svg.gauge-delta-arrow").data(a!==null&&x?[a]:[]);g.enter().append("svg").merge(g).attr("class","gauge-delta-arrow").attr("x",-l(o)-v/2).attr("y",-l(o)/2-s(o)*.35).attr("width",l(o)).attr("height",l(o)).attr("viewBox","0 0 16 16").each(function(){var y=V(this);$.appendOrSelect(y,"rect.gauge-delta-arrow-backdrop").attr("width","16").attr("height","16").attr("fill","none");var T=_.getProperty(i,"gauge","status");$.appendOrSelect(y,"polygon.gauge-delta-arrow").attr("class",T!==null?"gauge-delta-arrow status--"+T:"").attr("points",e.getArrow(a))}),g.exit().remove(),p.exit().remove()},n.prototype.getInnerRadius=function(){var e=this.computeRadius(),r=_.getProperty(this.getOptions(),"gauge","arcWidth");return e-r},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("path.arc-foreground").on("mouseover",function(r,i){e.services.events.dispatchEvent(P.Gauge.ARC_MOUSEOVER,{event:r,element:V(this),datum:i})}).on("mousemove",function(r,i){var a=V(this);e.services.events.dispatchEvent(P.Gauge.ARC_MOUSEMOVE,{event:r,element:a,datum:i})}).on("click",function(r,i){e.services.events.dispatchEvent(P.Gauge.ARC_CLICK,{event:r,element:V(this),datum:i})}).on("mouseout",function(r,i){var a=V(this);e.services.events.dispatchEvent(P.Gauge.ARC_MOUSEOUT,{event:r,element:a,datum:i})})},n.prototype.computeRadius=function(){var e=this.getOptions(),r=_.getProperty(e,"gauge","type"),i=$.getSVGElementSize(this.parent,{useAttrs:!0}),a=i.width,o=i.height,s=r===qe.SEMI?Math.min(a/2,o):Math.min(a/2,o/2);return s},n}(ft),NP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),BP=function(t){NP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="donut",e.renderType=it.SVG,e}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!0),t.prototype.render.call(this,e);var i=this;if(this.model.isDataEmpty()){this.getComponentContainer().select("g.center").remove();return}var a=$.appendOrSelect(this.getComponentContainer(),"g.center"),o=this.getOptions(),s=this.computeRadius(),u=_.getProperty(o,"donut","center","label");$.appendOrSelect(a,"text.donut-figure").attr("text-anchor","middle").style("dominant-baseline",function(){return u===null||u===""?"central":"initial"}).style("font-size",function(){return o.donut.center.numberFontSize(s)}).transition().call(function(l){return r.services.transitions.setupTransition({transition:l,name:"donut-figure-enter-update",animate:e})}).tween("text",function(){return i.centerNumberTween(V(this))}),u!==null&&u!==""&&$.appendOrSelect(a,"text.donut-title").attr("text-anchor","middle").style("font-size",function(){return o.donut.center.titleFontSize(s)}).attr("y",o.donut.center.titleYPosition(s)).text(u)},n.prototype.getInnerRadius=function(){var e=this.computeRadius();return e*(3/4)},n.prototype.centerNumberTween=function(e){var r=this.getOptions(),i=_.getProperty(r,"donut","center","number");i===null&&(i=this.model.getDisplayData().reduce(function(u,l){return u+l[r.pie.valueMapsTo]},0));var a=parseInt(e.text().replace(/[, ]+/g,""),10)||0,o;a%1==0&&i%1==0?o=Xf:o=re;var s=o(a,i);return function(u){var l=r.donut.center.numberFormatter;e.text(l(s(u)))}},n}(Qd),UP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zt=function(t){UP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="skeleton",e}return n.prototype.render=function(){var e=_.getProperty(this.getOptions(),"data","loading");e?this.renderSkeleton(e):this.removeSkeleton()},n.prototype.renderSkeleton=function(e){if(this.configs.skeleton===Mt.GRID)this.renderGridSkeleton(e);else if(this.configs.skeleton===Mt.VERT_OR_HORIZ)this.renderVertOrHorizSkeleton(e);else if(this.configs.skeleton===Mt.PIE)this.renderPieSkeleton(e);else if(this.configs.skeleton===Mt.DONUT)this.renderDonutSkeleton(e);else throw new Error('"'+this.configs.skeleton+'" is not a valid Skeleton type.')},n.prototype.renderGridSkeleton=function(e){this.setScales(),this.drawBackdrop(e),this.drawXGrid(e),this.drawYGrid(e),e&&this.setShimmerEffect("shimmer-lines")},n.prototype.renderVertOrHorizSkeleton=function(e){var r=this.services.cartesianScales.getOrientation();this.setScales(),this.drawBackdrop(e),r===At.VERTICAL&&this.drawYGrid(e),r===At.HORIZONTAL&&this.drawXGrid(e),this.setShimmerEffect("shimmer-lines")},n.prototype.renderPieSkeleton=function(e){var r=this.computeOuterRadius(),i=0;this.drawRing(r,i,e),e&&this.setShimmerEffect("shimmer-areas")},n.prototype.renderDonutSkeleton=function(e){var r=this.computeOuterRadius(),i=this.computeInnerRadius();this.drawRing(r,i,e),e&&this.setShimmerEffect("shimmer-areas")},n.prototype.setScales=function(){var e=this.services.cartesianScales.getMainXScale().range(),r=this.services.cartesianScales.getMainYScale().range();this.xScale=Be().domain([0,1]).range(e),this.yScale=Be().domain([0,1]).range(r)},n.prototype.drawBackdrop=function(e){var r=this.parent,i=$.getSVGElementSize(r,{useAttrs:!0}),a=i.width,o=i.height;this.backdrop=$.appendOrSelect(r,"svg.chart-skeleton.DAII").attr("width",a).attr("height",o);var s=$.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");s.attr("width","100%").attr("height","100%");var u=this.xScale.range(),l=u[0];u[1];var c=this.yScale.range();c[0];var f=c[1];this.backdrop.merge(s).attr("x",l).attr("y",f),s.classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.drawXGrid=function(e){var r=this.backdrop.attr("width"),i=_.getProperty(this.getOptions(),"grid","x","numberOfTicks"),a=this.xScale.ticks(i).map(function(u){return u*r}),o=$.appendOrSelect(this.backdrop,"g.x.skeleton"),s=o.selectAll("line").data(a);s.enter().append("line").merge(s).attr("x1",function(u){return u}).attr("x2",function(u){return u}).attr("y1",0).attr("y2","100%"),o.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.drawYGrid=function(e){var r=this.backdrop.attr("height"),i=this.backdrop.attr("width"),a=_.getProperty(this.getOptions(),"grid","y","numberOfTicks"),o=this.xScale.ticks(a).map(function(l){return l*r}),s=$.appendOrSelect(this.backdrop,"g.y.skeleton"),u=s.selectAll("line").data(o);u.enter().append("line").merge(u).attr("x1",0).attr("x2",i).attr("y1",function(l){return l}).attr("y2",function(l){return l}),s.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.drawRing=function(e,r,i){i===void 0&&(i=!0);var a=this.parent,o=$.getSVGElementSize(a,{useAttrs:!0}),s=o.width,u=o.height,l=$.appendOrSelect(a,"svg.chart-skeleton").attr("width",s).attr("height",u),c=r===0?"pie":"donut",f=_.getProperty(this.getOptions(),c,"alignment");$.appendOrSelect(l,"rect.chart-skeleton-area-container").attr("width",s).attr("height",u).attr("fill","none");var h=Nr().innerRadius(r).outerRadius(e).startAngle(0).endAngle(Math.PI*2),d=e+Math.abs(mt.radiusOffset),p=e+(Math.min(s,u)-e*2)/2,m=$.appendOrSelect(l,"path").attr("class","skeleton-area-shape").attr("transform","translate("+d+", "+p+")").attr("d",h).classed("shimmer-effect-areas",i).classed("empty-state-areas",!i).style("fill",i?"url(#"+this.services.domUtils.generateElementIDString("shimmer-areas")+")":null),v=e+mt.xOffset;f===Lt.CENTER?v=s/2:f===Lt.RIGHT&&(v=s-e-mt.xOffset);var x=e+mt.yOffset;m.attr("transform","translate("+v+", "+x+")")},n.prototype.computeOuterRadius=function(){var e=$.getSVGElementSize(this.parent,{useAttrs:!0}),r=e.width,i=e.height,a=Math.min(r,i)/2;return a+mt.radiusOffset},n.prototype.computeInnerRadius=function(){return this.computeOuterRadius()*(3/4)},n.prototype.setShimmerEffect=function(e){var r=2e3,i=1e3,a=.2,o="stop-bg-shimmer",s="stop-shimmer",u=this.parent.select(".chart-skeleton"),l=$.getSVGElementSize(this.parent,{useAttrs:!0}).width,c=0,f=l,h=$.appendOrSelect(u,"defs").lower(),d=$.appendOrSelect(h,"linearGradient").attr("id",this.services.domUtils.generateElementIDString(e)).attr("class",e).attr("x1",c-3*a*l).attr("x2",f).attr("y1",0).attr("y2",0).attr("gradientUnits","userSpaceOnUse").attr("gradientTransform","translate(0, 0)"),p=`
			<stop class="`+o+'" offset="'+c+`"></stop>
			<stop class="`+s+'" offset="'+(c+a)+`"></stop>
			<stop class="`+o+'" offset="'+(c+2*a)+`"></stop>
		`;d.html(p),m();function m(){d.attr("gradientTransform","translate("+(c-3*a*l)+", 0)").transition().duration(r).delay(i).ease(Dv).attr("gradientTransform","translate("+(f+3*a*l)+", 0)").on("end",m)}},n.prototype.removeSkeleton=function(){var e=this.parent.select(".chart-skeleton");e.remove()},n}(ft),VP=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$P=function(t){VP(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="skeleton-lines",e}return n.prototype.render=function(){var e=_.getProperty(this.getOptions(),"data","loading"),r=!_.getProperty(this.getOptions(),"grid","x","enabled")&&!_.getProperty(this.getOptions(),"grid","y","enabled")&&!_.getProperty(this.getOptions(),"axes","bottom","visible")&&!_.getProperty(this.getOptions(),"axes","left","visible");e&&!r?t.prototype.renderGridSkeleton.call(this,e):e&&r?this.renderSparklineSkeleton(e):this.removeSkeleton()},n.prototype.renderSparklineSkeleton=function(e){this.setScales(),this.drawBackdrop(e),this.drawSparkline(e),this.updateBackdropStyle(),e&&this.setShimmerEffect("shimmer-lines")},n.prototype.drawSparkline=function(e){var r=this.backdrop.attr("width"),i=[100],a=$.appendOrSelect(this.backdrop,"g.y.skeleton"),o=a.selectAll("line").data(i);o.enter().append("line").merge(o).attr("x1",0).attr("x2",r).attr("y1",function(s){return s}).attr("y2",function(s){return s}),a.selectAll("line").classed("shimmer-effect-lines",e).classed("empty-state-lines",!e).style("stroke",e?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.updateBackdropStyle=function(){var e=this.parent;this.backdrop=$.appendOrSelect(e,"svg.chart-skeleton.DAII");var r=$.appendOrSelect(this.backdrop,"rect.chart-skeleton-backdrop");r.classed("shimmer-effect-lines",!1).classed("shimmer-effect-sparkline",!0).style("stroke",null)},n}(zt);function GP(t,n){return t.parent===n.parent?1:2}function FP(t){return t.reduce(HP,0)/t.length}function HP(t,n){return t+n.x}function zP(t){return 1+t.reduce(WP,0)}function WP(t,n){return Math.max(t,n.y)}function jP(t){for(var n;n=t.children;)t=n[0];return t}function qP(t){for(var n;n=t.children;)t=n[n.length-1];return t}function YP(){var t=GP,n=1,e=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(h){var d=h.children;d?(h.x=FP(d),h.y=zP(d)):(h.x=o?s+=t(h,o):0,h.y=0,o=h)});var u=jP(a),l=qP(a),c=u.x-t(u,l)/2,f=l.x+t(l,u)/2;return a.eachAfter(r?function(h){h.x=(h.x-a.x)*n,h.y=(a.y-h.y)*e}:function(h){h.x=(h.x-c)/(f-c)*n,h.y=(1-(a.y?h.y/a.y:1))*e})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,n=+a[0],e=+a[1],i):r?null:[n,e]},i.nodeSize=function(a){return arguments.length?(r=!0,n=+a[0],e=+a[1],i):r?[n,e]:null},i}function XP(t){var n=0,e=t.children,r=e&&e.length;if(!r)n=1;else for(;--r>=0;)n+=e[r].value;t.value=n}function ZP(){return this.eachAfter(XP)}function KP(t,n){let e=-1;for(const r of this)t.call(n,r,++e,this);return this}function QP(t,n){for(var e=this,r=[e],i,a,o=-1;e=r.pop();)if(t.call(n,e,++o,this),i=e.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function JP(t,n){for(var e=this,r=[e],i=[],a,o,s,u=-1;e=r.pop();)if(i.push(e),a=e.children)for(o=0,s=a.length;o<s;++o)r.push(a[o]);for(;e=i.pop();)t.call(n,e,++u,this);return this}function t2(t,n){let e=-1;for(const r of this)if(t.call(n,r,++e,this))return r}function e2(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})}function n2(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})}function r2(t){for(var n=this,e=i2(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r}function i2(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}function a2(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n}function o2(){return Array.from(this)}function s2(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t}function u2(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n}function*l2(){var t=this,n,e=[t],r,i,a;do for(n=e.reverse(),e=[];t=n.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)e.push(r[i]);while(e.length)}function Fr(t,n){t instanceof Map?(t=[void 0,t],n===void 0&&(n=h2)):n===void 0&&(n=f2);for(var e=new Hr(t),r,i=[e],a,o,s,u;r=i.pop();)if((o=n(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,s=u-1;s>=0;--s)i.push(a=o[s]=new Hr(o[s])),a.parent=r,a.depth=r.depth+1;return e.eachBefore(p2)}function c2(){return Fr(this).eachBefore(d2)}function f2(t){return t.children}function h2(t){return Array.isArray(t)?t[1]:null}function d2(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function p2(t){var n=0;do t.height=n;while((t=t.parent)&&t.height<++n)}function Hr(t){this.data=t,this.depth=this.height=0,this.parent=null}Hr.prototype=Fr.prototype={constructor:Hr,count:ZP,each:KP,eachAfter:JP,eachBefore:QP,find:t2,sum:e2,sort:n2,path:r2,ancestors:a2,descendants:o2,leaves:s2,links:u2,copy:c2,[Symbol.iterator]:l2};function v2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function g2(t){for(var n=t.length,e,r;n;)r=Math.random()*n--|0,e=t[n],t[n]=t[r],t[r]=e;return t}function m2(t){for(var n=0,e=(t=g2(Array.from(t))).length,r=[],i,a;n<e;)i=t[n],a&&ep(a,i)?++n:(a=_2(r=y2(r,i)),n=0);return a}function y2(t,n){var e,r;if(Eu(n,t))return[n];for(e=0;e<t.length;++e)if(ya(n,t[e])&&Eu(zr(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(ya(zr(t[e],t[r]),n)&&ya(zr(t[e],n),t[r])&&ya(zr(t[r],n),t[e])&&Eu(np(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function ya(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function ep(t,n){var e=t.r-n.r+Math.max(t.r,n.r,1)*1e-9,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Eu(t,n){for(var e=0;e<n.length;++e)if(!ep(t,n[e]))return!1;return!0}function _2(t){switch(t.length){case 1:return x2(t[0]);case 2:return zr(t[0],t[1]);case 3:return np(t[0],t[1],t[2])}}function x2(t){return{x:t.x,y:t.y,r:t.r}}function zr(t,n){var e=t.x,r=t.y,i=t.r,a=n.x,o=n.y,s=n.r,u=a-e,l=o-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(e+a+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+s)/2}}function np(t,n,e){var r=t.x,i=t.y,a=t.r,o=n.x,s=n.y,u=n.r,l=e.x,c=e.y,f=e.r,h=r-o,d=r-l,p=i-s,m=i-c,v=u-a,x=f-a,g=r*r+i*i-a*a,y=g-o*o-s*s+u*u,T=g-l*l-c*c+f*f,b=d*p-h*m,O=(p*T-m*y)/(b*2)-r,k=(m*v-p*x)/b,w=(d*y-h*T)/(b*2)-i,S=(h*x-d*v)/b,R=k*k+S*S-1,C=2*(a+O*k+w*S),N=O*O+w*w-a*a,L=-(R?(C+Math.sqrt(C*C-4*R*N))/(2*R):N/C);return{x:r+O+k*L,y:i+w+S*L,r:L}}function rp(t,n,e){var r=t.x-n.x,i,a,o=t.y-n.y,s,u,l=r*r+o*o;l?(a=n.r+e.r,a*=a,u=t.r+e.r,u*=u,a>u?(i=(l+u-a)/(2*l),s=Math.sqrt(Math.max(0,u/l-i*i)),e.x=t.x-i*r-s*o,e.y=t.y-i*o+s*r):(i=(l+a-u)/(2*l),s=Math.sqrt(Math.max(0,a/l-i*i)),e.x=n.x+i*r-s*o,e.y=n.y+i*o+s*r)):(e.x=n.x+e.r,e.y=n.y)}function ip(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function ap(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,a=(n.y*e.r+e.y*n.r)/r;return i*i+a*a}function _a(t){this._=t,this.next=null,this.previous=null}function b2(t){if(!(i=(t=v2(t)).length))return 0;var n,e,r,i,a,o,s,u,l,c,f;if(n=t[0],n.x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;rp(e,n,r=t[2]),n=new _a(n),e=new _a(e),r=new _a(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(s=3;s<i;++s){rp(n._,e._,r=t[s]),r=new _a(r),u=e.next,l=n.previous,c=e._.r,f=n._.r;do if(c<=f){if(ip(u._,r._)){e=u,n.next=e,e.previous=n,--s;continue t}c+=u._.r,u=u.next}else{if(ip(l._,r._)){n=l,n.next=e,e.previous=n,--s;continue t}f+=l._.r,l=l.previous}while(u!==l.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,a=ap(n);(r=r.next)!==e;)(o=ap(r))<a&&(n=r,a=o);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=m2(n),s=0;s<i;++s)n=t[s],n.x-=r.x,n.y-=r.y;return r.r}function O2(t){return t==null?null:op(t)}function op(t){if(typeof t!="function")throw new Error;return t}function pn(){return 0}function zn(t){return function(){return t}}function T2(t){return Math.sqrt(t.value)}function w2(){var t=null,n=1,e=1,r=pn;function i(a){return a.x=n/2,a.y=e/2,t?a.eachBefore(sp(t)).eachAfter(Mu(r,.5)).eachBefore(up(1)):a.eachBefore(sp(T2)).eachAfter(Mu(pn,1)).eachAfter(Mu(r,a.r/Math.min(n,e))).eachBefore(up(Math.min(n,e)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=O2(a),i):t},i.size=function(a){return arguments.length?(n=+a[0],e=+a[1],i):[n,e]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:zn(+a),i):r},i}function sp(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Mu(t,n){return function(e){if(r=e.children){var r,i,a=r.length,o=t(e)*n||0,s;if(o)for(i=0;i<a;++i)r[i].r+=o;if(s=b2(r),o)for(i=0;i<a;++i)r[i].r-=o;e.r=s+o}}}function up(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function S2(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function E2(t,n,e,r,i){for(var a=t.children,o,s=-1,u=a.length,l=t.value&&(r-n)/t.value;++s<u;)o=a[s],o.y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*l}function M2(t,n){return t.parent===n.parent?1:2}function Cu(t){var n=t.children;return n?n[0]:t.t}function Au(t){var n=t.children;return n?n[n.length-1]:t.t}function C2(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function A2(t){for(var n=0,e=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=n,a.m+=n,n+=a.s+(e+=a.c)}function P2(t,n,e){return t.a.parent===n.parent?t.a:e}function xa(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}xa.prototype=Object.create(Hr.prototype);function D2(t){for(var n=new xa(t,0),e,r=[n],i,a,o,s;e=r.pop();)if(a=e._.children)for(e.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=e.children[o]=new xa(a[o],o)),i.parent=e;return(n.parent=new xa(null,0)).children=[n],n}function L2(){var t=M2,n=1,e=1,r=null;function i(l){var c=D2(l);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,h=l,d=l;l.eachBefore(function(g){g.x<f.x&&(f=g),g.x>h.x&&(h=g),g.depth>d.depth&&(d=g)});var p=f===h?1:t(f,h)/2,m=p-f.x,v=n/(h.x+p+m),x=e/(d.depth||1);l.eachBefore(function(g){g.x=(g.x+m)*v,g.y=g.depth*x})}return l}function a(l){var c=l.children,f=l.parent.children,h=l.i?f[l.i-1]:null;if(c){A2(l);var d=(c[0].z+c[c.length-1].z)/2;h?(l.z=h.z+t(l._,h._),l.m=l.z-d):l.z=d}else h&&(l.z=h.z+t(l._,h._));l.parent.A=s(l,h,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,c,f){if(c){for(var h=l,d=l,p=c,m=h.parent.children[0],v=h.m,x=d.m,g=p.m,y=m.m,T;p=Au(p),h=Cu(h),p&&h;)m=Cu(m),d=Au(d),d.a=l,T=p.z+g-h.z-v+t(p._,h._),T>0&&(C2(P2(p,l,f),l,T),v+=T,x+=T),g+=p.m,v+=h.m,y+=m.m,x+=d.m;p&&!Au(d)&&(d.t=p,d.m+=g-x),h&&!Cu(m)&&(m.t=h,m.m+=v-y,f=l)}return f}function u(l){l.x*=n,l.y=l.depth*e}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(r=!1,n=+l[0],e=+l[1],i):r?null:[n,e]},i.nodeSize=function(l){return arguments.length?(r=!0,n=+l[0],e=+l[1],i):r?[n,e]:null},i}function R2(t,n,e,r,i){for(var a=t.children,o,s=-1,u=a.length,l=t.value&&(i-e)/t.value;++s<u;)o=a[s],o.x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*l}var k2=(1+Math.sqrt(5))/2;function I2(t,n,e,r,i,a){for(var o=[],s=n.children,u,l,c=0,f=0,h=s.length,d,p,m=n.value,v,x,g,y,T,b,O;c<h;){d=i-e,p=a-r;do v=s[f++].value;while(!v&&f<h);for(x=g=v,b=Math.max(p/d,d/p)/(m*t),O=v*v*b,T=Math.max(g/O,O/x);f<h;++f){if(v+=l=s[f].value,l<x&&(x=l),l>g&&(g=l),O=v*v*b,y=Math.max(g/O,O/x),y>T){v-=l;break}T=y}o.push(u={value:v,dice:d<p,children:s.slice(c,f)}),u.dice?E2(u,e,r,i,m?r+=p*v/m:a):R2(u,e,r,m?e+=d*v/m:i,a),m-=v,c=f}return o}var N2=function t(n){function e(r,i,a,o,s){I2(n,r,i,a,o,s)}return e.ratio=function(r){return t((r=+r)>1?r:1)},e}(k2);function B2(){var t=N2,n=!1,e=1,r=1,i=[0],a=pn,o=pn,s=pn,u=pn,l=pn;function c(h){return h.x0=h.y0=0,h.x1=e,h.y1=r,h.eachBefore(f),i=[0],n&&h.eachBefore(S2),h}function f(h){var d=i[h.depth],p=h.x0+d,m=h.y0+d,v=h.x1-d,x=h.y1-d;v<p&&(p=v=(p+v)/2),x<m&&(m=x=(m+x)/2),h.x0=p,h.y0=m,h.x1=v,h.y1=x,h.children&&(d=i[h.depth+1]=a(h)/2,p+=l(h)-d,m+=o(h)-d,v-=s(h)-d,x-=u(h)-d,v<p&&(p=v=(p+v)/2),x<m&&(m=x=(m+x)/2),t(h,p,m,v,x))}return c.round=function(h){return arguments.length?(n=!!h,c):n},c.size=function(h){return arguments.length?(e=+h[0],r=+h[1],c):[e,r]},c.tile=function(h){return arguments.length?(t=op(h),c):t},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(a=typeof h=="function"?h:zn(+h),c):a},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:zn(+h),c):o},c.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:zn(+h),c):s},c.paddingBottom=function(h){return arguments.length?(u=typeof h=="function"?h:zn(+h),c):u},c.paddingLeft=function(h){return arguments.length?(l=typeof h=="function"?h:zn(+h),c):l},c}var U2=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wn=6,V2=function(t){U2(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="tree",e.renderType=it.SVG,e}return n.prototype.getLongestLabel=function(e){var r=this,i="";return e.forEach(function(a){var o=a.children?r.getLongestLabel(a.children):"";(o.length>i.length||a.name.length>i.length)&&(i=o.length>a.name.length?o:a.name)}),i},n.prototype.getMockLabelWidth=function(e,r){var i=e.append("text").attr("dy","0.31em").attr("x",0).attr("text-anchor","end").text(r),a=$.getSVGElementSize(i.node(),{useBBox:!0}).width;return i.remove(),a},n.prototype.render=function(e){var r=this,i=this.getComponentContainer();i.html("");var a=$.getSVGElementSize(this.parent,{useAttrs:!0}),o=a.width,s=a.height;if(!(o<1||s<1)){var u=this.model.getOptions(),l=this.model.getDisplayData(),c=_.getProperty(u,"tree","rootTitle")||"Tree",f=this.getMockLabelWidth(i,c),h=this.getLongestLabel(l),d=this.getMockLabelWidth(i,h),p={top:0,right:0,bottom:0,left:f>0?f+Wn:30-Wn},m=Fr({name:c,children:l}),v=10,x=o/6,g=function(S){var R=m.descendants().reverse(),C=m.links(),N=m,L=m;m.eachBefore(function(G){G.x<N.x&&(N=G),G.x>L.x&&(L=G)});var I=L.x-N.x,E=i.transition().call(function(G){return r.services.transitions.setupTransition({transition:G,name:"tree-update-viewbox",animate:!0})}).attr("viewBox",[-p.left,N.x,o,I]),A=w.selectAll("g").data(R,function(G){return G.id}),D=r,B=A.enter().append("g").attr("transform",function(){return"translate("+S.y0+","+S.x0+")"}).attr("class",function(G){return G.depth!==0&&G.children&&G.children.length>0?"clickable":null}).on("mouseover",function(G,q){D.services.events.dispatchEvent(P.Tree.NODE_MOUSEOVER,{event:G,element:V(this),datum:q})}).on("click",function(G,q){q.depth!==0&&(q.children=q.children?null:q._children,g(q)),D.services.events.dispatchEvent(P.Tree.NODE_CLICK,{event:G,element:V(this),datum:q})}).on("mouseout",function(G,q){D.services.events.dispatchEvent(P.Tree.NODE_MOUSEOUT,{event:G,element:V(this),datum:q})});B.append("circle").attr("r",2.5).attr("class",function(G){return G._children?"parent":"child"}).attr("stroke-width",10),B.append("text").attr("dy","0.31em").attr("x",function(G){return G._children?-Wn:Wn}).attr("text-anchor",function(G){return G._children?"end":"start"}).text(function(G){return G.data.name}).clone(!0).attr("class","text-stroke").lower(),A.merge(B).transition(E).attr("transform",function(G){return"translate("+G.y+","+G.x+")"}).attr("fill-opacity",1).attr("stroke-opacity",1),A.exit().transition(E).remove().attr("transform",function(){return"translate("+S.y+","+S.x+")"}).attr("fill-opacity",0).attr("stroke-opacity",0);var M=k.selectAll("path").data(C,function(G){return G.target.id}),U=M.enter().append("path").attr("d",function(G){var q={x:S.x0,y:S.y0};return O({source:q,target:q})});M.merge(U).transition(E).attr("d",O),M.exit().transition(E).remove().attr("d",function(){var G={x:S.x,y:S.y};return O({source:G,target:G})}),m.eachBefore(function(G){G.x0=G.x,G.y0=G.y})},y=m.descendants(),T=y[y.length-1].depth,b=_.getProperty(u,"tree","type")===ai.DENDROGRAM?YP().size([s,o-d-T*Wn-f]):L2().nodeSize([v,x]).size([s,o-d-T*Wn-f]),O=hE().x(function(S){return S.y}).y(function(S){return S.x});m.x0=x/2,m.y0=0,m.descendants().forEach(function(S,R){S.id=R,S._children=S.children}),b(m),i.attr("viewBox",[-p.left,-p.top,o,v]).style("user-select","none");var k=i.append("g").attr("class","links"),w=i.append("g").attr("class","nodes");g(m)}},n}(ft),$2="#000000",G2="#ffffff",F2="#fcf4d6",H2="#fddc69",z2="#f1c21b",W2="#d2a106",j2="#b28600",q2="#8e6a00",Y2="#684e00",X2="#483700",Z2="#302400",K2="#1c1500",Q2={10:F2,20:H2,30:z2,40:W2,50:j2,60:q2,70:Y2,80:X2,90:Z2,100:K2},J2="#fff2e8",tD="#ffd9be",eD="#ffb784",nD="#ff832b",rD="#eb6200",iD="#ba4e00",aD="#8a3800",oD="#5e2900",sD="#3e1a00",uD="#231000",lD={10:J2,20:tD,30:eD,40:nD,50:rD,60:iD,70:aD,80:oD,90:sD,100:uD},cD="#fff1f1",fD="#ffd7d9",hD="#ffb3b8",dD="#ff8389",pD="#fa4d56",vD="#da1e28",gD="#a2191f",mD="#750e13",yD="#520408",_D="#2d0709",xD={10:cD,20:fD,30:hD,40:dD,50:pD,60:vD,70:gD,80:mD,90:yD,100:_D},bD="#fff0f7",OD="#ffd6e8",TD="#ffafd2",wD="#ff7eb6",SD="#ee5396",ED="#d02670",MD="#9f1853",CD="#740937",AD="#510224",PD="#2a0a18",DD={10:bD,20:OD,30:TD,40:wD,50:SD,60:ED,70:MD,80:CD,90:AD,100:PD},LD="#f6f2ff",RD="#e8daff",kD="#d4bbff",ID="#be95ff",ND="#a56eff",BD="#8a3ffc",UD="#6929c4",VD="#491d8b",$D="#31135e",GD="#1c0f30",FD={10:LD,20:RD,30:kD,40:ID,50:ND,60:BD,70:UD,80:VD,90:$D,100:GD},HD="#edf5ff",zD="#d0e2ff",WD="#a6c8ff",jD="#78a9ff",qD="#4589ff",YD="#0f62fe",XD="#0043ce",ZD="#002d9c",KD="#001d6c",QD="#001141",JD={10:HD,20:zD,30:WD,40:jD,50:qD,60:YD,70:XD,80:ZD,90:KD,100:QD},tL="#e5f6ff",eL="#bae6ff",nL="#82cfff",rL="#33b1ff",iL="#1192e8",aL="#0072c3",oL="#00539a",sL="#003a6d",uL="#012749",lL="#061727",cL={10:tL,20:eL,30:nL,40:rL,50:iL,60:aL,70:oL,80:sL,90:uL,100:lL},fL="#d9fbfb",hL="#9ef0f0",dL="#3ddbd9",pL="#08bdba",vL="#009d9a",gL="#007d79",mL="#005d5d",yL="#004144",_L="#022b30",xL="#081a1c",bL={10:fL,20:hL,30:dL,40:pL,50:vL,60:gL,70:mL,80:yL,90:_L,100:xL},OL="#defbe6",TL="#a7f0ba",wL="#6fdc8c",SL="#42be65",EL="#24a148",ML="#198038",CL="#0e6027",AL="#044317",PL="#022d0d",DL="#071908",LL={10:OL,20:TL,30:wL,40:SL,50:EL,60:ML,70:CL,80:AL,90:PL,100:DL},RL="#f2f4f8",kL="#dde1e6",IL="#c1c7cd",NL="#a2a9b0",BL="#878d96",UL="#697077",VL="#4d5358",$L="#343a3f",GL="#21272a",FL="#121619",HL={10:RL,20:kL,30:IL,40:NL,50:BL,60:UL,70:VL,80:$L,90:GL,100:FL},zL="#f4f4f4",WL="#e0e0e0",jL="#c6c6c6",qL="#a8a8a8",YL="#8d8d8d",XL="#6f6f6f",ZL="#525252",KL="#393939",QL="#262626",JL="#161616",tR={10:zL,20:WL,30:jL,40:qL,50:YL,60:XL,70:ZL,80:KL,90:QL,100:JL},eR="#f7f3f2",nR="#e5e0df",rR="#cac5c4",iR="#ada8a8",aR="#8f8b8b",oR="#726e6e",sR="#565151",uR="#3c3838",lR="#272525",cR="#171414",fR={10:eR,20:nR,30:rR,40:iR,50:aR,60:oR,70:sR,80:uR,90:lR,100:cR},lp={black:{100:$2},blue:JD,coolGray:HL,cyan:cL,gray:tR,green:LL,magenta:DD,orange:lD,purple:FD,red:xD,teal:bL,warmGray:fR,white:{0:G2},yellow:Q2},hR=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),dR=function(t){if(!t)return null;for(var n=0,e=Object.keys(lp);n<e.length;n++)for(var r=e[n],i=lp[r],a=0,o=Object.keys(i);a<o.length;a++){var s=o[a],u=i[s];if(u===t)return s}return null},cp=function(){var t=V(this.parentNode).select("rect.leaf"),n=getComputedStyle(t.node(),null).getPropertyValue("fill"),e=Ee(n),r;if(e&&(r=dR(e?e.hex():null)),r==null){var i=bs(e).l;r=Math.abs(i*100-100)}return r>50?"white":"black"},pR=0,vR=function(t){hR(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="treemap",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("g[data-name='leaf']").transition("legend-hover-treemap").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-treemap"})}).attr("opacity",function(a){return a.parent.data.name===i.datum().name?1:.3})},e.handleLegendMouseOut=function(r){e.parent.selectAll("g[data-name='leaf']").transition("legend-mouseout-treemap").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-treemap"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer(),a=this.model.getData(),o=this.model.getDisplayData(),s=this.model.getOptions(),u=_.getProperty(window,"location"),l=$.getSVGElementSize(i,{useAttrs:!0}),c=l.width,f=l.height,h=Fr({name:s.title||"Treemap",children:o}).sum(function(y){return y.value}).sort(function(y,T){return T.value-y.value});Nf(a,function(y){return Nf(y.children,function(T){return T.value})});var d=B2().size([c,f]).paddingInner(1).paddingOuter(0).round(!0)(h);this.services.transitions;var p=i.selectAll("g[data-name='leaf']").data(d.leaves(),function(y){return y.data.name});p.exit().attr("opacity",0).remove();var m=p.enter().append("g").attr("data-name","leaf").attr("data-uid",function(){return pR++}),v=m.merge(p);v.attr("data-name","leaf").transition().call(function(y){return r.services.transitions.setupTransition({transition:y,name:"treemap-group-update",animate:e})}).attr("transform",function(y){return"translate("+y.x0+","+y.y0+")"});var x=v.selectAll("rect.leaf").data(function(y){return[y]});x.exit().attr("width",0).attr("height",0).remove();var g=x.enter().append("rect").classed("leaf",!0);g.merge(x).attr("width",0).attr("height",0).attr("id",function(){var y=V(this.parentNode).attr("data-uid");return s.style.prefix+"-leaf-"+y}).attr("class",function(y){for(;y.depth>1;)y=y.parent;return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:y.data.name,originalClassName:"leaf"})}).transition().call(function(y){return r.services.transitions.setupTransition({transition:y,name:"treemap-leaf-update-enter",animate:e})}).attr("width",function(y){return y.x1-y.x0}).attr("height",function(y){return y.y1-y.y0}).style("fill",function(y){for(;y.depth>1;)y=y.parent;return r.model.getFillColor(y.data.name)}),v.selectAll("clipPath").data(function(y){return y.data.showLabel!==!0?[]:[1]},function(y){return y}).join(function(y){y.append("clipPath").attr("id",function(){var T=V(this.parentNode).attr("data-uid");return s.style.prefix+"-clip-"+T}).append("use").attr("xlink:href",function(){var T=V(this.parentNode.parentNode).attr("data-uid"),b=s.style.prefix+"-leaf-"+T;return new URL("#"+b,u)+""})},function(y){return null},function(y){return y.remove()}),v.selectAll("text").data(function(y){if(y.data.showLabel!==!0)return[];for(var T=y;T.depth>1;)T=T.parent;var b=bs(r.model.getFillColor(T.data.name));return[{text:y.data.name,color:b.l<.5?"white":"black"}]},function(y){return y}).join(function(y){var T=y.append("text").text(function(b){return b.text}).style("fill",cp).attr("x",7).attr("y",18);u&&T.attr("clip-path",function(){var b=V(this.parentNode).attr("data-uid"),O=s.style.prefix+"-clip-"+b;return"url("+(new URL("#"+O,u)+"")+")"})},function(y){return y.text(function(T){return T.text}).style("fill",cp)},function(y){return y.remove()}),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("rect.leaf").on("mouseover",function(r,i){for(var a=V(this),o=getComputedStyle(this,null).getPropertyValue("fill"),s=i;s.depth>1;)s=s.parent;a.transition("graph_element_mouseover_fill_update").call(function(u){return e.services.transitions.setupTransition({transition:u,name:"graph_element_mouseover_fill_update"})}).style("fill",function(u){var l=e.model.getFillColor(u.parent.data.name);return l&&(o=l),Ee(o).darker(.7).toString()}),e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:r,hoveredElement:a,items:[{color:o,label:s.data.name,bold:!0},{label:i.data.name,value:i.data.value}]}),e.services.events.dispatchEvent(P.Treemap.LEAF_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var a=V(this);e.services.events.dispatchEvent(P.Treemap.LEAF_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:r})}).on("click",function(r,i){e.services.events.dispatchEvent(P.Treemap.LEAF_CLICK,{event:r,element:V(this),datum:i})}).on("mouseout",function(r,i){var a=V(this);a.classed("hovered",!1);for(var o=i;o.depth>1;)o=o.parent;a.transition().call(function(s){return e.services.transitions.setupTransition({transition:s,name:"graph_element_mouseout_fill_update"})}).style("fill",function(s){return e.model.getFillColor(s.parent.data.name)}),e.services.events.dispatchEvent(P.Treemap.LEAF_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:a})})},n}(ft);function fp(t){var n=gR(hp(t),360);return Fe(n,[0,10])||Fe(n,[350,0])?{textAnchor:ce.START,dominantBaseline:fe.MIDDLE}:Fe(n,[10,80])?{textAnchor:ce.START,dominantBaseline:fe.HANGING}:Fe(n,[80,100])?{textAnchor:ce.MIDDLE,dominantBaseline:fe.HANGING}:Fe(n,[100,170])?{textAnchor:ce.END,dominantBaseline:fe.HANGING}:Fe(n,[170,190])?{textAnchor:ce.END,dominantBaseline:fe.MIDDLE}:Fe(n,[190,260])?{textAnchor:ce.END,dominantBaseline:fe.BASELINE}:Fe(n,[260,280])?{textAnchor:ce.MIDDLE,dominantBaseline:fe.BASELINE}:{textAnchor:ce.START,dominantBaseline:fe.BASELINE}}function gR(t,n){return(t%n+n)%n}function Fe(t,n){var e=n[0],r=n[1];return t>=e&&t<=r}function hp(t){return t*(180/Math.PI)}function wt(t,n,e){e===void 0&&(e={x:0,y:0});var r=n*Math.cos(t)+e.x,i=n*Math.sin(t)+e.y;return{x:isNaN(r)?0:r,y:isNaN(i)?0:i}}function mR(t,n){return n*Math.sin(t-Math.PI/2)}var yR=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_R=function(t){yR(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radar",e.renderType=it.SVG,e.getLabelDimensions=function(r){var i=$.appendOrSelect(e.getComponentContainer(),"g.tmp-tick"),a=$.appendOrSelect(i,"text").text(r),o=$.getSVGElementSize(a.node(),{useBBox:!0}),s=o.width,u=o.height;return i.remove(),{width:s,height:u}},e.normalizeFlatData=function(r){var i=e.getOptions(),a=_.getProperty(i,"radar","axes"),o=a.angle,s=a.value,u=_.getProperty(i,"data","groupMapsTo"),l=_.flatMapDeep(e.uniqueKeys.map(function(c){return e.uniqueGroups.map(function(f){var h;return h={},h[o]=c,h[u]=f,h[s]=null,h})}));return _.merge(l,r)},e.normalizeGroupedData=function(r){var i=e.getOptions(),a=_.getProperty(i,"radar","axes"),o=a.angle,s=a.value,u=_.getProperty(i,"data","groupMapsTo");return r.map(function(l){var c=l.name,f=l.data,h=e.uniqueKeys.map(function(d){var p;return p={},p[u]=c,p[o]=d,p[s]=null,p});return{name:c,data:_.merge(h,f)}})},e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("g.blobs path").transition("legend-hover-blob").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-blob"})}).style("fill-opacity",function(a){return a.name!==i.datum().name?Ne.opacity.unselected:Ne.opacity.selected}).style("stroke-opacity",function(a){return a.name!==i.datum().name?Ne.opacity.unselected:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("g.blobs path").transition("legend-mouseout-blob").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-blob"})}).style("fill-opacity",Ne.opacity.selected).style("stroke-opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.getComponentContainer(),a=$.getSVGElementSize(i,{useAttrs:!0}),o=a.width,s=a.height,u=this.model.getData(),l=this.model.getGroupedData(),c=this.getOptions(),f=_.getProperty(c,"data","groupMapsTo"),h=_.getProperty(c,"radar","axes","value"),d=_.getProperty(c,"radar","axes"),p=d.angle,m=d.value,v=Ne,x=v.xLabelPadding,g=v.yLabelPadding,y=v.yTicksNumber,T=v.minRange,b=v.xAxisRectHeight;this.uniqueKeys=Array.from(new Set(u.map(function(F){return F[p]}))),this.uniqueGroups=Array.from(new Set(u.map(function(F){return F[f]}))),this.fullDataNormalized=this.normalizeFlatData(u),this.groupedDataNormalized=this.normalizeGroupedData(l);var O=this.getLabelDimensions(this.uniqueKeys[0]).height,k=2*(O+g),w=Math.min(o,s),S=w-k,R=S/2;if(!(R<=0)){var C=Ai().domain(this.fullDataNormalized.map(function(F){return F[p]})).range([0,2*Math.PI].map(function(F){return F-Math.PI/2})),N=Ln(this.fullDataNormalized.map(function(F){return F[m]})),L=Be().domain([N>=0?0:N,an(this.fullDataNormalized.map(function(F){return F[m]}))]).range([T,R]).nice(y),I=L.ticks(y),E=function(F){return r.model.getFillColor(F)},A=sE().angle(function(F){return C(F[p])+Math.PI/2}).radius(function(F){return L(F[m])}).curve(Kh),D=this.uniqueKeys.map(function(F){var W=r.getLabelDimensions(F).width,X=mR(C(F),R);return W+X}),B=an(D),M={x:B+x,y:s/2},U=$.appendOrSelect(i,"g.y-axes").attr("role",st.GROUP),G=U.selectAll("path").data(I,function(F){return F}),q=function(F){return r.uniqueKeys.map(function(W){var X;return X={},X[p]=W,X[m]=F,X})};G.join(function(F){return F.append("path").attr("opacity",0).attr("transform","translate("+M.x+", "+M.y+")").attr("fill","none").call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_y_axes_enter",animate:e})}).attr("opacity",1).attr("d",function(X){return A(q(X))})})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_y_axes_update",animate:e})}).attr("opacity",1).attr("transform","translate("+M.x+", "+M.y+")").attr("d",function(X){return A(q(X))})})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_y_axes_exit",animate:e})}).attr("d",function(X){return A(q(X))}).attr("opacity",0).remove()})});var tt=$.appendOrSelect(i,"g.x-axes").attr("role",st.GROUP),J=tt.selectAll("line").data(this.uniqueKeys,function(F){return F});J.join(function(F){return F.append("line").attr("opacity",0).attr("class",function(W){return"x-axis-"+_.kebabCase(W)}).attr("stroke-dasharray","0").attr("x1",function(W){return wt(C(W),0,M).x}).attr("y1",function(W){return wt(C(W),0,M).y}).attr("x2",function(W){return wt(C(W),0,M).x}).attr("y2",function(W){return wt(C(W),0,M).y}).call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_x_axes_enter",animate:e})}).attr("opacity",1).attr("x1",function(X){return wt(C(X),L.range()[0],M).x}).attr("y1",function(X){return wt(C(X),L.range()[0],M).y}).attr("x2",function(X){return wt(C(X),L.range()[1],M).x}).attr("y2",function(X){return wt(C(X),L.range()[1],M).y})})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_x_axes_update",animate:e})}).attr("opacity",1).attr("x1",function(X){return wt(C(X),L.range()[0],M).x}).attr("y1",function(X){return wt(C(X),L.range()[0],M).y}).attr("x2",function(X){return wt(C(X),L.range()[1],M).x}).attr("y2",function(X){return wt(C(X),L.range()[1],M).y})})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_x_axes_exit",animate:e})}).attr("opacity",0).remove()})});var Y=$.appendOrSelect(i,"g.x-labels").attr("role",st.GROUP),Q=Y.selectAll("text").data(this.uniqueKeys);Q.join(function(F){return F.append("text").text(function(W){return W}).attr("opacity",0).attr("x",function(W){return wt(C(W),L.range()[1]+x,M).x}).attr("y",function(W){return wt(C(W),L.range()[1]+x,M).y}).style("text-anchor",function(W){return fp(C(W)).textAnchor}).style("dominant-baseline",function(W){return fp(C(W)).dominantBaseline}).call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_x_labels_enter",animate:e})}).attr("opacity",1)})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_x_labels_update",animate:e})}).attr("opacity",1).attr("x",function(X){return wt(C(X),L.range()[1]+x,M).x}).attr("y",function(X){return wt(C(X),L.range()[1]+x,M).y})})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_x_labels_exit",animate:e})}).attr("opacity",0).remove()})});var K=$.appendOrSelect(i,"g.blobs").attr("role",st.GROUP),nt=K.selectAll("path").data(this.groupedDataNormalized,function(F){return F.name});nt.join(function(F){return F.append("path").attr("class",function(W){return r.model.getColorClassName({classNameTypes:[rt.FILL,rt.STROKE],dataGroupName:W.name,originalClassName:"blob"})}).attr("role",st.GRAPHICS_SYMBOL).attr("aria-label",function(W){return W.name}).attr("opacity",0).attr("transform",e?function(){return"translate("+M.x+", "+M.y+") scale("+(1+Math.random()*.35)+")"}:"translate("+M.x+", "+M.y+")").style("fill",function(W){return E(W.name)}).style("fill-opacity",Ne.opacity.selected).style("stroke",function(W){return E(W.name)}).call(function(W){var X=W.transition().call(function(Bt){return r.services.transitions.setupTransition({transition:Bt,name:"radar_blobs_enter",animate:e})});e&&X.delay(function(){return Math.random()*30}).attr("transform","translate("+M.x+", "+M.y+")"),X.attr("opacity",1).attr("d",function(Bt){return A(Bt.data)})})},function(F){F.attr("class",function(W){return r.model.getColorClassName({classNameTypes:[rt.FILL,rt.STROKE],dataGroupName:W.name,originalClassName:"blob"})}).style("fill",function(W){return E(W.name)}).style("stroke",function(W){return E(W.name)}),F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_blobs_update",animate:e})}).attr("opacity",1).attr("transform","translate("+M.x+", "+M.y+")").attr("d",function(X){return A(X.data)})})},function(F){return F.call(function(W){var X=W.transition().call(function(Bt){return r.services.transitions.setupTransition({transition:Bt,name:"radar_blobs_exit",animate:e})});e&&X.delay(function(){return Math.random()*30}).attr("transform",function(){return"translate("+M.x+", "+M.y+") scale("+(1+Math.random()*.35)+")"}),X.attr("opacity",0).remove()})});var z=$.appendOrSelect(i,"g.dots").attr("role",st.GROUP),Z=z.selectAll("circle").data(this.fullDataNormalized.filter(function(F){return _.getProperty(F,m)!==null}));Z.join(function(F){return F.append("circle").attr("role",st.GRAPHICS_SYMBOL).attr("aria-label",function(W){return W[h]})},function(F){return F},function(F){return F.remove()}).attr("class",function(F){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:F[f],originalClassName:_.kebabCase(F[p])})}).attr("cx",function(F){return wt(C(F[p]),L(F[m]),M).x}).attr("cy",function(F){return wt(C(F[p]),L(F[m]),M).y}).attr("r",0).attr("opacity",0).style("fill",function(F){return E(F[f])});var at=$.appendOrSelect(i,"g.x-axes-rect").attr("role",st.GROUP),H=at.selectAll("rect").data(this.uniqueKeys);H.join(function(F){return F.append("rect")},function(F){return F},function(F){return F.remove()}).attr("x",M.x).attr("y",M.y-b/2).attr("width",L.range()[1]).attr("height",b).style("fill","red").style("fill-opacity",0).attr("transform",function(F){return"rotate("+hp(C(F))+", "+M.x+", "+M.y+")"});var ct=$.appendOrSelect(i,"g.y-labels").attr("role",st.GROUP),ot=ct.selectAll("text").data(Se(I));ot.join(function(F){return F.append("text").attr("opacity",0).text(function(W){return W}).attr("x",function(W){return wt(-Math.PI/2,L(W),M).x+g}).attr("y",function(W){return wt(-Math.PI/2,L(W),M).y}).style("text-anchor","start").style("dominant-baseline","middle").call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_y_labels_enter",animate:e})}).attr("opacity",1)})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_y_labels_update",animate:e})}).text(function(X){return X}).attr("opacity",1).attr("x",function(X){return wt(-Math.PI/2,L(X),M).x+g}).attr("y",function(X){return wt(-Math.PI/2,L(X),M).y})})},function(F){return F.call(function(W){return W.transition().call(function(X){return r.services.transitions.setupTransition({transition:X,name:"radar_y_labels_exit",animate:e})}).attr("opacity",0).remove()})});var dt=_.getProperty(c,"radar","alignment"),Et=this.getAlignmentXOffset(dt,i,this.getParent());i.attr("x",Et),this.addEventListeners()}},n.prototype.getAlignmentXOffset=function(e,r,i){var a=$.getSVGElementSize(r,{useBBox:!0}),o=$.getSVGElementSize(i,{useAttrs:!0}).width,s=0;return e===Lt.CENTER?s=Math.floor((o-a.width)/2):e===Lt.RIGHT&&(s=o-a.width),s},n.prototype.destroy=function(){this.parent.selectAll(".x-axes-rect > rect").on("mouseover",null).on("mousemove",null).on("mouseout",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.addEventListeners=function(){var e=this,r=_.getProperty(this.getOptions(),"radar").axes.angle;this.parent.selectAll(".x-axes-rect > rect").on("mouseover",function(i,a){var o=V(this);e.services.events.dispatchEvent(P.Radar.X_AXIS_MOUSEOVER,{event:i,element:o,datum:a});var s=e.parent.select(".x-axes .x-axis-"+_.kebabCase(a)),u=e.parent.selectAll(".dots circle."+_.kebabCase(a));s.classed("hovered",!0).attr("stroke-dasharray","4 4"),u.classed("hovered",!0).attr("opacity",1).attr("r",Ne.dotsRadius);var l=e.fullDataNormalized.filter(function(d){return d[r]===a}),c=e.getOptions(),f=c.data.groupMapsTo,h=_.getProperty(c,"radar","axes","value");e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:i,hoveredElement:o,items:l.filter(function(d){return typeof d[h]=="number"}).map(function(d){return{label:d[f],value:d[h],color:e.model.getFillColor(d[f]),class:e.model.getColorClassName({classNameTypes:[rt.TOOLTIP],dataGroupName:d[f]})}})})}).on("mousemove",function(i,a){var o=V(this);e.services.events.dispatchEvent(P.Radar.X_AXIS_MOUSEMOVE,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:i})}).on("click",function(i,a){e.services.events.dispatchEvent(P.Radar.X_AXIS_CLICK,{event:i,element:V(this),datum:a})}).on("mouseout",function(i,a){var o=V(this),s=e.parent.select(".x-axes .x-axis-"+_.kebabCase(a)),u=e.parent.selectAll(".dots circle."+_.kebabCase(a));s.classed("hovered",!1).attr("stroke-dasharray","0"),u.classed("hovered",!1).attr("opacity",0).attr("r",0),e.services.events.dispatchEvent(P.Radar.X_AXIS_MOUSEOUT,{event:i,element:o,datum:a}),e.services.events.dispatchEvent(P.Tooltip.HIDE)})},n}(ft),xR=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bR=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},OR=function(t){xR(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="circle-pack",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement;e.parent.selectAll("circle.node").transition("legend-hover-circlepack").call(function(a){return e.services.transitions.setupTransition({transition:a,name:"legend-hover-circlepack"})}).attr("opacity",function(a){return a.data.dataGroupName===i.datum().name?1:Xe.circles.fillOpacity})},e.handleLegendMouseOut=function(r){e.parent.selectAll("circle.node").transition("legend-mouseout-circlepack").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-circlepack"})}).attr("opacity",1)},e}return n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0}),a=$.getSVGElementSize(this.parent,{useAttrs:!0}),o=a.width,s=a.height;if(!(o<1||s<1)){var u=this.model.getDisplayData(),l=this.model.hasParentNode(),c=this.model.getHierarchyLevel(),f=this.getOptions(),h=_.getProperty(f,"canvasZoom","enabled");l&&_.getProperty(u,0,"children")&&(u=_.getProperty(u,0,"children"));var d=Fr({children:u}).sum(function(g){return g.value}).sort(function(g,y){return y.value-g.value}),p=w2().size([o,s]).padding(function(g){return g.depth>=1?Xe.padding.children+3:Xe.padding.mainGroup+3}),m=p(d).descendants().splice(1).filter(function(g){return g.depth<=c}),v=i.selectAll("circle.node").data(m);v.exit().attr("width",0).attr("height",0).remove();var x=v.enter().append("circle").classed("node",!0);x.merge(v).attr("class",function(g){var y=h&&c===3?r.getZoomClass(g):"";return r.model.getColorClassName({classNameTypes:[rt.FILL,rt.STROKE],dataGroupName:g.data.dataGroupName,originalClassName:g.children?"node "+y:"node node-leaf "+y})}).style("fill",function(g){return r.model.getFillColor(g.data.dataGroupName)}).style("stroke",function(g){return r.model.getFillColor(g.data.dataGroupName)}).attr("cx",function(g){return g.x}).attr("cy",function(g){return g.y}).transition("circlepack-leaf-update-enter").call(function(g){return r.services.transitions.setupTransition({transition:g,name:"circlepack-leaf-update-enter"})}).attr("r",function(g){return g.r}).attr("opacity",1).attr("fill-opacity",Xe.circles.fillOpacity),h===!0&&this.focal&&(this.services.canvasZoom.zoomIn(this.focal,x,On),this.setBackgroundListeners()),l||this.addLegendListeners(),this.addEventListeners()}},n.prototype.unhighlightChildren=function(e){var r=this,i=e.map(function(a){return a.data});this.parent.selectAll("circle.node").filter(function(a){return i.some(function(o){return o===a.data})&&a.depth>1}).style("stroke",function(a){return r.model.getFillColor(a.data.dataGroupName)})},n.prototype.highlightChildren=function(e){var r=e.map(function(i){return i.data});this.parent.selectAll("circle.node").filter(function(i){return r.some(function(a){return a===i.data})&&i.depth>1}).style("stroke",Xe.circles.hover.stroke)},n.prototype.getZoomClass=function(e){return this.model.getHierarchyLevel()===3&&this.focal&&(e.data===this.focal.data||this.focal.children.some(function(r){return r.data===e.data}))?"focal":"non-focal"},n.prototype.addLegendListeners=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.removeBackgroundListeners=function(){var e=V(this.services.domUtils.getMainContainer());e.on("click",function(){return null})},n.prototype.setBackgroundListeners=function(){var e=V(this.services.domUtils.getMainContainer()),r=this,i=this.parent.selectAll("circle.node"),a=_.getProperty(Pf,"canvasZoomSettings");e.on("click",function(){r.focal=null,r.model.updateHierarchyLevel(2),e.classed("zoomed-in",!1),r.services.canvasZoom.zoomOut(i,a)})},n.prototype.getZoomIcon=function(){return`
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10">
			<polygon points="5.93 3.71 4.45 3.71 4.45 2.23 3.71 2.23 3.71 3.71 2.23 3.71 2.23 4.45 3.71 4.45 3.71 5.93 4.45 5.93 4.45 4.45 5.93 4.45 5.93 3.71"/>
			<path d="M7.2,6.67a4,4,0,0,0,1-2.59A4.08,4.08,0,1,0,4.07,8.15h0a4,4,0,0,0,2.59-1L9.48,10,10,9.48Zm-3.12.77A3.34,3.34,0,1,1,7.41,4.08,3.34,3.34,0,0,1,4.08,7.44Z"/>
		</svg>`},n.prototype.addEventListeners=function(){var e=this;this.parent.selectAll("circle.node").on("mouseover",function(r,i){var a=V(this);a.classed("hovered",!0);var o=e.model.getHierarchyLevel(),s=o>2&&!a.classed("focal"),u=_.getProperty(e.model.getOptions(),"canvasZoom","enabled"),l=!1;if(!s){var c=[],f=[],h=null;if(i.children){i.depth>1&&u&&(l=!0,a.classed("clickable",!0)),c=i.children.map(function(m){if(m!==null)return typeof m.data.value=="number"?{label:m.data.name,value:m.data.value}:{label:m.data.name,labelIcon:u&&o<=2?e.getZoomIcon():null,value:m.value}});var d=e.model.getOptions();f=[{label:bt(d,"tooltip.totalLabel")||"Total",value:i.value,bold:!0}],e.highlightChildren(i.children)}else h=i.value;var p=getComputedStyle(this,null).getPropertyValue("fill");e.services.events.dispatchEvent(P.Tooltip.SHOW,{event:r,hoveredElement:a,items:bR([{color:p,label:i.data.name,labelIcon:l&&u&&o<=2?e.getZoomIcon():null,value:h}],c,f)})}e.services.events.dispatchEvent(P.CirclePack.CIRCLE_MOUSEOVER,{event:r,element:a,datum:i})}).on("mousemove",function(r,i){var a=V(this);e.services.events.dispatchEvent(P.CirclePack.CIRCLE_MOUSEMOVE,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.MOVE,{event:r})}).on("mouseout",function(r,i){var a=V(this);a.classed("hovered",!1),i.children&&e.unhighlightChildren(i.children),e.services.events.dispatchEvent(P.CirclePack.CIRCLE_MOUSEOUT,{event:r,element:a,datum:i}),e.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:a})}).on("click",function(r,i){var a=V(this),o=a.classed("non-focal"),s=_.getProperty(e.getOptions(),"canvasZoom","enabled")&&e.model.getHierarchyLevel()>2;if(s){var u=e.parent.selectAll("circle.node"),l=V(e.services.domUtils.getMainContainer());l.classed("zoomed-in",!1),e.focal=null,e.model.updateHierarchyLevel(2),e.services.canvasZoom.zoomOut(u,On)}else if(i.depth===2&&i.children&&!o){var u=e.parent.selectAll("circle.node"),l=V(e.services.domUtils.getMainContainer());l.classed("zoomed-in",!0),e.focal=i,e.model.updateHierarchyLevel(3),e.services.canvasZoom.zoomIn(i,u,On),r.stopPropagation()}e.services.events.dispatchEvent(P.CirclePack.CIRCLE_CLICK,{event:r,element:a,datum:i})})},n.prototype.destroy=function(){this.parent.selectAll("circle.node").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null);var e=this.services.events;e.removeEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),this.removeBackgroundListeners()},n}(ft),TR={value:function(){}};function dp(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new ba(e)}function ba(t){this._=t}function wR(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}ba.prototype=dp.prototype={constructor:ba,on:function(t,n){var e=this._,r=wR(t+"",e),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=SR(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<o;)if(i=(t=r[a]).type)e[i]=pp(e[i],t.name,n);else if(n==null)for(i in e)e[i]=pp(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new ba(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function SR(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function pp(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=TR,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var ER=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",dispatch:dp}),MR=Av(ER),CR=MR.dispatch,Pu=Math.PI/180,Wr=1<<11>>5,Oa=1<<11,AR=function(){var t=[256,256],n=PR,e=DR,r=LR,i=vp,a=vp,o=RR,s=kR,u=gp,l=[],c=1/0,f=CR("word","end"),h=null,d=Math.random,p={},m=GR;p.canvas=function(g){return arguments.length?(m=He(g),p):m},p.start=function(){var g=v(m()),y=$R((t[0]>>5)*t[1]),T=null,b=l.length,O=-1,k=[],w=l.map(function(R,C){return R.text=n.call(this,R,C),R.font=e.call(this,R,C),R.style=i.call(this,R,C),R.weight=a.call(this,R,C),R.rotate=o.call(this,R,C),R.size=~~r.call(this,R,C),R.padding=s.call(this,R,C),R}).sort(function(R,C){return C.size-R.size});return h&&clearInterval(h),h=setInterval(S,0),S(),p;function S(){for(var R=Date.now();Date.now()-R<c&&++O<b&&h;){var C=w[O];C.x=t[0]*(d()+.5)>>1,C.y=t[1]*(d()+.5)>>1,IR(g,C,w,O),C.hasText&&x(y,C,T)&&(k.push(C),f.call("word",p,C),T?BR(T,C):T=[{x:C.x+C.x0,y:C.y+C.y0},{x:C.x+C.x1,y:C.y+C.y1}],C.x-=t[0]>>1,C.y-=t[1]>>1)}O>=b&&(p.stop(),f.call("end",p,k,T))}},p.stop=function(){return h&&(clearInterval(h),h=null),p};function v(g){g.width=g.height=1;var y=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(Wr<<5)/y,g.height=Oa/y;var T=g.getContext("2d");return T.fillStyle=T.strokeStyle="red",T.textAlign="center",{context:T,ratio:y}}function x(g,y,T){t[0],t[1];for(var b=y.x,O=y.y,k=Math.sqrt(t[0]*t[0]+t[1]*t[1]),w=u(t),S=d()<.5?1:-1,R=-S,C,N,L;(C=w(R+=S))&&(N=~~C[0],L=~~C[1],!(Math.min(Math.abs(N),Math.abs(L))>=k));)if(y.x=b+N,y.y=O+L,!(y.x+y.x0<0||y.y+y.y0<0||y.x+y.x1>t[0]||y.y+y.y1>t[1])&&(!T||!NR(y,g,t[0]))&&(!T||UR(y,T))){for(var I=y.sprite,E=y.width>>5,A=t[0]>>5,D=y.x-(E<<4),B=D&127,M=32-B,U=y.y1-y.y0,G=(y.y+y.y0)*A+(D>>5),q,tt=0;tt<U;tt++){q=0;for(var J=0;J<=E;J++)g[G+J]|=q<<M|(J<E?(q=I[tt*E+J])>>>B:0);G+=A}return delete y.sprite,!0}return!1}return p.timeInterval=function(g){return arguments.length?(c=g==null?1/0:g,p):c},p.words=function(g){return arguments.length?(l=g,p):l},p.size=function(g){return arguments.length?(t=[+g[0],+g[1]],p):t},p.font=function(g){return arguments.length?(e=He(g),p):e},p.fontStyle=function(g){return arguments.length?(i=He(g),p):i},p.fontWeight=function(g){return arguments.length?(a=He(g),p):a},p.rotate=function(g){return arguments.length?(o=He(g),p):o},p.text=function(g){return arguments.length?(n=He(g),p):n},p.spiral=function(g){return arguments.length?(u=FR[g]||g,p):u},p.fontSize=function(g){return arguments.length?(r=He(g),p):r},p.padding=function(g){return arguments.length?(s=He(g),p):s},p.random=function(g){return arguments.length?(d=g,p):d},p.on=function(){var g=f.on.apply(f,arguments);return g===f?p:g},p};function PR(t){return t.text}function DR(){return"serif"}function vp(){return"normal"}function LR(t){return Math.sqrt(t.value)}function RR(){return(~~(Math.random()*6)-3)*30}function kR(){return 1}function IR(t,n,e,r){if(!n.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(Wr<<5)/a,Oa/a);var o=0,s=0,u=0,l=e.length;for(--r;++r<l;){n=e[r],i.save(),i.font=n.style+" "+n.weight+" "+~~((n.size+1)/a)+"px "+n.font;var c=i.measureText(n.text+"m").width*a,f=n.size<<1;if(n.rotate){var h=Math.sin(n.rotate*Pu),d=Math.cos(n.rotate*Pu),p=c*d,m=c*h,v=f*d,x=f*h;c=Math.max(Math.abs(p+x),Math.abs(p-x))+31>>5<<5,f=~~Math.max(Math.abs(m+v),Math.abs(m-v))}else c=c+31>>5<<5;if(f>u&&(u=f),o+c>=Wr<<5&&(o=0,s+=u,u=0),s+f>=Oa)break;i.translate((o+(c>>1))/a,(s+(f>>1))/a),n.rotate&&i.rotate(n.rotate*Pu),i.fillText(n.text,0,0),n.padding&&(i.lineWidth=2*n.padding,i.strokeText(n.text,0,0)),i.restore(),n.width=c,n.height=f,n.xoff=o,n.yoff=s,n.x1=c>>1,n.y1=f>>1,n.x0=-n.x1,n.y0=-n.y1,n.hasText=!0,o+=c}for(var g=i.getImageData(0,0,(Wr<<5)/a,Oa/a).data,y=[];--r>=0;)if(n=e[r],!!n.hasText){for(var c=n.width,T=c>>5,f=n.y1-n.y0,b=0;b<f*T;b++)y[b]=0;if(o=n.xoff,o==null)return;s=n.yoff;for(var O=0,k=-1,w=0;w<f;w++){for(var b=0;b<c;b++){var S=T*w+(b>>5),R=g[(s+w)*(Wr<<5)+(o+b)<<2]?1<<31-b%32:0;y[S]|=R,O|=R}O?k=w:(n.y0++,f--,w--,s++)}n.y1=n.y0+k,n.sprite=y.slice(0,(n.y1-n.y0)*T)}}}function NR(t,n,e){e>>=5;for(var r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,u=t.y1-t.y0,l=(t.y+t.y0)*e+(a>>5),c,f=0;f<u;f++){c=0;for(var h=0;h<=i;h++)if((c<<s|(h<i?(c=r[f*i+h])>>>o:0))&n[l+h])return!0;l+=e}return!1}function BR(t,n){var e=t[0],r=t[1];n.x+n.x0<e.x&&(e.x=n.x+n.x0),n.y+n.y0<e.y&&(e.y=n.y+n.y0),n.x+n.x1>r.x&&(r.x=n.x+n.x1),n.y+n.y1>r.y&&(r.y=n.y+n.y1)}function UR(t,n){return t.x+t.x1>n[0].x&&t.x+t.x0<n[1].x&&t.y+t.y1>n[0].y&&t.y+t.y0<n[1].y}function gp(t){var n=t[0]/t[1];return function(e){return[n*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function VR(t){var n=4,e=n*t[0]/t[1],r=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=e;break;case 1:i+=n;break;case 2:r-=e;break;default:i-=n;break}return[r,i]}}function $R(t){for(var n=[],e=-1;++e<t;)n[e]=0;return n}function GR(){return document.createElement("canvas")}function He(t){return typeof t=="function"?t:function(){return t}}var FR={archimedean:gp,rectangular:VR},HR=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zR=function(t){HR(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="wordcloud",e.renderType=it.SVG,e.handleLegendOnHover=function(r){var i=r.detail.hoveredElement,a=e.getOptions().data.groupMapsTo;e.parent.selectAll("text.word").transition("legend-hover-wordcloud").call(function(o){return e.services.transitions.setupTransition({transition:o,name:"legend-hover-wordcloud"})}).attr("opacity",function(o){return o[a]!==i.datum().name?.3:1})},e.handleLegendMouseOut=function(r){e.parent.selectAll("text.word").transition("legend-mouseout-wordcloud").call(function(i){return e.services.transitions.setupTransition({transition:i,name:"legend-mouseout-wordcloud"})}).attr("opacity",1)},e}return n.prototype.init=function(){var e=this.services.events;e.addEventListener(P.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(P.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)},n.prototype.render=function(e){e===void 0&&(e=!0);var r=this,i=this.getComponentContainer().attr("width","100%").attr("height","100%"),a=this.model.getDisplayData(),o=this.getFontSizeScale(a),s=this.getOptions(),u=s.wordCloud,l=u.fontSizeMapsTo,c=u.wordMapsTo,f=s.data.groupMapsTo,h=$.getSVGElementSize(i,{useAttrs:!0}),d=h.width,p=h.height;if(d===0||p===0)return;var m=AR().size([d,p]).words(a.map(function(x){var g;return g={},g[f]=x[f],g.text=x[c],g.size=x[l],g.value=x[l],g})).padding(5).rotate(0).fontSize(function(x){return o(x.size)}).on("end",v);m.start();function v(x){var g=$.appendOrSelect(i,"g.words");g.attr("transform","translate("+m.size()[0]/2+", "+m.size()[1]/2+")");var y=g.selectAll("text").data(x,function(b){return b[f]+"-"+b.text});y.exit().attr("opacity",0).remove();var T=y.enter().append("text").attr("opacity",0);T.merge(y).style("font-size",function(b){return b.size+"px"}).text(function(b){return b.text}).attr("class",function(b){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:b[f],originalClassName:"word "+(b.size>32?"light":"")})}).style("fill",function(b){return r.model.getFillColor(b[f],b.text,b)}).attr("text-anchor","middle").transition().call(function(b){return r.services.transitions.setupTransition({transition:b,name:"wordcloud-text-update-enter",animate:e})}).attr("transform",function(b){return"translate("+b.x+", "+b.y+")"}).attr("opacity",1)}this.addEventListeners()},n.prototype.getFontSizeScale=function(e){var r=this.getOptions(),i=r.wordCloud.fontSizeMapsTo,a=e.map(function(l){return l[i]}).filter(function(l){return l}),o=$.getHTMLElementSize(this.services.domUtils.getMainContainer()),s=a.length>0,u=s?Se(a):[1,1];return Be().domain(u).range(s?r.wordCloud.fontSizeRange(o,e):[4,4])},n.prototype.addEventListeners=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this,a=_.debounce(function(o){var s=i.parent.selectAll("text.word").transition("wordcloud-word-mouse-highlight").call(function(u){return i.services.transitions.setupTransition({transition:u,name:"wordcloud-word-mouse-highlight"})});o===null?s.attr("opacity",1):s.attr("opacity",function(){return o===this?1:.3})},6);this.parent.selectAll("text.word").on("mouseover",function(o,s){var u=this;a(u),i.services.events.dispatchEvent(P.WordCloud.WORD_MOUSEOVER,{event:o,element:V(this),datum:s}),i.services.events.dispatchEvent(P.Tooltip.SHOW,{event:o,hoveredElement:u,items:[{label:e.tooltip.wordLabel,value:s.text},{label:e.tooltip.valueLabel,value:s.value},{label:e.tooltip.groupLabel,value:s[r],class:i.model.getColorClassName({classNameTypes:[rt.TOOLTIP],dataGroupName:s[r]})}]})}).on("mousemove",function(o,s){var u=V(this);i.services.events.dispatchEvent(P.WordCloud.WORD_MOUSEMOVE,{element:u,datum:s}),i.services.events.dispatchEvent(P.Tooltip.MOVE,{event:o})}).on("click",function(o,s){i.services.events.dispatchEvent(P.WordCloud.WORD_CLICK,{event:o,element:V(this),datum:s})}).on("mouseout",function(o,s){var u=V(this);a(null),i.services.events.dispatchEvent(P.WordCloud.WORD_MOUSEOUT,{event:o,element:u,datum:s}),i.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:u})})},n}(ft);function mp(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function WR(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function Du(t,n){let e=0;if(n===void 0)for(let r of t)(r=+r)&&(e+=r);else{let r=-1;for(let i of t)(i=+n(i,++r,t))&&(e+=i)}return e}function jR(t,n){return t.sourceLinks.length?t.depth:n-1}function Ta(t){return function(){return t}}function yp(t,n){return wa(t.source,n.source)||t.index-n.index}function _p(t,n){return wa(t.target,n.target)||t.index-n.index}function wa(t,n){return t.y0-n.y0}function Lu(t){return t.value}function qR(t){return t.index}function YR(t){return t.nodes}function XR(t){return t.links}function xp(t,n){const e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function bp({nodes:t}){for(const n of t){let e=n.y0,r=e;for(const i of n.sourceLinks)i.y0=e+i.width/2,e+=i.width;for(const i of n.targetLinks)i.y1=r+i.width/2,r+=i.width}}function ZR(){let t=0,n=0,e=1,r=1,i=24,a=8,o,s=qR,u=jR,l,c,f=YR,h=XR,d=6;function p(){const E={nodes:f.apply(null,arguments),links:h.apply(null,arguments)};return m(E),v(E),x(E),g(E),b(E),bp(E),E}p.update=function(E){return bp(E),E},p.nodeId=function(E){return arguments.length?(s=typeof E=="function"?E:Ta(E),p):s},p.nodeAlign=function(E){return arguments.length?(u=typeof E=="function"?E:Ta(E),p):u},p.nodeSort=function(E){return arguments.length?(l=E,p):l},p.nodeWidth=function(E){return arguments.length?(i=+E,p):i},p.nodePadding=function(E){return arguments.length?(a=o=+E,p):a},p.nodes=function(E){return arguments.length?(f=typeof E=="function"?E:Ta(E),p):f},p.links=function(E){return arguments.length?(h=typeof E=="function"?E:Ta(E),p):h},p.linkSort=function(E){return arguments.length?(c=E,p):c},p.size=function(E){return arguments.length?(t=n=0,e=+E[0],r=+E[1],p):[e-t,r-n]},p.extent=function(E){return arguments.length?(t=+E[0][0],e=+E[1][0],n=+E[0][1],r=+E[1][1],p):[[t,n],[e,r]]},p.iterations=function(E){return arguments.length?(d=+E,p):d};function m({nodes:E,links:A}){for(const[B,M]of E.entries())M.index=B,M.sourceLinks=[],M.targetLinks=[];const D=new Map(E.map((B,M)=>[s(B,M,E),B]));for(const[B,M]of A.entries()){M.index=B;let{source:U,target:G}=M;typeof U!="object"&&(U=M.source=xp(D,U)),typeof G!="object"&&(G=M.target=xp(D,G)),U.sourceLinks.push(M),G.targetLinks.push(M)}if(c!=null)for(const{sourceLinks:B,targetLinks:M}of E)B.sort(c),M.sort(c)}function v({nodes:E}){for(const A of E)A.value=A.fixedValue===void 0?Math.max(Du(A.sourceLinks,Lu),Du(A.targetLinks,Lu)):A.fixedValue}function x({nodes:E}){const A=E.length;let D=new Set(E),B=new Set,M=0;for(;D.size;){for(const U of D){U.depth=M;for(const{target:G}of U.sourceLinks)B.add(G)}if(++M>A)throw new Error("circular link");D=B,B=new Set}}function g({nodes:E}){const A=E.length;let D=new Set(E),B=new Set,M=0;for(;D.size;){for(const U of D){U.height=M;for(const{source:G}of U.targetLinks)B.add(G)}if(++M>A)throw new Error("circular link");D=B,B=new Set}}function y({nodes:E}){const A=mp(E,M=>M.depth)+1,D=(e-t-i)/(A-1),B=new Array(A);for(const M of E){const U=Math.max(0,Math.min(A-1,Math.floor(u.call(null,M,A))));M.layer=U,M.x0=t+U*D,M.x1=M.x0+i,B[U]?B[U].push(M):B[U]=[M]}if(l)for(const M of B)M.sort(l);return B}function T(E){const A=WR(E,D=>(r-n-(D.length-1)*o)/Du(D,Lu));for(const D of E){let B=n;for(const M of D){M.y0=B,M.y1=B+M.value*A,B=M.y1+o;for(const U of M.sourceLinks)U.width=U.value*A}B=(r-B+o)/(D.length+1);for(let M=0;M<D.length;++M){const U=D[M];U.y0+=B*(M+1),U.y1+=B*(M+1)}N(D)}}function b(E){const A=y(E);o=Math.min(a,(r-n)/(mp(A,D=>D.length)-1)),T(A);for(let D=0;D<d;++D){const B=Math.pow(.99,D),M=Math.max(1-B,(D+1)/d);k(A,B,M),O(A,B,M)}}function O(E,A,D){for(let B=1,M=E.length;B<M;++B){const U=E[B];for(const G of U){let q=0,tt=0;for(const{source:Y,value:Q}of G.targetLinks){let K=Q*(G.layer-Y.layer);q+=L(Y,G)*K,tt+=K}if(!(tt>0))continue;let J=(q/tt-G.y0)*A;G.y0+=J,G.y1+=J,C(G)}l===void 0&&U.sort(wa),w(U,D)}}function k(E,A,D){for(let B=E.length,M=B-2;M>=0;--M){const U=E[M];for(const G of U){let q=0,tt=0;for(const{target:Y,value:Q}of G.sourceLinks){let K=Q*(Y.layer-G.layer);q+=I(G,Y)*K,tt+=K}if(!(tt>0))continue;let J=(q/tt-G.y0)*A;G.y0+=J,G.y1+=J,C(G)}l===void 0&&U.sort(wa),w(U,D)}}function w(E,A){const D=E.length>>1,B=E[D];R(E,B.y0-o,D-1,A),S(E,B.y1+o,D+1,A),R(E,r,E.length-1,A),S(E,n,0,A)}function S(E,A,D,B){for(;D<E.length;++D){const M=E[D],U=(A-M.y0)*B;U>1e-6&&(M.y0+=U,M.y1+=U),A=M.y1+o}}function R(E,A,D,B){for(;D>=0;--D){const M=E[D],U=(M.y1-A)*B;U>1e-6&&(M.y0-=U,M.y1-=U),A=M.y0-o}}function C({sourceLinks:E,targetLinks:A}){if(c===void 0){for(const{source:{sourceLinks:D}}of A)D.sort(_p);for(const{target:{targetLinks:D}}of E)D.sort(yp)}}function N(E){if(c===void 0)for(const{sourceLinks:A,targetLinks:D}of E)A.sort(_p),D.sort(yp)}function L(E,A){let D=E.y0-(E.sourceLinks.length-1)*o/2;for(const{target:B,width:M}of E.sourceLinks){if(B===A)break;D+=M+o}for(const{source:B,width:M}of A.targetLinks){if(B===E)break;D-=M}return D}function I(E,A){let D=A.y0-(A.targetLinks.length-1)*o/2;for(const{source:B,width:M}of A.targetLinks){if(B===E)break;D+=M+o}for(const{target:B,width:M}of E.sourceLinks){if(B===A)break;D-=M}return D}return p}var Ru=Math.PI,ku=2*Ru,vn=1e-6,KR=ku-vn;function Iu(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Op(){return new Iu}Iu.prototype=Op.prototype={constructor:Iu,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,a){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var a=this._x1,o=this._y1,s=e-t,u=r-n,l=a-t,c=o-n,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>vn)if(!(Math.abs(c*s-u*l)>vn)||!i)this._+="L"+(this._x1=t)+","+(this._y1=n);else{var h=e-a,d=r-o,p=s*s+u*u,m=h*h+d*d,v=Math.sqrt(p),x=Math.sqrt(f),g=i*Math.tan((Ru-Math.acos((p+f-m)/(2*v*x)))/2),y=g/x,T=g/v;Math.abs(y-1)>vn&&(this._+="L"+(t+y*l)+","+(n+y*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*d)+","+(this._x1=t+T*s)+","+(this._y1=n+T*u)}},arc:function(t,n,e,r,i,a){t=+t,n=+n,e=+e,a=!!a;var o=e*Math.cos(r),s=e*Math.sin(r),u=t+o,l=n+s,c=1^a,f=a?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>vn||Math.abs(this._y1-l)>vn)&&(this._+="L"+u+","+l),!!e&&(f<0&&(f=f%ku+ku),f>KR?this._+="A"+e+","+e+",0,1,"+c+","+(t-o)+","+(n-s)+"A"+e+","+e+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>vn&&(this._+="A"+e+","+e+",0,"+ +(f>=Ru)+","+c+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function Tp(t){return function(){return t}}function QR(t){return t[0]}function JR(t){return t[1]}var tk=Array.prototype.slice;function ek(t){return t.source}function nk(t){return t.target}function rk(t){var n=ek,e=nk,r=QR,i=JR,a=null;function o(){var s,u=tk.call(arguments),l=n.apply(this,u),c=e.apply(this,u);if(a||(a=s=Op()),t(a,+r.apply(this,(u[0]=l,u)),+i.apply(this,u),+r.apply(this,(u[0]=c,u)),+i.apply(this,u)),s)return a=null,s+""||null}return o.source=function(s){return arguments.length?(n=s,o):n},o.target=function(s){return arguments.length?(e=s,o):e},o.x=function(s){return arguments.length?(r=typeof s=="function"?s:Tp(+s),o):r},o.y=function(s){return arguments.length?(i=typeof s=="function"?s:Tp(+s),o):i},o.context=function(s){return arguments.length?(a=s==null?null:s,o):a},o}function ik(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function ak(){return rk(ik)}function ok(t){return[t.source.x1,t.y0]}function sk(t){return[t.target.x0,t.y1]}function uk(){return ak().source(ok).target(sk)}var lk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ck=function(t){lk(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="alluvial",e.renderType=it.SVG,e}return n.prototype.render=function(e){var r=this,i=this.getComponentContainer({withinChartClip:!0});i.html("");var a=$.getSVGElementSize(i,{useAttrs:!0}),o=a.width,s=a.height;if(!(o<1||s<1)){var u=this.model.getOptions(),l=this.model.getDisplayData(),c=te.minNodePadding;u.alluvial.nodePadding>te.minNodePadding&&(c=u.alluvial.nodePadding);var f=ZR().nodeId(function(v){return v.name}).nodeWidth(te.nodeWidth).nodePadding(c).extent([[2,30],[o-2,s]]);this.graph=f({nodes:u.alluvial.nodes.map(function(v){return Object.assign({},v)}),links:l.map(function(v){return Object.assign({},v)})}),this.graph.nodes=this.graph.nodes.filter(function(v){return v.value!==0});var h={};this.graph.nodes.forEach(function(v){var x,g=v.x0;v.category&&(h[g]=(x=v)===null||x===void 0?void 0:x.category)});var d=i.append("g").classed("header-arrows",!0).selectAll("g").data(Object.keys(h)).join("g").attr("transform",function(v){return"translate("+v+", 0)"});d.append("text").attr("id",function(v,x){return r.services.domUtils.generateElementIDString("alluvial-category-"+x)}).style("font-size","14px").text(function(v){return h[v]?h[v]:""}).attr("y",20).attr("x",function(v,x){var g=r.services.domUtils.generateElementIDString("alluvial-category-"+x),y=$.getSVGElementSize(V("text#"+g),{useBBox:!0}).width,T=0;return v+T>=y&&(T=-y+4),T}),i.append("g").attr("fill","none").selectAll("g").data(this.graph.links).join("path").classed("link",!0).attr("d",uk()).attr("id",function(v){return r.services.domUtils.generateElementIDString("alluvial-line-"+v.index)}).attr("class",function(v){return u.alluvial.monochrome?r.model.getColorClassName({classNameTypes:[rt.STROKE],dataGroupName:0,originalClassName:"link"}):r.model.getColorClassName({classNameTypes:[rt.STROKE],dataGroupName:v.source.index,originalClassName:"link"})}).style("stroke",function(v){return r.model.getFillColor(v.source.name)}).attr("stroke-width",function(v){return Math.max(1,v.width)}).style("stroke-opacity",te.opacity.default).attr("aria-label",function(v){return v.source.name+" \u2192 "+v.target.name+" ("+v.value+(u.alluvial.units?" "+u.alluvial.units:"")+")"});var p=i.append("g").selectAll("g").data(this.graph.nodes).enter().append("g").attr("id",function(v){return r.services.domUtils.generateElementIDString("alluvial-node-"+v.index)}).classed("node-group",!0).attr("transform",function(v){return"translate("+v.x0+", "+v.y0+")"});p.append("rect").classed("node",!0).attr("height",function(v){return v.y1-v.y0}).attr("width",function(v){return v.x1-v.x0}).attr("fill","black");var m=p.append("g").attr("id",function(v){return r.services.domUtils.generateElementIDString("alluvial-node-title-"+v.index)});m.append("text").attr("id",function(v){return r.services.domUtils.generateElementIDString("alluvial-node-text-"+v.index)}).attr("class","node-text").style("font-size","12px").attr("text-anchor","start").attr("fill","white").attr("x",4).attr("dy",13).text(function(v){return v.name+" ("+v.value+")"}).attr("aria-label",function(v){return v.name+" ("+v.value+")"}),m.append("rect").classed("node-text-bg",!0).attr("width",function(v,x){var g=r.services.domUtils.generateElementIDString("alluvial-node-text-"+x),y=$.getSVGElementSize(V("text#"+g),{useBBox:!0}).width;return y+8}).attr("height",18).attr("stroke-width",2).lower(),m.attr("transform",function(v,x){var g=r.services.domUtils.generateElementIDString("alluvial-node-text-"+x),y=$.getSVGElementSize(V("text#"+g),{useBBox:!0}).width,T=(v.y1-v.y0)/2-9,b=v.x1-v.x0;return v.x1>=y?b=b-(y+16):b+=4,"translate("+b+", "+T+")"}),this.addLineEventListener(),this.addNodeEventListener()}},n.prototype.addLineEventListener=function(){var e=this.getOptions(),r=this,i=_.debounce(function(a,o){o===void 0&&(o="mouseover");var s=r.parent.selectAll("path.link").transition().call(function(u){return r.services.transitions.setupTransition({transition:u,name:"alluvial-links-mouse-highlight"})});o==="mouseout"?(V(a).lower(),s.style("stroke-opacity",te.opacity.default)):s.style("stroke-opacity",function(){return a===this?(V(this).raise(),te.opacity.selected):te.opacity.unfocus})},33);this.parent.selectAll("path.link").on("mouseover",function(a,o){var s=V(this);i(this,"mouseover"),s.classed("link-hovered",!0);var u=getComputedStyle(this).getPropertyValue("stroke");r.services.events.dispatchEvent(P.Alluvial.LINE_MOUSEOVER,{event:a,element:s,datum:o}),r.services.events.dispatchEvent(P.Tooltip.SHOW,{event:a,hoveredElement:s,items:[{label:o.target.name,value:o.value+(e.alluvial.units?" "+e.alluvial.units:""),color:u,labelIcon:r.getRightArrowIcon()}]})}).on("mousemove",function(a,o){r.services.events.dispatchEvent(P.Alluvial.LINE_MOUSEMOVE,{event:a,element:V(this),datum:o}),r.services.events.dispatchEvent(P.Tooltip.MOVE,{event:a})}).on("click",function(a,o){r.services.events.dispatchEvent(P.Alluvial.LINE_CLICK,{event:a,element:V(this),datum:o})}).on("mouseout",function(a,o){var s=V(this);i(this,"mouseout"),s.classed("link-hovered",!1),r.services.events.dispatchEvent(P.Alluvial.LINE_MOUSEOUT,{event:a,element:s,datum:o}),r.services.events.dispatchEvent(P.Tooltip.HIDE,{event:a,hoveredElement:s})})},n.prototype.addNodeEventListener=function(){var e=this,r=this,i=_.debounce(function(a,o){if(a===void 0&&(a=[]),o===void 0&&(o="mouseover"),o==="mouseout"||a.length===0){r.parent.selectAll("path.link").classed("link-hovered",!1).data(e.graph.links,function(u){return u.index}).order().style("stroke-opacity",te.opacity.default);return}var s=r.parent.selectAll("path.link").transition().call(function(u){return e.services.transitions.setupTransition({transition:u,name:"alluvial-link-mouse-highlight"})});s.style("stroke-opacity",function(u){return a.some(function(l){return l===u.index})?(V(this).classed("link-hovered",!0).raise(),te.opacity.selected):te.opacity.unfocus})},66);r.parent.selectAll(".node-group").on("mouseover",function(a,o){var s=V(this),u=[];if(r.traverse({link:"sourceLinks",node:"target"},o,u),r.traverse({link:"targetLinks",node:"source"},o,u),u.length){var l=_.getTranformOffsets(s.attr("transform"));if(s.attr("transform","translate("+(l.x-2)+", "+l.y+")"),s.classed("node-hovered",!0).selectAll("rect.node").attr("width",8),o.x0-2==0){var c=r.services.domUtils.generateElementIDString("alluvial-node-title-"+o.index),f=r.parent.select("g#"+c),h=_.getTranformOffsets(f.attr("transform"));f.attr("transform","translate("+(h.x+4)+","+h.y+")")}var d=r.services.domUtils.generateElementIDString("alluvial-node-text-"+o.index);r.parent.select("text#"+d).style("font-weight","bold"),i(u,"mouseover"),r.services.events.dispatchEvent(P.Alluvial.NODE_MOUSEOVER,{event:a,element:s,datum:o})}}).on("mousemove",function(a,o){r.services.events.dispatchEvent(P.Alluvial.NODE_MOUSEMOVE,{event:a,element:V(this),datum:o}),r.services.events.dispatchEvent(P.Tooltip.MOVE,{event:a})}).on("click",function(a,o){r.services.events.dispatchEvent(P.Alluvial.NODE_CLICK,{event:a,element:V(this),datum:o})}).on("mouseout",function(a,o){var s=V(this),u=_.getTranformOffsets(s.attr("transform"));if(s.classed("node-hovered",!1).attr("transform","translate("+(u.x+2)+", "+u.y+")").select("rect.node").attr("width",te.nodeWidth),o.x0-2==0){var l=r.services.domUtils.generateElementIDString("alluvial-node-title-"+o.index),c=r.parent.select("g#"+l),f=_.getTranformOffsets(c.attr("transform"));c.attr("transform","translate("+(f.x-4)+","+f.y+")")}var h=r.services.domUtils.generateElementIDString("alluvial-node-text-"+o.index);r.parent.select("text#"+h).style("font-weight","normal"),i([],"mouseout"),r.services.events.dispatchEvent(P.Alluvial.NODE_MOUSEOUT,{event:a,element:s,datum:o}),r.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:s})})},n.prototype.traverse=function(e,r,i){var a=this;i===void 0&&(i=[]);var o=r[e.link].map(function(s){return i.push(s.index),s[e.node]});o.forEach(function(s){return a.traverse(e,s,i)})},n.prototype.getRightArrowIcon=function(){return`
		<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
			<polygon points="18 6 16.57 7.393 24.15 15 4 15 4 17 24.15 17 16.57 24.573 18 26 28 16 18 6"/>
			<rect  data-name="&lt;Transparent Rectangle&gt;" style="fill: none;" width="32" height="32"/>
		</svg>`},n.prototype.destroy=function(){this.parent.selectAll("path.line,.node-group").on("mouseover",null).on("mousemove",null).on("click",null).on("mouseout",null)},n}(ft),fk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jr=function(t){fk(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="spacer",e}return n.prototype.render=function(){this.getComponentContainer().style("width",(this.configs.size||To.default.size)+"px").style("height",(this.configs.size||To.default.size)+"px").attr("opacity",0)},n}(ft),hk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gn=function(t){hk(n,t);function n(e,r,i,a){var o=t.call(this,e,r,a)||this;return o.type="layout",o.configs=a,o.children=i,o._instanceID=n.instanceID++,o.init(),o}return n.prototype.init=function(){this.children.forEach(function(e){e.components.forEach(function(r){r.init()})})},n.prototype.getPreferedAndFixedSizeSum=function(){var e=this.parent,r=0;return e.selectAll("div.layout-child-"+this._instanceID).filter(function(i){var a=_.getProperty(i,"growth");return a===pt.PREFERRED||a===pt.FIXED}).each(function(i){r+=i.size}),r},n.prototype.getNumOfStretchChildren=function(){var e=this.parent;return e.selectAll("div.layout-child-"+this._instanceID).filter(function(r){return _.getProperty(r,"growth")===pt.STRETCH}).size()},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.parent,a=$.getHTMLElementSize(i.node()),o=a.width,s=a.height,u=this.configs.direction===St.ROW||this.configs.direction===St.ROW_REVERSE,l=_.getProperty(this.model.getOptions(),"style","prefix"),c=i.classed(It.prefix+"--"+l+"--layout-row",this.configs.direction===St.ROW).classed(It.prefix+"--"+l+"--layout-row-reverse",this.configs.direction===St.ROW_REVERSE).classed(It.prefix+"--"+l+"--layout-column",this.configs.direction===St.COLUMN).classed(It.prefix+"--"+l+"--layout-column-reverse",this.configs.direction===St.COLUMN_REVERSE).classed(It.prefix+"--"+l+"--layout-alignitems-center",this.configs.alignItems===rr.CENTER).selectAll("div.layout-child-"+this._instanceID).data(this.children,function(d){return d.id}),f=c.enter().append("div");f.merge(i.selectAll("div.layout-child-"+this._instanceID)).attr("class",function(d){return"layout-child layout-child-"+r._instanceID+" "+d.id}).each(function(d){var p=this;d.components.forEach(function(m){var v=V(p),x=_.getProperty(d,"renderType"),g=x===it.SVG;m.setParent(g?$.appendOrSelect(v,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):v);var y=_.getProperty(d,"growth");(y===pt.PREFERRED||y===pt.FIXED)&&m.render(e)})}),i.selectAll("div.layout-child-"+this._instanceID).style("height",null).style("width",null).each(function(d){var p=_.getProperty(d,"growth"),m=_.getProperty(d,"renderType"),v=m===it.SVG?$.getSVGElementSize(V(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):$.getHTMLElementSize(this);if(p===pt.PREFERRED){var x=u?v.width:v.height,g=u?o:s;d.size=x/g*100}}),c.exit().remove(),this.children.filter(function(d){var p=_.getProperty(d,"growth");return p===pt.STRETCH}).forEach(function(d,p){d.size=(100-+r.getPreferedAndFixedSizeSum())/+r.getNumOfStretchChildren()});var h=i.selectAll("div.layout-child-"+this._instanceID).data(this.children,function(d){return d.id});u?h.style("width",function(d){return d.size/100*o+"px"}).style("height","100%"):h.style("height",function(d){return d.size/100*s+"px"}).style("width","100%"),h.each(function(d,p){d.components.forEach(function(m){var v=_.getProperty(d,"growth");v===pt.STRETCH&&m.render(e)})})},n.prototype.setModel=function(e){t.prototype.setModel.call(this,e),this.children.forEach(function(r){r.components.forEach(function(i){return i.setModel(e)})})},n.prototype.setServices=function(e){t.prototype.setServices.call(this,e),this.children.forEach(function(r){r.components.forEach(function(i){return i.setServices(e)})})},n.prototype.destroy=function(){this.children.forEach(function(e){e.components.forEach(function(r){return r.destroy()})})},n.instanceID=Math.floor(Math.random()*99999999999),n}(ft);function dk(t){return t}var Sa=1,Ea=2,Nu=3,qr=4,wp=1e-6;function pk(t){return"translate("+t+",0)"}function vk(t){return"translate(0,"+t+")"}function gk(t){return n=>+t(n)}function mk(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function yk(){return!this.__axis}function Ma(t,n){var e=[],r=null,i=null,a=6,o=6,s=3,u=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,l=t===Sa||t===qr?-1:1,c=t===qr||t===Ea?"x":"y",f=t===Sa||t===Nu?pk:vk;function h(d){var p=r==null?n.ticks?n.ticks.apply(n,e):n.domain():r,m=i==null?n.tickFormat?n.tickFormat.apply(n,e):dk:i,v=Math.max(a,0)+s,x=n.range(),g=+x[0]+u,y=+x[x.length-1]+u,T=(n.bandwidth?mk:gk)(n.copy(),u),b=d.selection?d.selection():d,O=b.selectAll(".domain").data([null]),k=b.selectAll(".tick").data(p,n).order(),w=k.exit(),S=k.enter().append("g").attr("class","tick"),R=k.select("line"),C=k.select("text");O=O.merge(O.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(S),R=R.merge(S.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),C=C.merge(S.append("text").attr("fill","currentColor").attr(c,l*v).attr("dy",t===Sa?"0em":t===Nu?"0.71em":"0.32em")),d!==b&&(O=O.transition(d),k=k.transition(d),R=R.transition(d),C=C.transition(d),w=w.transition(d).attr("opacity",wp).attr("transform",function(N){return isFinite(N=T(N))?f(N+u):this.getAttribute("transform")}),S.attr("opacity",wp).attr("transform",function(N){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(N))?L:T(N))+u)})),w.remove(),O.attr("d",t===qr||t===Ea?o?"M"+l*o+","+g+"H"+u+"V"+y+"H"+l*o:"M"+u+","+g+"V"+y:o?"M"+g+","+l*o+"V"+u+"H"+y+"V"+l*o:"M"+g+","+u+"H"+y),k.attr("opacity",1).attr("transform",function(N){return f(T(N)+u)}),R.attr(c+"2",l*a),C.attr(c,l*v).text(m),b.filter(yk).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ea?"start":t===qr?"end":"middle"),b.each(function(){this.__axis=T})}return h.scale=function(d){return arguments.length?(n=d,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(e=d==null?[]:Array.from(d),h):e.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(u=+d,h):u},h}function _k(t){return Ma(Sa,t)}function xk(t){return Ma(Ea,t)}function Sp(t){return Ma(Nu,t)}function Ep(t){return Ma(qr,t)}var bk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ok=function(t){bk(n,t);function n(e,r,i){var a=t.call(this,e,r,i)||this;return a.type="axes",a.renderType=it.SVG,i&&(a.configs=i),a.margins=a.configs.margins,a}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this.configs.position,a=this.getOptions(),o=_.getProperty(a,"axes",i,"visible"),s=this.getComponentContainer(),u=$.getSVGElementSize(s,{useAttrs:!0}),l=u.width,c=u.height,f=$.appendOrSelect(s,"g.axis."+i),h,d;i===j.BOTTOM||i===j.TOP?(h=this.configs.axes[j.LEFT]?this.margins.left:0,d=this.configs.axes[j.RIGHT]?l-this.margins.right:l):(h=c-this.margins.bottom,d=this.margins.top);var p=this.services.cartesianScales.getScaleByPosition(i);this.scaleType===et.LABELS||this.scaleType===et.LABELS_RATIO?p.rangeRound([h,d]):p.range([h,d]);var m;switch(i){case j.LEFT:m=Ep;break;case j.BOTTOM:m=Sp;break;case j.RIGHT:m=xk;break;case j.TOP:m=_k;break}f.attr("aria-label",i+" axis");var v=!f.select("g.ticks").empty(),x=$.appendOrSelect(f,"g.ticks");v||(x.attr("role",st.GRAPHICS_OBJECT+" "+st.GROUP),x.attr("aria-label",i+" ticks"));var g=$.appendOrSelect(f,"g.ticks.invisible").style("opacity","0").style("pointer-events","none").attr("aria-hidden",!0).attr("aria-label","invisible "+i+" ticks"),y=_.getProperty(a,"axes",i),T=this.scaleType===et.TIME||y.scaleType===et.TIME,b=i===j.LEFT||i===j.RIGHT,O=this.model.get("zoomDomain");if(O&&T&&!b&&p.domain(O),!o){x.attr("aria-hidden",!0);return}var k=_.getProperty(y,"scaleType"),w=_.getProperty(a,"data","loading"),S=_.getProperty(y,"ticks","number"),R=_.getProperty(y,"ticks","values"),C=_.getProperty(y,"truncation","type"),N=_.getProperty(y,"truncation","threshold"),L=_.getProperty(y,"truncation","numCharacter"),I=S!==null,E=_.getProperty(a,"timeScale"),A=$.appendOrSelect(g,"g.tick"),D=$.appendOrSelect(A,"text").text("0"),B=$.getSVGElementSize(D.node(),{useBBox:!0}).height;A.remove();var M=this.scaleType||y.scaleType||et.LINEAR,U=m(p).tickSizeOuter(0);if(p.ticks){var G=void 0;if(I?G=S:(G=Ye.ticks.number,b&&(G=this.getNumberOfFittingTicks(c,B,Ye.ticks.verticalSpaceRatio))),p.ticks().length===1&&p.ticks()[0]===0&&(G=0),U.ticks(G),T)if(!p.ticks(G).length)U.tickValues([]);else{var q=_.getProperty(a,"timeScale","addSpaceOnEdges"),tt=_.getProperty(a,"axes",i,"domain"),J=void 0,Y=p.copy();q&&!tt&&Y.nice(G),J=Y.ticks(G),q&&J.length>2&&!tt&&(J.splice(J.length-1,1),J.splice(0,1)),U.tickValues(J)}}var Q,K=_.getProperty(y,"ticks","formatter");if(T){var nt=Tu(U.tickValues());K===null?Q=function(lt,Ft){return Ou(lt,Ft,U.tickValues(),nt,E)}:Q=function(lt,Ft){var rv=Ou(lt,Ft,U.tickValues(),nt,E);return K(lt,Ft,rv)}}else K===null?M===et.LINEAR&&(Q=function(lt){return lt.toLocaleString()}):Q=K;U.tickFormat(Q);var z=this.services.cartesianScales.getScaleByPosition(i).domain(),Z=z[0],at=z[1],H;if(R){if(T)R.forEach(function(lt,Ft){lt.getTime===void 0&&(R[Ft]=new Date(lt))}),H=R.filter(function(lt){var Ft=lt.getTime();return Ft>=new Date(Z).getTime()&&Ft<=new Date(at).getTime()});else if(k===et.LABELS){var ct=this.services.cartesianScales.getScaleByPosition(i).domain();H=R.filter(function(lt){return ct.includes(lt)})}else H=R.filter(function(lt){return lt>=Z&&lt<=at});U.tickValues(H)}switch(i){case j.LEFT:x.attr("transform","translate("+this.margins.left+", 0)");break;case j.BOTTOM:x.attr("transform","translate(0, "+(c-this.margins.bottom)+")");break;case j.RIGHT:x.attr("transform","translate("+(l-this.margins.right)+", 0)");break;case j.TOP:x.attr("transform","translate(0, "+this.margins.top+")");break}var ot=this.model.isDataEmpty();if(y.title){var dt=$.appendOrSelect(f,"text.axis-title").html(ot||w?"":y.title),Et=_.getProperty(y,"titleOrientation");switch(i){case j.LEFT:Et===si.RIGHT?dt.attr("transform","rotate(90)").attr("y",0).attr("x",p.range()[0]/2).attr("dy","-0.5em").style("text-anchor","middle"):dt.attr("transform","rotate(-90)").attr("y",0).attr("x",-(p.range()[0]/2)).attr("dy","0.75em").style("text-anchor","middle");break;case j.BOTTOM:dt.attr("transform","translate("+(this.margins.left/2+p.range()[1]/2)+", "+(c+4)+")").style("text-anchor","middle");break;case j.RIGHT:Et===si.LEFT?dt.attr("transform","rotate(-90)").attr("y",l).attr("x",-(p.range()[0]/2)).style("text-anchor","middle"):dt.attr("transform","rotate(90)").attr("y",-l).attr("x",p.range()[0]/2).attr("dy","0.75em").style("text-anchor","middle");break;case j.TOP:var F=$.getSVGElementSize(dt,{useBBox:!0}).height;dt.attr("transform","translate("+(this.margins.left/2+p.range()[1]/2)+", "+F/2+")").style("text-anchor","middle");break}}if(T){var W=Tu(U.tickValues()),X=E.showDayName,Bt=x;e&&(x=x.transition().call(function(lt){return r.services.transitions.setupTransition({transition:lt,name:"axis-update",animate:e})})),x=x.call(U);var Qp=Bt.selectAll(".tick").data(U.tickValues(),p).order().select("text");Qp.style("font-weight",function(lt,Ft){return Hd(lt,Ft,U.tickValues(),W,X)?"bold":"normal"})}else!e||!v?x=x.call(U):x=x.transition().call(function(lt){return r.services.transitions.setupTransition({transition:lt,name:"axis-update",animate:e})}).call(U);if(g.call(U),i===j.BOTTOM||i===j.TOP){var yn=!1,Qr=_.getProperty(y,"ticks","rotation");if(Qr===or.ALWAYS)yn=!0;else if(Qr===or.NEVER)yn=!1;else if(!Qr||Qr===or.AUTO)if(p.step){var Jp=g.selectAll("g.tick text").nodes();yn=Jp.some(function(lt){return $.getSVGElementSize(lt,{useBBox:!0}).width>=p.step()})}else{yn=!1;var tv=g.append("text").text("A"),ev=$.getSVGElementSize(tv.node(),{useBBox:!0}).width,nl;g.selectAll("g.tick").each(function(){var lt=V(this),Ft=parseFloat(_.getProperty(_.getTranslationValues(this),"tx"));Ft!==null&&nl+lt.text().length*ev*.8>=Ft&&(yn=!0),nl=Ft})}yn?(I||(U.ticks(this.getNumberOfFittingTicks(l,B,Ye.ticks.horizontalSpaceRatio)),g.call(U),x.call(U)),f.selectAll("g.ticks g.tick text").attr("transform","rotate(-45)").style("text-anchor",i===j.TOP?"start":"end")):f.selectAll("g.ticks g.tick text").attr("transform",null).style("text-anchor",null)}if(w?f.attr("opacity",0):f.attr("opacity",1),x.selectAll("g.tick").attr("aria-label",function(lt){return lt}),g.selectAll("g.tick").attr("aria-label",function(lt){return lt}),C!==Oe.NONE&&k===et.LABELS&&!R){var Jr=this.services.cartesianScales.getScaleDomain(i);if(Jr.length>0){var nv=s.select("g.axis."+i+" g.ticks g.tick").html();f.selectAll("g.ticks g.tick").html(nv),f.selectAll("g.tick text").data(Jr).text(function(lt){return lt.length>N?_.truncateLabel(lt,C,L):lt}),this.getInvisibleAxisRef().selectAll("g.tick text").data(Jr).text(function(lt){return lt.length>N?_.truncateLabel(lt,C,L):lt}),f.selectAll("g.ticks").html(this.getInvisibleAxisRef().html()),f.selectAll("g.tick text").data(Jr)}}this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.getComponentContainer(),r=this.configs.position,i=$.appendOrSelect(e,"g.axis."+r),a=this.getOptions(),o=_.getProperty(a,"axes",r),s=_.getProperty(o,"scaleType"),u=_.getProperty(o,"truncation","threshold");this.scaleType===et.TIME||(o.scaleType,et.TIME);var l=this;i.selectAll("g.tick text").on("mouseover",function(c,f){l.services.events.dispatchEvent(P.Axis.LABEL_MOUSEOVER,{event:c,element:V(this),datum:f}),s===et.LABELS&&f.length>u&&l.services.events.dispatchEvent(P.Tooltip.SHOW,{event:c,hoveredElement:V(this),content:f})}).on("mousemove",function(c,f){l.services.events.dispatchEvent(P.Axis.LABEL_MOUSEMOVE,{event:c,element:V(this),datum:f}),s===et.LABELS&&f.length>u&&l.services.events.dispatchEvent(P.Tooltip.MOVE,{event:c})}).on("click",function(c,f){l.services.events.dispatchEvent(P.Axis.LABEL_CLICK,{event:c,element:V(this),datum:f})}).on("mouseout",function(c,f){l.services.events.dispatchEvent(P.Axis.LABEL_MOUSEOUT,{event:c,element:V(this),datum:f}),s===et.LABELS&&l.services.events.dispatchEvent(P.Tooltip.HIDE)})},n.prototype.getInvisibleAxisRef=function(){var e=this.configs.position;return this.getComponentContainer().select("g.axis."+e+" g.ticks.invisible")},n.prototype.getTitleRef=function(){var e=this.configs.position;return this.getComponentContainer().select("g.axis."+e+" text.axis-title")},n.prototype.getNumberOfFittingTicks=function(e,r,i){var a=Math.floor(e/(r*i));return _.clamp(a,2,Ye.ticks.number)},n.prototype.destroy=function(){var e=this.getComponentContainer(),r=this.configs.position,i=$.appendOrSelect(e,"g.axis."+r);i.selectAll("g.tick text").on("mouseover",null).on("mousemove",null).on("mouseout",null)},n}(ft),Tk=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kt=function(t){Tk(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="2D-axes",e.renderType=it.SVG,e.children={},e.thresholds=[],e.margins={top:0,right:0,bottom:0,left:0},e}return n.prototype.render=function(e){var r=this;e===void 0&&(e=!1);var i={},a=Object.keys(j),o=_.getProperty(this.getOptions(),"axes");a.forEach(function(l){var c=o[j[l]];c&&(i[j[l]]=!0)}),this.configs.axes=i,a.forEach(function(l){var c=j[l];if(r.configs.axes[c]&&!r.children[c]){var f=new Ok(r.model,r.services,{position:c,axes:r.configs.axes,margins:r.margins});f.setModel(r.model),f.setServices(r.services),f.setParent(r.parent),r.children[c]=f}}),Object.keys(this.children).forEach(function(l){var c=r.children[l];c.render(e)});var s={};Object.keys(this.children).forEach(function(l){var c=r.children[l],f=c.configs.position,h=c.getInvisibleAxisRef(),d=$.getSVGElementSize(h,{useBBox:!0}),p=d.width,m=d.height,v;switch(c.getTitleRef().empty()?v=0:(v=$.getSVGElementSize(c.getTitleRef(),{useBBox:!0}).height,(f===j.LEFT||f===j.RIGHT)&&(v+=5)),f){case j.TOP:s.top=m+v;break;case j.BOTTOM:s.bottom=m+v;break;case j.LEFT:s.left=p+v;break;case j.RIGHT:s.right=p+v;break}});var u=Object.keys(s).some(function(l){return r.margins[l]!==s[l]});u&&(this.margins=Object.assign(this.margins,s),this.model.set({axesMargins:this.margins},{skipUpdate:!0}),this.services.events.dispatchEvent(P.ZoomBar.UPDATE),Object.keys(this.children).forEach(function(l){var c=r.children[l];c.margins=r.margins}),this.render(!0))},n}(ft),wk={value:()=>{}};function Bu(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new Ca(e)}function Ca(t){this._=t}function Sk(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}Ca.prototype=Bu.prototype={constructor:Ca,on:function(t,n){var e=this._,r=Sk(t+"",e),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Ek(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<o;)if(i=(t=r[a]).type)e[i]=Mp(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Mp(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Ca(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function Ek(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Mp(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=wk,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}const Uu={capture:!0,passive:!1};function Vu(t){t.preventDefault(),t.stopImmediatePropagation()}function Mk(t){var n=t.document.documentElement,e=V(t).on("dragstart.drag",Vu,Uu);"onselectstart"in n?e.on("selectstart.drag",Vu,Uu):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Ck(t,n){var e=t.document.documentElement,r=V(t).on("dragstart.drag",null);n&&(r.on("click.drag",Vu,Uu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var jn=0,Yr=0,Xr=0,Cp=1e3,Aa,Zr,Pa=0,mn=0,Da=0,Kr=typeof performance=="object"&&performance.now?performance:Date,Ap=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $u(){return mn||(Ap(Ak),mn=Kr.now()+Da)}function Ak(){mn=0}function La(){this._call=this._time=this._next=null}La.prototype=Pp.prototype={constructor:La,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?$u():+e)+(n==null?0:+n),!this._next&&Zr!==this&&(Zr?Zr._next=this:Aa=this,Zr=this),this._call=t,this._time=e,Gu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gu())}};function Pp(t,n,e){var r=new La;return r.restart(t,n,e),r}function Pk(){$u(),++jn;for(var t=Aa,n;t;)(n=mn-t._time)>=0&&t._call.call(void 0,n),t=t._next;--jn}function Dp(){mn=(Pa=Kr.now())+Da,jn=Yr=0;try{Pk()}finally{jn=0,Lk(),mn=0}}function Dk(){var t=Kr.now(),n=t-Pa;n>Cp&&(Da-=n,Pa=t)}function Lk(){for(var t,n=Aa,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Aa=e);Zr=t,Gu(r)}function Gu(t){if(!jn){Yr&&(Yr=clearTimeout(Yr));var n=t-mn;n>24?(t<1/0&&(Yr=setTimeout(Dp,t-Kr.now()-Da)),Xr&&(Xr=clearInterval(Xr))):(Xr||(Pa=Kr.now(),Xr=setInterval(Dk,Cp)),jn=1,Ap(Dp))}}function Lp(t,n,e){var r=new La;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var Rk=Bu("start","end","cancel","interrupt"),kk=[],Rp=0,kp=1,Fu=2,Ra=3,Ip=4,Hu=5,ka=6;function Ia(t,n,e,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(e in o)return;Ik(t,e,{name:n,index:r,group:i,on:Rk,tween:kk,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Rp})}function zu(t,n){var e=le(t,n);if(e.state>Rp)throw new Error("too late; already scheduled");return e}function _e(t,n){var e=le(t,n);if(e.state>Ra)throw new Error("too late; already running");return e}function le(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Ik(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Pp(a,0,e.time);function a(l){e.state=kp,e.timer.restart(o,e.delay,e.time),e.delay<=l&&o(l-e.delay)}function o(l){var c,f,h,d;if(e.state!==kp)return u();for(c in r)if(d=r[c],d.name===e.name){if(d.state===Ra)return Lp(o);d.state===Ip?(d.state=ka,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<n&&(d.state=ka,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Lp(function(){e.state===Ra&&(e.state=Ip,e.timer.restart(s,e.delay,e.time),s(l))}),e.state=Fu,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Fu){for(e.state=Ra,i=new Array(h=e.tween.length),c=0,f=-1;c<h;++c)(d=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(i[++f]=d);i.length=f+1}}function s(l){for(var c=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(u),e.state=Hu,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);e.state===Hu&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){e.state=ka,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function Wu(t,n){var e=t.__transition,r,i,a=!0,o;if(!!e){n=n==null?null:n+"";for(o in e){if((r=e[o]).name!==n){a=!1;continue}i=r.state>Fu&&r.state<Hu,r.state=ka,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[o]}a&&delete t.__transition}}function Nk(t){return this.each(function(){Wu(this,t)})}function Bk(t,n){var e,r;return function(){var i=_e(this,t),a=i.tween;if(a!==e){r=e=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===n){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Uk(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var a=_e(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function Vk(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=le(this.node(),e).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((n==null?Bk:Uk)(e,t,n))}function ju(t,n,e){var r=t._id;return t.each(function(){var i=_e(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return le(i,r).value[n]}}function Np(t,n){var e;return(typeof n=="number"?re:n instanceof Ee?Li:(e=Ee(n))?(n=e,Li):Yf)(t,n)}function $k(t){return function(){this.removeAttribute(t)}}function Gk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fk(t,n,e){var r,i=e+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=n(r=o,e)}}function Hk(t,n,e){var r,i=e+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=n(r=o,e)}}function zk(t,n,e){var r,i,a;return function(){var o,s=e(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=n(r=o,s)))}}function Wk(t,n,e){var r,i,a;return function(){var o,s=e(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=n(r=o,s)))}}function jk(t,n){var e=Ti(t),r=e==="transform"?rw:Np;return this.attrTween(t,typeof n=="function"?(e.local?Wk:zk)(e,r,ju(this,"attr."+t,n)):n==null?(e.local?Gk:$k)(e):(e.local?Hk:Fk)(e,r,n))}function qk(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Yk(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function Xk(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&Yk(t,a)),e}return i._value=n,i}function Zk(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&qk(t,a)),e}return i._value=n,i}function Kk(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=Ti(t);return this.tween(e,(r.local?Xk:Zk)(r,n))}function Qk(t,n){return function(){zu(this,t).delay=+n.apply(this,arguments)}}function Jk(t,n){return n=+n,function(){zu(this,t).delay=n}}function tI(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Qk:Jk)(n,t)):le(this.node(),n).delay}function eI(t,n){return function(){_e(this,t).duration=+n.apply(this,arguments)}}function nI(t,n){return n=+n,function(){_e(this,t).duration=n}}function rI(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?eI:nI)(n,t)):le(this.node(),n).duration}function iI(t,n){if(typeof n!="function")throw new Error;return function(){_e(this,t).ease=n}}function aI(t){var n=this._id;return arguments.length?this.each(iI(n,t)):le(this.node(),n).ease}function oI(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;_e(this,t).ease=e}}function sI(t){if(typeof t!="function")throw new Error;return this.each(oI(this._id,t))}function uI(t){typeof t!="function"&&(t=pf(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new De(r,this._parents,this._name,this._id)}function lI(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=n[s],l=e[s],c=u.length,f=o[s]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;s<r;++s)o[s]=n[s];return new De(o,this._parents,this._name,this._id)}function cI(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function fI(t,n,e){var r,i,a=cI(n)?zu:_e;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(n,e),o.on=i}}function hI(t,n){var e=this._id;return arguments.length<2?le(this.node(),e).on.on(t):this.each(fI(e,t,n))}function dI(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function pI(){return this.on("end.remove",dI(this._id))}function vI(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Qo(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),c,f,h=0;h<u;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Ia(l[h],n,e,h,l,le(c,e)));return new De(a,this._parents,n,e)}function gI(t){var n=this._name,e=this._id;typeof t!="function"&&(t=df(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),d,p=le(c,e),m=0,v=h.length;m<v;++m)(d=h[m])&&Ia(d,n,e,m,h,p);a.push(h),o.push(c)}return new De(a,o,n,e)}var mI=yr.prototype.constructor;function yI(){return new mI(this._groups,this._parents)}function _I(t,n){var e,r,i;return function(){var a=An(this,t),o=(this.style.removeProperty(t),An(this,t));return a===o?null:a===e&&o===r?i:i=n(e=a,r=o)}}function Bp(t){return function(){this.style.removeProperty(t)}}function xI(t,n,e){var r,i=e+"",a;return function(){var o=An(this,t);return o===i?null:o===r?a:a=n(r=o,e)}}function bI(t,n,e){var r,i,a;return function(){var o=An(this,t),s=e(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),An(this,t))),o===u?null:o===r&&u===i?a:(i=u,a=n(r=o,s))}}function OI(t,n){var e,r,i,a="style."+n,o="end."+a,s;return function(){var u=_e(this,t),l=u.on,c=u.value[a]==null?s||(s=Bp(n)):void 0;(l!==e||i!==c)&&(r=(e=l).copy()).on(o,i=c),u.on=r}}function TI(t,n,e){var r=(t+="")==="transform"?nw:Np;return n==null?this.styleTween(t,_I(t,r)).on("end.style."+t,Bp(t)):typeof n=="function"?this.styleTween(t,bI(t,r,ju(this,"style."+t,n))).each(OI(this._id,t)):this.styleTween(t,xI(t,r,n),e).on("end.style."+t,null)}function wI(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function SI(t,n,e){var r,i;function a(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&wI(t,o,e)),r}return a._value=n,a}function EI(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,SI(t,n,e==null?"":e))}function MI(t){return function(){this.textContent=t}}function CI(t){return function(){var n=t(this);this.textContent=n==null?"":n}}function AI(t){return this.tween("text",typeof t=="function"?CI(ju(this,"text",t)):MI(t==null?"":t+""))}function PI(t){return function(n){this.textContent=t.call(this,n)}}function DI(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&PI(i)),n}return r._value=t,r}function LI(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,DI(t))}function RI(){for(var t=this._name,n=this._id,e=Up(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=le(u,n);Ia(u,t,e,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new De(r,this._parents,t,e)}function kI(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i==0&&a()}};e.each(function(){var l=_e(this,r),c=l.on;c!==t&&(n=(t=c).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),l.on=n}),i===0&&a()})}var II=0;function De(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Up(){return++II}var Le=yr.prototype;De.prototype={constructor:De,select:vI,selectAll:gI,selectChild:Le.selectChild,selectChildren:Le.selectChildren,filter:uI,merge:lI,selection:yI,transition:RI,call:Le.call,nodes:Le.nodes,node:Le.node,size:Le.size,empty:Le.empty,each:Le.each,on:hI,attr:jk,attrTween:Kk,style:TI,styleTween:EI,text:AI,textTween:LI,remove:pI,tween:Vk,delay:tI,duration:rI,ease:aI,easeVarying:sI,end:kI,[Symbol.iterator]:Le[Symbol.iterator]};var NI={time:null,delay:0,duration:250,ease:Sl};function BI(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function UI(t){var n,e;t instanceof De?(n=t._id,t=t._name):(n=Up(),(e=NI).time=$u(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&Ia(u,t,n,l,o,e||BI(u,n));return new De(r,this._parents,t,n)}yr.prototype.interrupt=Nk;yr.prototype.transition=UI;var qu=t=>()=>t;function VI(t,{sourceEvent:n,target:e,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function $I(t){t.stopImmediatePropagation()}function Yu(t){t.preventDefault(),t.stopImmediatePropagation()}var Vp={name:"drag"},Xu={name:"space"},qn={name:"handle"},Yn={name:"center"};const{abs:$p,max:$t,min:Gt}=Math;function Gp(t){return[+t[0],+t[1]]}function Fp(t){return[Gp(t[0]),Gp(t[1])]}var Na={name:"x",handles:["w","e"].map(Ba),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Zu={name:"y",handles:["n","s"].map(Ba),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Re={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hp={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},zp={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},GI={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},FI={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ba(t){return{type:t}}function HI(t){return!t.ctrlKey&&!t.button}function zI(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function WI(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ku(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function jI(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Wp(){return qI(Na)}function qI(t){var n=zI,e=HI,r=WI,i=!0,a=Bu("start","brush","end"),o=6,s;function u(v){var x=v.property("__brush",m).selectAll(".overlay").data([Ba("overlay")]);x.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Re.overlay).merge(x).each(function(){var y=Ku(this).extent;V(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),v.selectAll(".selection").data([Ba("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Re.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var g=v.selectAll(".handle").data(t.handles,function(y){return y.type});g.exit().remove(),g.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return Re[y.type]}),v.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(v,x,g){v.tween?v.on("start.brush",function(y){c(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){c(this,arguments).end(y)}).tween("brush",function(){var y=this,T=y.__brush,b=c(y,arguments),O=T.selection,k=t.input(typeof x=="function"?x.apply(this,arguments):x,T.extent),w=Er(O,k);function S(R){T.selection=R===1&&k===null?null:w(R),l.call(y),b.brush()}return O!==null&&k!==null?S:S(1)}):v.each(function(){var y=this,T=arguments,b=y.__brush,O=t.input(typeof x=="function"?x.apply(y,T):x,b.extent),k=c(y,T).beforestart();Wu(y),b.selection=O===null?null:O,l.call(y),k.start(g).brush(g).end(g)})},u.clear=function(v,x){u.move(v,null,x)};function l(){var v=V(this),x=Ku(this).selection;x?(v.selectAll(".selection").style("display",null).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(g){return g.type[g.type.length-1]==="e"?x[1][0]-o/2:x[0][0]-o/2}).attr("y",function(g){return g.type[0]==="s"?x[1][1]-o/2:x[0][1]-o/2}).attr("width",function(g){return g.type==="n"||g.type==="s"?x[1][0]-x[0][0]+o:o}).attr("height",function(g){return g.type==="e"||g.type==="w"?x[1][1]-x[0][1]+o:o})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(v,x,g){var y=v.__brush.emitter;return y&&(!g||!y.clean)?y:new f(v,x,g)}function f(v,x,g){this.that=v,this.args=x,this.state=v.__brush,this.active=0,this.clean=g}f.prototype={beforestart:function(){return++this.active==1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,x){return this.starting?(this.starting=!1,this.emit("start",v,x)):this.emit("brush",v),this},brush:function(v,x){return this.emit("brush",v,x),this},end:function(v,x){return--this.active==0&&(delete this.state.emitter,this.emit("end",v,x)),this},emit:function(v,x,g){var y=V(this.that).datum();a.call(v,this.that,new VI(v,{sourceEvent:x,target:u,selection:t.output(this.state.selection),mode:g,dispatch:a}),y)}};function h(v){if(s&&!v.touches||!e.apply(this,arguments))return;var x=this,g=v.target.__data__.type,y=(i&&v.metaKey?g="overlay":g)==="selection"?Vp:i&&v.altKey?Yn:qn,T=t===Zu?null:GI[g],b=t===Na?null:FI[g],O=Ku(x),k=O.extent,w=O.selection,S=k[0][0],R,C,N=k[0][1],L,I,E=k[1][0],A,D,B=k[1][1],M,U,G=0,q=0,tt,J=T&&b&&i&&v.shiftKey,Y,Q,K=Array.from(v.touches||[v],F=>{const W=F.identifier;return F=nn(F,x),F.point0=F.slice(),F.identifier=W,F});Wu(x);var nt=c(x,arguments,!0).beforestart();if(g==="overlay"){w&&(tt=!0);const F=[K[0],K[1]||K[0]];O.selection=w=[[R=t===Zu?S:Gt(F[0][0],F[1][0]),L=t===Na?N:Gt(F[0][1],F[1][1])],[A=t===Zu?E:$t(F[0][0],F[1][0]),M=t===Na?B:$t(F[0][1],F[1][1])]],K.length>1&&ct(v)}else R=w[0][0],L=w[0][1],A=w[1][0],M=w[1][1];C=R,I=L,D=A,U=M;var z=V(x).attr("pointer-events","none"),Z=z.selectAll(".overlay").attr("cursor",Re[g]);if(v.touches)nt.moved=H,nt.ended=ot;else{var at=V(v.view).on("mousemove.brush",H,!0).on("mouseup.brush",ot,!0);i&&at.on("keydown.brush",dt,!0).on("keyup.brush",Et,!0),Mk(v.view)}l.call(x),nt.start(v,y.name);function H(F){for(const W of F.changedTouches||[F])for(const X of K)X.identifier===W.identifier&&(X.cur=nn(W,x));if(J&&!Y&&!Q&&K.length===1){const W=K[0];$p(W.cur[0]-W[0])>$p(W.cur[1]-W[1])?Q=!0:Y=!0}for(const W of K)W.cur&&(W[0]=W.cur[0],W[1]=W.cur[1]);tt=!0,Yu(F),ct(F)}function ct(F){const W=K[0],X=W.point0;var Bt;switch(G=W[0]-X[0],q=W[1]-X[1],y){case Xu:case Vp:{T&&(G=$t(S-R,Gt(E-A,G)),C=R+G,D=A+G),b&&(q=$t(N-L,Gt(B-M,q)),I=L+q,U=M+q);break}case qn:{K[1]?(T&&(C=$t(S,Gt(E,K[0][0])),D=$t(S,Gt(E,K[1][0])),T=1),b&&(I=$t(N,Gt(B,K[0][1])),U=$t(N,Gt(B,K[1][1])),b=1)):(T<0?(G=$t(S-R,Gt(E-R,G)),C=R+G,D=A):T>0&&(G=$t(S-A,Gt(E-A,G)),C=R,D=A+G),b<0?(q=$t(N-L,Gt(B-L,q)),I=L+q,U=M):b>0&&(q=$t(N-M,Gt(B-M,q)),I=L,U=M+q));break}case Yn:{T&&(C=$t(S,Gt(E,R-G*T)),D=$t(S,Gt(E,A+G*T))),b&&(I=$t(N,Gt(B,L-q*b)),U=$t(N,Gt(B,M+q*b)));break}}D<C&&(T*=-1,Bt=R,R=A,A=Bt,Bt=C,C=D,D=Bt,g in Hp&&Z.attr("cursor",Re[g=Hp[g]])),U<I&&(b*=-1,Bt=L,L=M,M=Bt,Bt=I,I=U,U=Bt,g in zp&&Z.attr("cursor",Re[g=zp[g]])),O.selection&&(w=O.selection),Y&&(C=w[0][0],D=w[1][0]),Q&&(I=w[0][1],U=w[1][1]),(w[0][0]!==C||w[0][1]!==I||w[1][0]!==D||w[1][1]!==U)&&(O.selection=[[C,I],[D,U]],l.call(x),nt.brush(F,y.name))}function ot(F){if($I(F),F.touches){if(F.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Ck(F.view,tt),at.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);z.attr("pointer-events","all"),Z.attr("cursor",Re.overlay),O.selection&&(w=O.selection),jI(w)&&(O.selection=null,l.call(x)),nt.end(F,y.name)}function dt(F){switch(F.keyCode){case 16:{J=T&&b;break}case 18:{y===qn&&(T&&(A=D-G*T,R=C+G*T),b&&(M=U-q*b,L=I+q*b),y=Yn,ct(F));break}case 32:{(y===qn||y===Yn)&&(T<0?A=D-G:T>0&&(R=C-G),b<0?M=U-q:b>0&&(L=I-q),y=Xu,Z.attr("cursor",Re.selection),ct(F));break}default:return}Yu(F)}function Et(F){switch(F.keyCode){case 16:{J&&(Y=Q=J=!1,ct(F));break}case 18:{y===Yn&&(T<0?A=D:T>0&&(R=C),b<0?M=U:b>0&&(L=I),y=qn,ct(F));break}case 32:{y===Xu&&(F.altKey?(T&&(A=D-G*T,R=C+G*T),b&&(M=U-q*b,L=I+q*b),y=Yn):(T<0?A=D:T>0&&(R=C),b<0?M=U:b>0&&(L=I),y=qn),Z.attr("cursor",Re[g]),ct(F));break}default:return}Yu(F)}}function d(v){c(this,arguments).moved(v)}function p(v){c(this,arguments).ended(v)}function m(){var v=this.__brush||{selection:null};return v.extent=Fp(n.apply(this,arguments)),v.dim=t,v}return u.extent=function(v){return arguments.length?(n=typeof v=="function"?v:qu(Fp(v)),u):n},u.filter=function(v){return arguments.length?(e=typeof v=="function"?v:qu(!!v),u):e},u.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:qu(!!v),u):r},u.handleSize=function(v){return arguments.length?(o=+v,u):o},u.keyModifiers=function(v){return arguments.length?(i=!!v,u):i},u.on=function(){var v=a.on.apply(a,arguments);return v===a?u:v},u}var YI=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),XI=function(t){YI(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="grid-brush",e.renderType=it.SVG,e.selectionSelector="rect.selection",e.frontSelectionSelector="rect.frontSelection",e}return n.prototype.render=function(e){var r=this,i=this.parent,a=this.getComponentContainer(),o=$.appendOrSelect(i,"svg.chart-grid-backdrop"),s=$.appendOrSelect(o,"g."+this.type),u=$.appendOrSelect(s,this.selectionSelector),l=$.getSVGElementSize(o,{useAttrs:!0}),c=l.width,f=l.height,h=this.services.cartesianScales,d=h.getMainXScaleType(),p=h.getMainXScale(),m=p.range(),v=m[0];m[1],a.attr("transform","translate("+v+",0)");var x=$.appendOrSelect(a,this.frontSelectionSelector);if(p&&d===et.TIME){var g=this.model.get("zoomDomain");g===void 0&&(g=this.services.zoom.getDefaultZoomBarDomain(),g&&this.model.set({zoomDomain:g},{animate:!1}));var y=function(S){for(var R=S[1]-S[0],C="0,"+R.toString(),N=Math.floor(f/n.DASH_LENGTH),L=N*n.DASH_LENGTH,I=0;I<N;I++)C+=","+n.DASH_LENGTH;C+=","+(f-L),N%2==1&&(C+=",0"),C+=","+R.toString(),C+=","+f.toString(),x.attr("stroke-dasharray",C)},T=function(S){var R=S.selection;R===null||R[0]===R[1]||(x.attr("x",parseFloat(u.attr("x"))+parseFloat(o.attr("x"))).attr("y",u.attr("y")).attr("width",u.attr("width")).attr("height",u.attr("height")).style("cursor","pointer").style("display",null),y(R))},b=function(S,R){var C=Uh().range([0,c]).domain(g),N=[C.invert(S),C.invert(R)];N[0].valueOf()===N[1].valueOf()&&(N=r.services.zoom.getDefaultZoomBarDomain()),(g[0].valueOf()!==N[0].valueOf()||g[1].valueOf()!==N[1].valueOf())&&r.services.zoom.handleDomainChange(N)},O=function(S){var R=S.selection;R!==null&&(b(R[0],R[1]),s.call(k.move,null),x.style("display","none"))},k=Wp().extent([[0,0],[c-1,f]]).on("start brush end",T).on("end.brushed",O);s.call(k);var w=this.services.zoom.getZoomRatio();o.on("click",function(S){if(S.shiftKey){var R=this.services.domUtils.getHolder(),C=nn(s.node(),R)[0],N=C-c*w/2;N<0&&(N=0);var L=C+c*w/2;L>c&&(L=c),b(N,L)}})}},n.DASH_LENGTH=4,n}(ft),ZI=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qt=function(t){ZI(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="grid",e.renderType=it.SVG,e}return n.prototype.render=function(e){e===void 0&&(e=!0);var r=_.getProperty(this.getOptions(),"grid","x","enabled"),i=_.getProperty(this.getOptions(),"grid","y","enabled");this.drawBackdrop(r,i),!(!r&&!i)&&(r&&($.appendOrSelect(this.backdrop,"g.x.grid"),this.drawXGrid(e)),i&&($.appendOrSelect(this.backdrop,"g.y.grid"),this.drawYGrid(e)))},n.prototype.drawXGrid=function(e){var r=this,i=this.parent,a=this.backdrop.attr("height"),o=this.services.cartesianScales.getMainXScale(),s=Sp(o).tickSizeInner(-a).tickSizeOuter(0),u=_.getProperty(this.getOptions(),"grid","x","alignWithAxisTicks");if(u){var l=this.services.cartesianScales.getDomainAxisPosition(),c=_.getProperty(this.getOptions(),"axes",l,"ticks","values");c&&s.tickValues(c)}else{var f=_.getProperty(this.getOptions(),"grid","x","numberOfTicks");s.ticks(f)}var h=i.select(".x.grid").attr("transform","translate("+-this.backdrop.attr("x")+", "+a+")");e?h.transition().call(function(d){return r.services.transitions.setupTransition({transition:d,name:"grid-update",animate:e})}).call(s):h.call(s),this.cleanGrid(h)},n.prototype.drawYGrid=function(e){var r=this,i=this.parent,a=this.backdrop.attr("width"),o=this.services.cartesianScales.getMainYScale(),s=Ep(o).tickSizeInner(-a).tickSizeOuter(0),u=_.getProperty(this.getOptions(),"grid","y","alignWithAxisTicks");if(u){var l=this.services.cartesianScales.getRangeAxisPosition(),c=_.getProperty(this.getOptions(),"axes",l,"ticks","values");c&&s.tickValues(c)}else{var f=_.getProperty(this.getOptions(),"grid","y","numberOfTicks");s.ticks(f)}var h=i.select(".y.grid").attr("transform","translate(0, "+-this.backdrop.attr("y")+")");e?h.transition().call(function(d){return r.services.transitions.setupTransition({transition:d,name:"grid-update",animate:e})}).call(s):h.call(s),this.cleanGrid(h)},n.prototype.getGridlineThreshold=function(e){var r=this.parent,i=r.selectAll(".x.grid .tick").nodes().sort(function(d,p){return Number(_.getTranslationValues(d).tx)-Number(_.getTranslationValues(p).tx)}),a=-1,o;if(!!i.length){i.forEach(function(d,p){e[0]>=+_.getTranslationValues(d).tx&&a++}),o=a+1<i.length?a+1:i.length;var s=i[a],u=i[o],l;if(!s)l=+_.getTranslationValues(u).tx;else if(u)l=+_.getTranslationValues(u).tx-+_.getTranslationValues(s).tx;else{var c=r.select("rect.chart-grid-backdrop").node(),f=$.getSVGElementSize(c).width;l=f-+_.getTranslationValues(s).tx}var h=this.getOptions().tooltip.gridline.threshold;return l*h}},n.prototype.getActiveGridline=function(e){var r=_.getProperty(this.getOptions,"tooltip","gridline","threshold"),i=r||this.getGridlineThreshold(e),a=this.parent,o=a.selectAll(".x.grid .tick").filter(function(){var s=_.getTranslationValues(this),u={min:Number(s.tx)-i,max:Number(s.tx)+i};return u.min<=e[0]&&e[0]<=u.max});return o},n.prototype.drawBackdrop=function(e,r){var i=this.parent,a=this.services.cartesianScales.getMainXScale(),o=this.services.cartesianScales.getMainYScale(),s=a.range(),u=s[0],l=s[1],c=o.range(),f=c[0],h=c[1];this.backdrop=$.appendOrSelect(i,"svg.chart-grid-backdrop");var d=$.appendOrSelect(this.backdrop,e||r?"rect.chart-grid-backdrop.stroked":"rect.chart-grid-backdrop");this.backdrop.merge(d).attr("x",u).attr("y",h).attr("width",Math.abs(l-u)).attr("height",Math.abs(f-h)).lower(),d.attr("width","100%").attr("height","100%")},n.prototype.cleanGrid=function(e){e.selectAll("text").remove(),e.select(".domain").remove()},n}(ft),KI=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),jp=5;function QI(t,n){return t>n-jp&&t<n+jp}var ze=function(t){KI(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="ruler",e.renderType=it.SVG,e.isXGridEnabled=_.getProperty(e.getOptions(),"grid","x","enabled"),e.isYGridEnabled=_.getProperty(e.getOptions(),"grid","y","enabled"),e.isEventListenerAdded=!1,e}return n.prototype.render=function(){var e=_.getProperty(this.getOptions(),"ruler","enabled");this.drawBackdrop(),e&&!this.isEventListenerAdded?this.addBackdropEventListeners():!e&&this.isEventListenerAdded&&this.removeBackdropEventListeners()},n.prototype.removeBackdropEventListeners=function(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)},n.prototype.formatTooltipData=function(e){return e},n.prototype.showRuler=function(e,r){var i=this,a=r[0],o=r[1],s=this.parent,u=this.services.cartesianScales.getOrientation(),l=this.model.getDisplayData(),c=this.services.cartesianScales.getRangeScale(),f=c.range(),h=f[0],d=f[1],p=u===At.HORIZONTAL?o:a,m=$.appendOrSelect(s,"g.ruler").attr("aria-label","ruler"),v=$.appendOrSelect(m,"line.ruler-line"),x=s.selectAll("[role=graphics-symbol]"),g=l.map(function(w){return{domainValue:i.services.cartesianScales.getDomainValue(w),originalData:w}}).filter(function(w){return QI(w.domainValue,p)});if(this.pointsWithinLine&&g.length===this.pointsWithinLine.length&&g.map(function(w){return w.domainValue}).join()===this.pointsWithinLine.map(function(w){return w.domainValue}).join())return this.pointsWithinLine=g,this.services.events.dispatchEvent(P.Tooltip.MOVE,{mousePosition:[a,o]});this.pointsWithinLine=g;var y=this.pointsWithinLine.reduce(function(w,S){if(w.length===0)return w.push(S),w;var R=w[0].domainValue,C=Math.abs(p-S.domainValue),N=Math.abs(p-R);return C>N||(C<N?w=[S]:w.push(S)),w},[]);if(y.length>0){var T=y.map(function(w){return w.originalData}).filter(function(w){var S=i.services.cartesianScales.getRangeIdentifier(w),R=w[S];return R!=null}),b=y.map(function(w){return w.domainValue}),O=x.filter(function(w){var S=i.services.cartesianScales.getDomainValue(w);return b.includes(S)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!_.isEqual(this.elementsToHighlight,O)&&this.hideRuler(),O.dispatch("mouseover"),this.elementsToHighlight=O,this.services.events.dispatchEvent(P.Tooltip.SHOW,{mousePosition:[a,o],hoveredElement:v,data:this.formatTooltipData(T)}),m.attr("opacity",1);var k=y[0];u==="horizontal"?v.attr("x1",d).attr("x2",h).attr("y1",k.domainValue).attr("y2",k.domainValue):v.attr("y1",d).attr("y2",h).attr("x1",k.domainValue).attr("x2",k.domainValue)}else this.hideRuler()},n.prototype.hideRuler=function(){var e=this.parent,r=$.appendOrSelect(e,"g.ruler"),i=e.selectAll("[role=graphics-symbol]");i.dispatch("mouseout"),this.services.events.dispatchEvent(P.Tooltip.HIDE),r.attr("opacity",0)},n.prototype.addBackdropEventListeners=function(){this.isEventListenerAdded=!0;var e=this,r=this.services.domUtils.getHolder(),i=this.model.getDisplayData(),a=function(s){var u=nn(s,e.parent.node());e.showRuler(s,u)};if(i.length>100){var o=i.length%50*12.5;a=_.debounceWithD3MousePosition(function(s){var u=this.mousePosition;e.showRuler(s,u)},o,r)}this.backdrop.on("mousemove mouseover",a).on("mouseout",this.hideRuler.bind(this))},n.prototype.drawBackdrop=function(){var e=this.parent;this.backdrop=$.appendOrSelect(e,"svg.chart-grid-backdrop")},n}(ft),JI=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tN=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},eN=function(t){JI(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="ruler-binned",e.renderType=it.SVG,e}return n.prototype.showRuler=function(e,r){var i=this,a=r[0],o=r[1],s=this.parent,u=this.model.getOptions(),l=this.services.cartesianScales.getOrientation(),c=this.services.cartesianScales.getRangeScale(),f=c.range(),h=f[0],d=f[1],p=this.services.cartesianScales.getDomainScale(),m=p.invert(l===At.VERTICAL?a:o),v=$.appendOrSelect(s,"g.ruler").attr("aria-label","ruler"),x=$.appendOrSelect(v,"line.ruler-line"),g=s.selectAll("[role=graphics-symbol]"),y=g.filter(function(C){if(parseFloat(bt(C,"data.x0"))<=m&&parseFloat(bt(C,"data.x1"))>=m)return!0});if(y.size()>0){this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!_.isEqual(this.elementsToHighlight,y)&&this.hideRuler(),y.dispatch("mouseover"),this.elementsToHighlight=y;var T=V(y.nodes()[0]).datum(),b=parseFloat(bt(T,"data.x0")),O=parseFloat(bt(T,"data.x1")),k=this.model.getActiveDataGroupNames(),w=k.reverse().map(function(C){return{label:C,value:bt(T,"data."+C),class:i.model.getColorClassName({classNameTypes:[rt.TOOLTIP],dataGroupName:C})}}).filter(function(C){return C.value!==0}),S=w.length>0;if(S){this.services.events.dispatchEvent(P.Tooltip.SHOW,{mousePosition:[a,o],hoveredElement:x,items:tN([{label:bt(u,"bins.rangeLabel")||"Range",value:b+" \u2013 "+O}],w,_.getProperty(u,"tooltip","showTotal")===!0?[{label:bt(u,"tooltip.totalLabel")||"Total",value:k.reduce(function(C,N){return C+parseFloat(bt(T,"data."+N))},0)}]:[])}),v.attr("opacity",1);var R=p((b+O)/2);l==="horizontal"?x.attr("x1",d).attr("x2",h).attr("y1",R).attr("y2",R):x.attr("y1",d).attr("y2",h).attr("x1",R).attr("x2",R)}else this.hideRuler()}else this.hideRuler()},n}(ze),nN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ua=function(t){nN(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.formatTooltipData=function(e){return e.reverse()},n}(ze),rN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),qp=function(t){rN(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="toolbar",e.renderType=it.HTML,e}return n.prototype.init=function(){var e=this,r=function(){return e.updateOverflowMenu(!1)};this.services.events.addEventListener(P.Toolbar.SHOW_OVERFLOW_MENU,function(){e.renderOverflowMenu(),document.body.addEventListener("click",r)}),this.services.events.addEventListener(P.Toolbar.HIDE_OVERFLOW_MENU,function(){document.body.removeEventListener("click",r)})},n.prototype.render=function(e){var r=this,i=this.getComponentContainer().attr("role","toolbar"),a=_.getProperty(this.getOptions(),"data","loading");if(a)i.html("");else{this.overflowMenu||(this.overflowMenu=i.append("div").attr("class","bx--overflow-menu-options bx--overflow-menu--flip").attr("tabindex",-1).attr("role","menu").html("<ul></ul>"));var o=this.getControlConfigs(),s=o.buttonList,u=o.overflowMenuItemList;u&&s.push(this.getOverflowButtonConfig());var l=i.selectAll("div.toolbar-control").data(s,function(h){return h.id});l.exit().remove();var c=l.enter().append("div").attr("class","toolbar-control bx--overflow-menu").attr("role","button"),f=this;c.merge(l).classed("disabled",function(h){return h.shouldBeDisabled?h.shouldBeDisabled():!1}).attr("aria-disabled",function(h){return h.shouldBeDisabled?h.shouldBeDisabled():!1}).attr("aria-label",function(h){return h.title}).html(function(h){return`
			<button
				class="bx--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="`+r.services.domUtils.generateElementIDString("control-"+h.id)+'" aria-label="'+h.title+`">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform; width: `+(h.iconWidth!==void 0?h.iconWidth:"20px")+"; height: "+(h.iconWidth!==void 0?h.iconHeight:"20px")+`" xmlns="http://www.w3.org/2000/svg" class="bx--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					`+h.iconSVGContent+`
				</svg>
			</button>`}).each(function(h,d){V(this).select("button").on("click",h.shouldBeDisabled()?null:h.clickFunction).on("keydown",function(p){p.key&&p.key==="Enter"||p.key===" "?(p.preventDefault(),h.clickFunction()):p.key&&p.key==="ArrowLeft"?f.focusOnPreviousEnabledToolbarItem(d):p.key&&p.key==="ArrowRight"&&f.focusOnNextEnabledToolbarItem(d)})}),this.overflowButton=this.getComponentContainer().select("button.bx--overflow-menu__trigger#"+this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu"))}},n.prototype.renderOverflowMenu=function(){var e=this,r=this.getControlConfigs().overflowMenuItemList,i=this.overflowMenu.select("ul").selectAll("li.bx--overflow-menu-options__option").data(r,function(o){return _.getProperty(o,"id")});i.exit().remove();var a=i.enter().append("li").attr("id",function(o){return e.services.domUtils.generateElementIDString("control-"+o.id)}).attr("class","bx--overflow-menu-options__option").attr("role","menuitem");a.append("button").attr("class","bx--overflow-menu-options__btn"),a.merge(i).classed("bx--overflow-menu-options__option--disabled",function(o){return o.shouldBeDisabled()}).attr("aria-disabled",function(o){return o.shouldBeDisabled()}).selectAll("button").text(function(o){return o.text})},n.prototype.isOverflowMenuOpen=function(){return this.overflowMenu.classed("is-open")},n.prototype.updateOverflowMenu=function(e){this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),V(this.overflowButton.node().parentNode).classed("bx--overflow-menu--open",e)),e?this.services.events.dispatchEvent(P.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(P.Toolbar.HIDE_OVERFLOW_MENU)},n.prototype.focusOnPreviousEnabledToolbarItem=function(e){for(var r=this.getToolbarButtonItems(),i=r.length,a=e-1;a>=0;a--){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i<r.length){var s=V("button#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)).node();"focus"in s&&s.focus()}},n.prototype.focusOnNextEnabledToolbarItem=function(e){for(var r=this.getToolbarButtonItems(),i=-1,a=e+1;a<r.length;a++){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i>-1){var s=V("button#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)).node();"focus"in s&&s.focus()}},n.prototype.focusOnPreviousEnabledMenuItem=function(e){for(var r=this.getOverflowMenuItems(),i=r.length,a=e-1;a>=0;a--){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i<r.length){var s=V("#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)+" button").node();"focus"in s&&s.focus()}},n.prototype.focusOnNextEnabledMenuItem=function(e){for(var r=this.getOverflowMenuItems(),i=-1,a=e+1;a<r.length;a++){var o=r[a];if(!o.shouldBeDisabled()){i=a;break}}if(i>-1){var s=V("#"+this.services.domUtils.generateElementIDString("control-"+r[i].id)+" button").node();"focus"in s&&s.focus()}},n.prototype.toggleOverflowMenu=function(e){var r=this;if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);var i=this,a=this.getOverflowMenuItems();a.forEach(function(o,s){var u=V("#"+r.services.domUtils.generateElementIDString("control-"+o.id));u!==null&&(u.on("click",function(){o.clickFunction(),i.updateOverflowMenu(!1)}),u.on("keydown",function(l){l&&l.key==="Enter"?o.clickFunction():l&&l.key==="ArrowUp"?i.focusOnPreviousEnabledMenuItem(s):l&&l.key==="ArrowDown"?i.focusOnNextEnabledMenuItem(s):l&&l.key==="Escape"&&i.updateOverflowMenu(!1),l.preventDefault()}))}),i.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()},n.prototype.getControlConfigs=function(){var e=this,r=_.getProperty(this.getOptions(),"toolbar","numberOfIcons"),i=_.getProperty(this.getOptions(),"toolbar","controls"),a=[],o=[];return i.forEach(function(s){var u=e.getControlConfigByType(s.type);u&&(u.text=s.text?s.text:s.type,u.id.indexOf("toolbar-export")!==-1?o.push(u):a.push(u))}),a.length<=r&&o.length===0?{buttonList:a}:{buttonList:a.splice(0,r-1),overflowMenuItemList:a.concat(o)}},n.prototype.getToolbarButtonItems=function(){var e=this.getControlConfigs(),r=e.buttonList,i=e.overflowMenuItemList;return i&&r.push(this.getOverflowButtonConfig()),r||[]},n.prototype.getOverflowMenuItems=function(){var e=this.getControlConfigs().overflowMenuItemList;return e||[]},n.prototype.getOverflowButtonConfig=function(){var e=this;return{id:"toolbar-overflow-menu",title:"More options",shouldBeDisabled:function(){return!1},iconSVGContent:`<circle cx="16" cy="8" r="2"></circle>
							 <circle cx="16" cy="16" r="2"></circle>
							 <circle cx="16" cy="24" r="2"></circle>`,clickFunction:function(r){return e.toggleOverflowMenu(r)}}},n.prototype.getControlConfigByType=function(e){var r=this,i=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),a=this.model.getDisplayData(),o;switch(e){case Tt.ZOOM_IN:i&&(o={id:"toolbar-zoomIn",title:"Zoom in",shouldBeDisabled:function(){return r.services.zoom.isMinZoomDomain()},iconSVGContent:this.getControlIconByType(e),clickFunction:function(){return r.services.zoom.zoomIn()}});break;case Tt.ZOOM_OUT:i&&(o={id:"toolbar-zoomOut",title:"Zoom out",shouldBeDisabled:function(){return r.services.zoom.isMaxZoomDomain()},iconSVGContent:this.getControlIconByType(e),clickFunction:function(){return r.services.zoom.zoomOut()}});break;case Tt.RESET_ZOOM:i&&(o={id:"toolbar-resetZoom",title:"Reset zoom",shouldBeDisabled:function(){return r.services.zoom.isMaxZoomDomain()},iconSVGContent:this.getControlIconByType(e),clickFunction:function(){return r.services.zoom.resetZoomDomain()}});break;case Tt.MAKE_FULLSCREEN:o={id:"toolbar-makefullscreen",title:"Make fullscreen",iconSVGContent:this.getControlIconByType(e),iconWidth:"15px",iconHight:"15px",shouldBeDisabled:function(){return!1},clickFunction:function(){r.services.domUtils.toggleFullscreen()}};break;case Tt.SHOW_AS_DATATABLE:o={id:"toolbar-showasdatatable",title:"Show as table",iconSVGContent:this.getControlIconByType(e),shouldBeDisabled:function(){return a.length===0},clickFunction:function(){return r.services.events.dispatchEvent(P.Modal.SHOW)}};break;case Tt.EXPORT_CSV:o={id:"toolbar-export-CSV",title:"Export as CSV",shouldBeDisabled:function(){return!1},iconSVGContent:this.getControlIconByType(e),clickFunction:function(){return r.model.exportToCSV()}};break;case Tt.EXPORT_PNG:o={id:"toolbar-export-PNG",title:"Export as PNG",shouldBeDisabled:function(){return!1},iconSVGContent:this.getControlIconByType(e),clickFunction:function(){return r.services.domUtils.exportToPNG()}};break;case Tt.EXPORT_JPG:o={id:"toolbar-export-JPG",title:"Export as JPG",shouldBeDisabled:function(){return!1},iconSVGContent:this.getControlIconByType(e),clickFunction:function(){return r.services.domUtils.exportToJPG()}};break;default:throw Error("Not supported toolbar control type: "+e)}return o},n.prototype.getControlIconByType=function(e){switch(e){case Tt.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case Tt.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case Tt.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Tt.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case Tt.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case Tt.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Tt.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case Tt.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}},n}(ft),iN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xn=function(t){iN(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="zero-line",e.renderType=it.SVG,e}return n.prototype.render=function(e){var r=this,i=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),a=this.services.cartesianScales.getScaleByPosition(i),o=a.domain(),s=o[0],u=o[1],l=s>0&&u<0||s<0&&u>0,c=this.getComponentContainer();if(!l){c.selectAll("line.domain").remove();return}var f=this.services.cartesianScales.getDomainScale().range(),h=f[0],d=f[1],p=+a(0)+.5;p||(p=a.range()[0]);var m=_.flipSVGCoordinatesBasedOnOrientation({x0:h,x1:d,y0:p,y1:p},this.services.cartesianScales.getOrientation()),v=$.appendOrSelect(c,"line.domain");v.transition().call(function(x){return r.services.transitions.setupTransition({transition:x,name:"zero-line-update",animate:e})}).attr("y1",m.y0).attr("y2",m.y1).attr("x1",m.x0).attr("x2",m.x1)},n}(ft),aN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oN=function(t){aN(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="zoom-bar",e.renderType=it.SVG,e.MIN_SELECTION_DIFF=9e-10,e.brushSelector="g.zoom-bar-brush",e.clipId="zoomBarClip-"+Math.floor(Math.random()*99999999999),e.brush=Wp(),e.highlightStrokeWidth=1,e}return n.prototype.init=function(){this.services.events.addEventListener(P.ZoomBar.UPDATE,this.render.bind(this));var e=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"data");this.model.setZoomBarData(e)},n.prototype.render=function(e){var r=this,i=this.getComponentContainer(),a=this.services.zoom.isZoomBarLoading(j.TOP),o=this.services.zoom.isZoomBarLocked(j.TOP),s=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"type"),u=_.getProperty(this.getOptions(),"axes",j.BOTTOM,"highlights"),l=Wt.height[s],c=$.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(c!==0){var f=0,h=this.model.get("axesMargins");h&&h.left&&(f=h.left);var d=$.appendOrSelect(i,"svg.zoom-container").attr("width","100%").attr("height",l).attr("opacity",1);if($.appendOrSelect(i,"rect.zoom-spacer").attr("x",0).attr("y",l).attr("width","100%").attr("height",Wt.spacerHeight).attr("opacity",1).attr("fill","none"),s===ae.GRAPH_VIEW?$.appendOrSelect(d,"rect.zoom-bg").attr("x",f).attr("y",0).attr("width",c-f).attr("height","100%").classed("zoom-bg-skeleton",a).style("stroke",a?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null):s===ae.SLIDER_VIEW&&$.appendOrSelect(d,"rect.zoom-slider-bg").attr("x",f).attr("y",l/2-1).attr("width",c-f).attr("height",2).classed("zoom-slider-bg-skeleton",a).style("stroke",a?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null),a){this.renderSkeleton(d,f,c);return}var p=this.services.cartesianScales,m=p.getMainXScale(),v=p.getMainYScale(),x=p.getMainXScaleType();if(m&&x===et.TIME){var g=this.services.zoom.getZoomBarData();if(_.isEmpty(g)||g.length===1)return;this.xScale=m.copy(),this.yScale=v.copy();var y=this.services.zoom.getDefaultZoomBarDomain(g);g=this.compensateDataForDefaultDomain(g,y);var T=this.model.get("initialZoomDomain"),b=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"initialZoomDomain");b&&b[0]&&b[1]&&(b[0]=new Date(b[0]),b[1]=new Date(b[1])),b&&!(T&&T[0].valueOf()===b[0].valueOf()&&T[1].valueOf()===b[1].valueOf())?this.model.set({initialZoomDomain:_.merge([],b),zoomDomain:b?_.merge([],b):y},{skipUpdate:!0}):b===null&&T!=null&&this.model.set({initialZoomDomain:null,zoomDomain:_.merge([],y)},{skipUpdate:!0}),this.xScale.range([f,c]).domain(y),this.maxSelectionRange=this.xScale.range(),this.yScale.range([0,l-6]).domain(Se(g,function(L){return L.value}));var O=this.model.get("zoomDomain");if(s===ae.GRAPH_VIEW&&(this.renderZoomBarArea(d,"path.zoom-graph-area-unselected",g,null),this.updateClipPath(i,this.clipId,0,0,0,0),this.renderZoomBarArea(d,"path.zoom-graph-area",g,this.clipId),this.renderZoomBarBaseline(d,f,c),u)){var k=u.highlightStartMapsTo,w=u.highlightEndMapsTo,S=u.color,R=u.labelMapsTo;u.data.forEach(function(L,I){$.appendOrSelect(d,"rect.highlight-"+I).attr("height",l-2*r.highlightStrokeWidth).attr("y",r.highlightStrokeWidth).attr("x",r.xScale(L[k])).attr("width",r.xScale(L[w])-r.xScale(L[k])).style("fill",S&&S.scale[L[R]]?S.scale[L[R]]:null).style("fill-opacity",.1).style("stroke",S&&S.scale[L[R]]?S.scale[L[R]]:null).style("stroke-dasharray","2, 2").attr("stroke-width",1+"px")})}this.addBrushEventListener(O,f,c);var C=$.appendOrSelect(i,this.brushSelector).call(this.brush);if(O!==void 0)if(O[0].valueOf()===O[1].valueOf())C.call(this.brush.move,this.xScale.range()),this.updateBrushHandle(this.getComponentContainer(),this.xScale.range(),this.xScale.domain());else{var N=O.map(function(L){return r.xScale(L)});N[1]-N[0]<this.MIN_SELECTION_DIFF||(C.call(this.brush.move,N),this.updateBrushHandle(this.getComponentContainer(),N,O))}o&&(this.brush.filter(function(){return!1}),C.selectAll("rect").attr("cursor","auto"))}}},n.prototype.addBrushEventListener=function(e,r,i){var a=this,o=function(l){var c=l.selection;c===null?a.handleBrushedEvent(l,e,a.xScale,a.xScale.range()):c[0]===c[1]||a.handleBrushedEvent(l,e,a.xScale,c)},s=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"type"),u=Wt.height[s];this.brush.extent([[r,0],[i,u]]).on("start brush end",null).on("start brush end",o)},n.prototype.handleBrushedEvent=function(e,r,i,a){var o=[i.invert(a[0]),i.invert(a[1])];if(this.updateBrushHandle(this.getComponentContainer(),a,o),e.sourceEvent!=null&&(e.sourceEvent.type==="mousemove"||e.sourceEvent.type==="mouseup"||e.sourceEvent.type==="mousedown"||e.sourceEvent.type==="touchstart"||e.sourceEvent.type==="touchmove"||e.sourceEvent.type==="touchend")){(r===void 0||r[0]!==o[0]||r[1]!==o[1])&&this.services.zoom.handleDomainChange(o,{dispatchEvent:!1});var s=void 0;e.type==="start"?s=P.ZoomBar.SELECTION_START:e.type==="brush"?s=P.ZoomBar.SELECTION_IN_PROGRESS:e.type==="end"&&(s=P.ZoomBar.SELECTION_END,this.services.events.dispatchEvent(P.ZoomDomain.CHANGE,{newDomain:o})),this.services.events.dispatchEvent(s,{selection:a,newDomain:o})}},n.prototype.updateBrushHandle=function(e,r,i){var a=this,o=Wt.handleWidth,s=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"type"),u=Wt.height[s],l=-o/2,c=Wt.handleBarWidth,f=s===ae.GRAPH_VIEW?Wt.handleBarHeight:6,h=-c/2,d=(u-f)/2;e.select(this.brushSelector).selectAll("rect.handle").data([{type:"w"},{type:"e"}]).attr("x",function(m){if(m.type==="w")return Math.max(r[0]+l,a.maxSelectionRange[0]);if(m.type==="e")return Math.min(r[1]+l,a.maxSelectionRange[1]-o)}).attr("y",0).attr("width",o).attr("height",u).attr("cursor","ew-resize").style("display",null);var p=e.select(this.brushSelector).selectAll("rect.handle-bar").data([{type:"w"},{type:"e"}]);p.enter().append("rect").attr("class",function(m){return"handle-bar handle-bar--"+m.type}),p.attr("x",function(m){if(m.type==="w")return Math.max(r[0]+h,a.maxSelectionRange[0]-l+h);if(m.type==="e")return Math.min(r[1]+h,a.maxSelectionRange[1]+l+h)}).attr("y",d).attr("width",c).attr("height",f).attr("cursor","ew-resize"),s===ae.SLIDER_VIEW&&this.updateSliderSelectedArea(r),this.updateClipPath(e,this.clipId,r[0],0,r[1]-r[0],u)},n.prototype.updateSliderSelectedArea=function(e){var r=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"type"),i=Wt.height[r];$.getSVGElementSize(this.parent,{useAttrs:!0}).width;var a=this.model.get("axesMargins");a&&a.left;var o=this.getComponentContainer(),s=o.select("svg.zoom-container");$.appendOrSelect(s,"rect.zoom-slider-selected-area").attr("x",e[0]).attr("y",i/2-1).attr("width",e[1]-e[0]).attr("height",2)},n.prototype.renderZoomBarArea=function(e,r,i,a){var o=this.services.cartesianScales,s=o.getMainXAxisPosition(),u=o.getMainYAxisPosition(),l=o.getMainXScaleType(),c=o.getMainYScaleType(),f=function(g,y,T){return function(b,O){return o.getValueFromScale(g,y,T,b,O)}},h=f(this.xScale,l,s),d=f(this.yScale,c,u),p=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"type"),m=Wt.height[p],v=Xs().x(function(g,y){return h(g,y)}).y0(m).y1(function(g,y){return m-d(g,y)}),x=$.appendOrSelect(e,r).datum(i).attr("d",v);a&&x.attr("clip-path","url(#"+a+")")},n.prototype.updateClipPath=function(e,r,i,a,o,s){var u=$.appendOrSelect(e,"clipPath").attr("id",r);$.appendOrSelect(u,"rect").attr("x",i).attr("y",a).attr("width",o).attr("height",s)},n.prototype.compensateDataForDefaultDomain=function(e,r){if(!(!e||e.length<2)){var i=_.clone(e),a=this.services.cartesianScales.getDomainIdentifier(),o=this.services.cartesianScales.getRangeIdentifier();if(Number(r[0])<Number(i[0][a])){var s={};s[a]=r[0],s[o]=0,i.unshift(s)}if(Number(r[1])>Number(i[i.length-1][a])){var s={};s[a]=r[1],s[o]=0,i.push(s)}return i}},n.prototype.renderZoomBarBaseline=function(e,r,i,a){a===void 0&&(a=!1);var o=_.getProperty(this.model.getOptions(),"zoomBar",j.TOP,"type"),s=Wt.height[o],u=Fi()([[r,s],[i,s]]);$.appendOrSelect(e,"path.zoom-bg-baseline").attr("d",u).classed("zoom-bg-baseline-skeleton",a).style("stroke",a?"url(#"+this.services.domUtils.generateElementIDString("shimmer-lines")+")":null)},n.prototype.renderSkeleton=function(e,r,i){this.renderZoomBarArea(e,"path.zoom-graph-area-unselected",[],null),this.renderZoomBarArea(e,"path.zoom-graph-area",[],this.clipId),this.brush.on("start brush end",null),$.appendOrSelect(this.getComponentContainer(),this.brushSelector).html(null);var a=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"type");a===ae.GRAPH_VIEW&&this.renderZoomBarBaseline(e,r,i,!0)},n.prototype.destroy=function(){this.brush.on("start brush end",null),this.services.events.removeEventListener(P.ZoomBar.UPDATE,this.render.bind(this))},n}(ft),Yp=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},xe=function(){function t(n,e){this.services={domUtils:$,files:JE,events:KE,gradientUtils:au,transitions:eM,canvasZoom:VC},this.model=new Ae(this.services)}return t.prototype.init=function(n,e){var r=this;this.model.set({holder:n},{skipUpdate:!0}),Object.keys(this.services).forEach(function(i){var a=r.services[i];r.services[i]=new a(r.model,r.services)}),this.services.events.addEventListener(P.Model.UPDATE,function(i){var a=!!_.getProperty(i,"detail","animate");r.update(a)}),this.model.setData(e.data),this.services.events.addEventListener(P.Chart.RESIZE,function(){r.update(!1)}),this.components=this.getComponents(),this.update()},t.prototype.getComponents=function(){return console.error("getComponents() method is not implemented"),null},t.prototype.update=function(n){var e=this;if(n===void 0&&(n=!0),!!this.components){Object.keys(this.services).forEach(function(a){var o=e.services[a];o.update()}),this.components.forEach(function(a){return a.render(n)});var r=this.services.transitions.getPendingTransitions(),i=Object.keys(r).map(function(a){var o=r[a];return o.end().catch(function(s){return s})});Promise.all(i).then(function(){return e.services.events.dispatchEvent(P.Chart.RENDER_FINISHED)})}},t.prototype.destroy=function(){this.components.forEach(function(n){return n.destroy()}),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})},t.prototype.getChartComponents=function(n,e){var r=this.model.getOptions(),i=_.getProperty(r,"toolbar","enabled"),a={id:"legend",components:[new Dd(this.model,this.services)],growth:pt.PREFERRED},o=_.getProperty(r,"canvasZoom","enabled");o&&o===!0&&n.push(new cP(this.model,this.services));var s=!!this.model.getOptions().title,u={id:"title",components:[new wu(this.model,this.services)],growth:pt.STRETCH},l={id:"toolbar",components:[new qp(this.model,this.services)],growth:pt.PREFERRED},c={id:"header",components:[new gn(this.model,this.services,Yp([u],i?[l]:[]),{direction:St.ROW,alignItems:rr.CENTER})],growth:pt.PREFERRED},f={id:"graph-frame",components:n,growth:pt.STRETCH,renderType:_.getProperty(e,"graphFrameRenderType")||it.SVG},h=_.getProperty(e,"excludeLegend")!==!0&&r.legend.enabled!==!1,d=St.COLUMN;if(h){var p=_.getProperty(r,"legend","position");p==="left"?(d=St.ROW,r.legend.orientation||(r.legend.orientation=bn.VERTICAL)):p==="right"?(d=St.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=bn.VERTICAL)):p==="bottom"&&(d=St.COLUMN_REVERSE)}var m={id:"spacer",components:[new jr(this.model,this.services)],growth:pt.PREFERRED},v={id:"full-frame",components:[new gn(this.model,this.services,Yp(h?[a]:[],h?[m]:[],[f]),{direction:d})],growth:pt.STRETCH},x=[];if(s||i){x.push(c);var g={id:"spacer",components:[new jr(this.model,this.services,i?{size:15}:void 0)],growth:pt.PREFERRED};x.push(g)}return x.push(v),[new zd(this.model,this.services),new Gd(this.model,this.services),new gn(this.model,this.services,x,{direction:St.COLUMN})]},t}(),sN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qu=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Zn=function(t){sN(n,t);function n(e){return t.call(this,e)||this}return n.prototype.assignRangeAndDomains=function(){var e=this.services.cartesianScales,r=this.getOptions(),i=e.isDualAxes(),a={primaryDomain:e.domainAxisPosition,primaryRange:e.rangeAxisPosition,secondaryDomain:null,secondaryRange:null};return i&&(a.secondaryDomain=e.secondaryDomainAxisPosition,a.secondaryRange=e.secondaryRangeAxisPosition),Object.keys(a).forEach(function(o){var s=a[o];e.scales[s]?a[o]={position:s,label:e.getScaleLabel(s),identifier:_.getProperty(r,"axes",s,"mapsTo")}:a[o]=null}),a},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=this.services.cartesianScales,o=this.assignRangeAndDomains(),s=o.primaryDomain,u=o.primaryRange,l=o.secondaryDomain,c=o.secondaryRange,f=a.getDomainAxisScaleType(),h;f===et.TIME&&(h=function(p){return Vr(p,"MMM d, yyyy")});var d=Qu([Qu(["Group",s.label,u.label],l?[l.label]:[],c?[c.label]:[])],e.map(function(p){return Qu([p[i],p[s.identifier]===null?"&ndash;":h?h(p[s.identifier]):p[s.identifier],p[u.identifier]===null||isNaN(p[u.identifier])?"&ndash;":p[u.identifier].toLocaleString()],l?[p[l.identifier]===null?"&ndash;":p[l.identifier]]:[],c?[p[c.identifier]===null||isNaN(p[c.identifier])?"&ndash;":p[c.identifier]]:[])}));return d},n.prototype.setData=function(e){var r;if(e&&(r=t.prototype.setData.call(this,e),_.getProperty(this.getOptions(),"zoomBar",j.TOP,"enabled"))){var i=_.getProperty(this.getOptions(),"zoomBar",j.TOP,"data");this.setZoomBarData(i)}return r},n.prototype.setZoomBarData=function(e){var r=e?this.sanitize(_.clone(e)):this.getDisplayData(),i=r,a=this.services.cartesianScales;if(r&&a.domainAxisPosition&&a.rangeAxisPosition){var o=a.getDomainIdentifier(),s=a.getRangeIdentifier(),u=r.map(function(l){return l[o].getTime()});u=_.removeArrayDuplicates(u).sort(),i=u.map(function(l){var c=0,f={};return r.forEach(function(h){h[o].getTime()===l&&(c+=h[s])}),f[o]=new Date(l),f[s]=c,f})}this.set({zoomBarData:i})},n.prototype.getZoomBarData=function(){return this.get("zoomBarData")},n.prototype.sanitizeDateValues=function(e){var r=this.getOptions();if(!r.axes)return e;var i=[];return Object.keys(j).forEach(function(a){var o=j[a],s=r.axes[o];if(s&&s.scaleType===et.TIME){var u=s.mapsTo;(u!==null||u!==void 0)&&i.push(u)}}),i.length>0&&e.forEach(function(a){i.forEach(function(o){_.getProperty(a,o,"getTime")===null&&(a[o]=new Date(a[o]))})}),e},n.prototype.sanitize=function(e){return e=t.prototype.sanitize.call(this,e),e=this.sanitizeDateValues(e),e},n}(Ae),uN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xp=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},Jt=function(t){uN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.services=Object.assign(i.services,{cartesianScales:DC,curves:IC,zoom:BC}),i.model=new Zn(i.services),i}return n.prototype.getAxisChartComponents=function(e,r){var i=this.model.getOptions(),a=_.getProperty(i,"zoomBar",j.TOP,"enabled"),o=_.getProperty(i,"toolbar","enabled");this.services.cartesianScales.determineAxisDuality(),this.services.cartesianScales.findDomainAndRangeAxes(),this.services.cartesianScales.determineOrientation();var s=this.services.cartesianScales.getMainXAxisPosition(),u=_.getProperty(i,"axes",s,"scaleType"),l=a&&s===j.BOTTOM&&u===et.TIME,c=this.services.zoom.isZoomBarLocked(j.TOP),f=!!this.model.getOptions().title,h={id:"title",components:[new wu(this.model,this.services)],growth:pt.STRETCH},d={id:"toolbar",components:[new qp(this.model,this.services)],growth:pt.PREFERRED},p={id:"header",components:[new gn(this.model,this.services,Xp([h],o?[d]:[]),{direction:St.ROW,alignItems:rr.CENTER})],growth:pt.PREFERRED},m={id:"legend",components:[new Dd(this.model,this.services)],growth:pt.PREFERRED};l&&!c&&e.push(new Wd(this.model,this.services),new XI(this.model,this.services)),e.push(new tP(this.model,this.services)),e.push(new hP(this.model,this.services));var v={id:"graph-frame",components:e,growth:pt.STRETCH,renderType:it.SVG},x=_.getProperty(r,"legend","enabled")!==!1&&this.model.getOptions().legend.enabled!==!1,g=St.COLUMN;if(x){var y=_.getProperty(this.model.getOptions(),"legend","position");y===xn.LEFT?(g=St.ROW,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=bn.VERTICAL)):y===xn.RIGHT?(g=St.ROW_REVERSE,this.model.getOptions().legend.orientation||(this.model.getOptions().legend.orientation=bn.VERTICAL)):y===xn.BOTTOM&&(g=St.COLUMN_REVERSE)}var T={id:"spacer",components:[new jr(this.model,this.services)],growth:pt.PREFERRED},b={id:"full-frame",components:[new gn(this.model,this.services,Xp(x?[m]:[],x?[T]:[],[v]),{direction:g})],growth:pt.STRETCH},O={id:"zoom-bar",components:[new oN(this.model,this.services)],growth:pt.PREFERRED,renderType:it.SVG},k=[];if(f||o){k.push(p);var w={id:"spacer",components:[new jr(this.model,this.services,o?{size:15}:void 0)],growth:pt.PREFERRED};k.push(w)}return l&&k.push(O),k.push(b),[new sP(this.model,this.services),new Gd(this.model,this.services),new gn(this.model,this.services,k,{direction:St.COLUMN})]},n}(xe),lN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){lN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_.clone(_t.areaChart),r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new ze(this.model,this.services),new Hn(this.model,this.services),new jd(this.model,this.services),new ye(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0}),new zt(this.model,this.services,{skeleton:Mt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Jt);var cN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){cN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.stackedAreaChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new Ua(this.model,this.services),new qd(this.model,this.services),new Hn(this.model,this.services,{stacked:!0}),new Kd(this.model,this.services,{fadeInOnChartHolderMouseover:!0,handleThresholds:!0,stacked:!0}),new zt(this.model,this.services,{skeleton:Mt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Jt);var fN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){fN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.simpleBarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new Yd(this.model,this.services),new Xn(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.VERT_OR_HORIZ})],r=this.getAxisChartComponents(e);return r},n})(Jt);var hN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){hN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.groupedBarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new Xd(this.model,this.services),new Xn(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.VERT_OR_HORIZ})],r=this.getAxisChartComponents(e);return r},n})(Jt);var dN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){dN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.stackedBarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new Ua(this.model,this.services),new Zd(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.VERT_OR_HORIZ}),new Xn(this.model,this.services)],r=this.getAxisChartComponents(e);return r},n})(Jt);var pN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),vN=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},gN=function(t){pN(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getBoxQuartiles=function(e){return{q_25:ms(e,.25),q_50:ms(e,.5),q_75:ms(e,.75)}},n.prototype.getBoxplotData=function(){for(var e=this.getOptions(),r=e.data.groupMapsTo,i=this.getGroupedData(),a=[],o=function(d,p){for(var m,v=s.services.cartesianScales.getRangeIdentifier(),x=p.map(function(E){return E[v]}).sort(Dn),g=(m={},m[r]=d,m.counts=x,m.quartiles=s.getBoxQuartiles(x),m.outliers=null,m.whiskers=null,m),y=g.quartiles.q_25,T=g.quartiles.q_75,b=(T-y)*1.5,O=y-b,k=T+b,w=[],S=[],R=0,C=x;R<C.length;R++){var N=C[R];N<O||N>k?w.push(N):S.push(N)}g.outliers=w;var L=Ln(S),I=an(S);g.whiskers={min:L||Ln([g.quartiles.q_25,g.quartiles.q_50,g.quartiles.q_75]),max:I||an([g.quartiles.q_25,g.quartiles.q_50,g.quartiles.q_75])},a.push(g)},s=this,u=0,l=i;u<l.length;u++){var c=l[u],f=c.name,h=c.data;o(f,h)}return a},n.prototype.getTabularDataArray=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this.getBoxplotData(),a=vN([["Group","Minimum","Q1","Median","Q3","Maximum","IQR","Outlier(s)"]],i.map(function(o){var s=_.getProperty(o,"outliers");return(s===null||s.length===0)&&(s=["&ndash;"]),[o[r],_.getProperty(o,"whiskers","min")!==null?_.getProperty(o,"whiskers","min").toLocaleString():"&ndash;",_.getProperty(o,"quartiles","q_25")!==null?_.getProperty(o,"quartiles","q_25").toLocaleString():"&ndash;",_.getProperty(o,"quartiles","q_50")!==null?_.getProperty(o,"quartiles","q_50").toLocaleString():"&ndash;",_.getProperty(o,"quartiles","q_75")!==null?_.getProperty(o,"quartiles","q_75").toLocaleString():"&ndash;",_.getProperty(o,"whiskers","max")!==null?_.getProperty(o,"whiskers","max").toLocaleString():"&ndash;",_.getProperty(o,"quartiles","q_75")!==null&&_.getProperty(o,"quartiles","q_25")!==null?(_.getProperty(o,"quartiles","q_75")-_.getProperty(o,"quartiles","q_25")).toLocaleString():"&ndash;",s.map(function(u){return u.toLocaleString()}).join(",")]}));return a},n.prototype.setColorClassNames=function(){var e=1,r=_.getProperty(this.getOptions(),"color","pairing"),i=_.getProperty(r,"option"),a=Oo.pairingOptions;i=i<=a[e+"-color"]?i:1;var o=this.allDataGroups.map(function(s,u){return e+"-"+i+"-1"});this.colorClassNames=Ci().range(o).domain(this.allDataGroups)},n}(Zn),mN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){mN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new gN(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.boxplotChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new xP(this.model,this.services),new Xn(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.VERT_OR_HORIZ})],r=this.getAxisChartComponents(e,{legend:{enabled:!1}});return r},n})(Jt);var yN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){yN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.bubbleChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new ze(this.model,this.services),new TP(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Jt);var _N=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),xN=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},bN=function(t){_N(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getMatchingRangeIndexForDatapoint=function(e){for(var r,i=e.ranges.length-1;i>0;i--){var a=e.ranges[i];if(e.value>=a)return r=i,r}return 0},n.prototype.getTabularDataArray=function(){var e=this,r=this.getDisplayData(),i=this.getOptions(),a=i.data.groupMapsTo,o=this.services.cartesianScales.getRangeIdentifier(),s=_.getProperty(i,"bullet","performanceAreaTitles"),u=xN([["Title","Group","Value","Target","Percentage","Performance"]],r.map(function(l){return[l.title,l[a],l.value===null?"&ndash;":l.value,_.getProperty(l,"marker")===null?"&ndash;":l.marker,_.getProperty(l,"marker")===null?"&ndash;":Math.floor(l[o]/l.marker*100)+"%",s[e.getMatchingRangeIndexForDatapoint(l)]]}));return u},n}(Zn),ON=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){ON(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new bN(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.bulletChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new SP(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Jt);var TN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ju=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},wN=function(t){TN(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype.getTabularDataArray=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this.getBinnedStackedData(),a=Ju([Ju([bt(e,"bins.rangeLabel")||"Range"],i.map(function(o){return bt(o,"0."+r)}))],bt(i,0).map(function(o,s){return Ju([bt(o,"data.x0")+" \u2013 "+bt(o,"data.x1")],i.map(function(u){return bt(u[s],"data."+bt(u[s],r))}))}));return a},n}(Zn),SN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){SN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new wN(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.histogramChart,r.options)),i.init(e,r),i.update(),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new eN(this.model,this.services),new MP(this.model,this.services)],r=this.getAxisChartComponents(e);return r},n})(Jt);var EN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zp=function(t){EN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.lineChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new ze(this.model,this.services),new Hn(this.model,this.services),new ye(this.model,this.services,{handleThresholds:!0}),new $P(this.model,this.services),new Xn(this.model,this.services)],r=this.getAxisChartComponents(e);return r},n}(Jt),MN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){MN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.lollipopChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new ze(this.model,this.services),new PP(this.model,this.services),new ye(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Jt);var CN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){CN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.scatterChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new Kt(this.model,this.services),new Qt(this.model,this.services),new ze(this.model,this.services),new ye(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.GRID})],r=this.getAxisChartComponents(e);return r},n})(Jt);var AN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),PN=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},DN=function(t){AN(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularData=function(e){var r=t.prototype.getTabularData.call(this,e);return e!==r&&r.forEach(function(i){i.key&&i.key!==i.group&&(i.group=i.key)}),r},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=PN([["Group","Value"]],e.map(function(o){return[o[i],o.value===null?"&ndash;":o.value.toLocaleString()]}));return a},n.prototype.sanitize=function(e){var r=this.getTabularData(e);return r.sort(function(i,a){return a.value-i.value})},n}(Ae),LN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),RN=function(t){LN(n,t);function n(e,r,i){i===void 0&&(i=!1);var a=t.call(this,e,r)||this;return a.model=new DN(a.services),i||(a.model.setOptions(_.mergeDefaultChartOptions(_t.pieChart,r.options)),a.init(e,r)),a}return n.prototype.getComponents=function(){var e=[new Qd(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.PIE})],r=this.getChartComponents(e);return r},n}(xe),kN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){kN(n,t);function n(e,r){var i=t.call(this,e,r,!0)||this;return i.model.setOptions(_.mergeDefaultChartOptions(_t.donutChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new BP(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.DONUT})],r=this.getChartComponents(e);return r},n})(RN);var IN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),tl=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},NN=function(t){IN(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getMaximumDomain=function(e){var r=e.reduce(function(i,a){return i+a.value},0);return r},n.prototype.getFillColor=function(e){var r=this.getOptions(),i=_.getProperty(r,"color","scale"),a=this.getStatus();return i||!a?t.prototype.getFillColor.call(this,e):null},n.prototype.getStatus=function(){var e=this.getOptions(),r=_.getProperty(this.getDisplayData(),0,"value"),i=r>100?100:r,a=_.getProperty(e,"meter","status","ranges");if(a){var o=a.filter(function(s){return s.range[0]<=i&&i<=s.range[1]});if(o.length>0)return o[0].status}return null},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=this.getStatus(),o=_.getProperty(r,"meter","proportional"),s=[],u;if(o===null){u=100;var l=e[0];s=[tl(["Group","Value"],a?["Status"]:[]),tl([l[i],l.value],a?[a]:[])]}else{var c=_.getProperty(o,"total");u=c||this.getMaximumDomain(e),s=tl([["Group","Value","Percentage of total"]],e.map(function(f){return[f[i],f.value,(f.value/u*100).toFixed(2)+" %"]}))}return s},n}(Ae),BN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kn=globalThis&&globalThis.__assign||function(){return Kn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kn.apply(this,arguments)},UN=function(t){BN(n,t);function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="meter",e.renderType=it.SVG,e}return n.prototype.getStackedBounds=function(e,r){var i=0,a=e.map(function(o,s){return s!==0?(i+=r(o.value),Kn(Kn({},o),{width:Math.abs(r(o.value)-Ht.dividerWidth),x:i-r(o.value)})):(i=r(o.value),Kn(Kn({},o),{width:Math.abs(r(o.value)-Ht.dividerWidth),x:0}))});return a},n.prototype.render=function(e){var r=this;e===void 0&&(e=!0);var i=this,a=this.getComponentContainer(),o=this.getOptions(),s=_.getProperty(o,"meter","proportional"),u=this.model.getDisplayData(),l=this.model.getStatus(),c=$.getSVGElementSize(a,{useAttrs:!0}).width,f=o.data.groupMapsTo,h;if(_.getProperty(o,"meter","proportional")===null)h=100;else{var d=_.getProperty(o,"meter","proportional","total");h=d||this.model.getMaximumDomain(this.model.getDisplayData())}var p=Be().domain([0,h]).range([0,c]),m=this.getStackedBounds(u,p),v=_.getProperty(o,"meter","height");$.appendOrSelect(a,"rect.container").attr("x",0).attr("y",0).attr("width",c).attr("height",v||(s?Ht.height.proportional:Ht.height.default)),$.appendOrSelect(a,"line.rangeIndicator").attr("x1",c).attr("x2",c).attr("y1",0).attr("y2",v||(s?Ht.height.proportional:Ht.height.default));var x=a.selectAll("rect.value").data(m),g=l!=null&&!i.model.isUserProvidedColorScaleValid()?"value status--"+l:"value";x.enter().append("rect").classed("value",!0).merge(x).attr("x",function(O){return O.x}).attr("y",0).attr("height",function(){var O=_.getProperty(o,"meter","height");return O||(s?Ht.height.proportional:Ht.height.default)}).attr("class",function(O){return r.model.getColorClassName({classNameTypes:[rt.FILL],dataGroupName:O[f],originalClassName:g})}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"meter-bar-update",animate:e})}).attr("width",function(O,k){return O.value>h?p(h):O.width}).style("fill",function(O){return i.model.getFillColor(O[f])}).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",function(O){return O.value}),x.exit().remove();var y=s?null:_.getProperty(o,"meter","peak"),T=y;y!==null&&(y>h?T=h:y<u[0].value&&(T=u[0].value>h?h:u[0].value));var b=a.selectAll("line.peak").data(T==null?[]:[T]);b.enter().append("line").classed("peak",!0).merge(b).attr("y1",0).attr("y2",function(){var O=_.getProperty(o,"meter","height");return O||8}).transition().call(function(O){return r.services.transitions.setupTransition({transition:O,name:"peak-line-update",animate:e})}).attr("x1",function(O){return p(O)}).attr("x2",function(O){return p(O)}).attr("role",st.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",function(O){return O}),b.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()},n.prototype.addEventListeners=function(){var e=this.getOptions(),r=e.data.groupMapsTo,i=this,a=_.getProperty(e,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",function(o,s){var u=V(this);i.services.events.dispatchEvent(P.Meter.METER_MOUSEOVER,{event:o,element:u,datum:s}),a&&(u.classed("hovered",!0),i.services.events.dispatchEvent(P.Tooltip.SHOW,{event:o,hoveredElement:u,items:[{label:s[r],value:s.value}]}))}).on("mousemove",function(o,s){var u=V(this);i.services.events.dispatchEvent(P.Meter.METER_MOUSEMOVE,{event:o,element:u,datum:s}),a&&i.services.events.dispatchEvent(P.Tooltip.MOVE,{event:o})}).on("click",function(o,s){i.services.events.dispatchEvent(P.Meter.METER_CLICK,{event:o,element:V(this),datum:s})}).on("mouseout",function(o,s){var u=V(this);i.services.events.dispatchEvent(P.Meter.METER_MOUSEOUT,{event:o,element:u,datum:s}),a&&(u.classed("hovered",!1),i.services.events.dispatchEvent(P.Tooltip.HIDE,{hoveredElement:u}))})},n.prototype.destroy=function(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)},n}(ft),VN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){VN(n,t);function n(e,r){var i=t.call(this,e,r)||this;i.model=new NN(i.services);var a=r.options.meter.proportional?_.merge(_.clone(_t.proportionalMeterChart),r.options):_.merge(_.clone(_t.meterChart),r.options);return i.model.setOptions(a),i.init(e,r),i}return n.prototype.getComponents=function(){var e={id:"meter-graph",components:[new UN(this.model,this.services)],growth:pt.STRETCH,renderType:it.SVG},r={id:"meter-title",components:[new rP(this.model,this.services)],growth:pt.STRETCH,renderType:it.SVG},i={id:"spacer",components:[new jr(this.model,this.services,{size:8})],growth:pt.STRETCH},a=[new gn(this.model,this.services,[r,i,e],{direction:St.COLUMN})],o=this.getChartComponents(a,{graphFrameRenderType:it.HTML});return o},n})(xe);var $N=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),el=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},GN=function(t){$N(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getOptions(),r=this.getGroupedData(),i=_.getProperty(e,"radar","axes"),a=i.angle,o=i.value,s=_.getProperty(r,"0","data").map(function(l){return l[a]}),u=el([el(["Group"],s)],r.map(function(l){return el([l.name],s.map(function(c,f){return _.getProperty(l,"data",f,o)!==null?_.getProperty(l,"data",f,o).toLocaleString():"&ndash;"}))}));return u},n}(Zn),FN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){FN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new GN(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.radarChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new _R(this.model,this.services)],r=this.getChartComponents(e);return r},n})(xe);var HN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zN=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},WN=function(t){HN(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getDataGroups=function(){return t.prototype.getDataGroups.call(this).filter(function(e){return e.name!=="delta"})},n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.data.groupMapsTo,a=zN([["Group","Value"]],e.map(function(o){return[o[i],o.value===null?"&ndash;":o.value.toLocaleString()]}));return a},n}(Ae),jN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){jN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new WN(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.gaugeChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new IP(this.model,this.services)],r=this.getChartComponents(e);return r},n})(xe);var qN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),YN=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},ke,Kp=(ke={},ke[qt.LINE]=[Hn,ye],ke[qt.SCATTER]=[ye],ke[qt.AREA]=[jd,Hn,ye],ke[qt.STACKED_AREA]=[qd,Hn,Kd,Ua],ke[qt.SIMPLE_BAR]=[Yd],ke[qt.GROUPED_BAR]=[Xd,Xn],ke[qt.STACKED_BAR]=[Zd,Ua],ke);(function(t){qN(n,t);function n(e,r){var i=t.call(this,e,r)||this,a=_.mergeDefaultChartOptions(_t.comboChart,r.options);return r.options.comboChartTypes||(console.error("No comboChartTypes defined for the Combo Chart!"),a.comboChartTypes=[{type:qt.LINE,correspondingDatasets:[]}]),i.model.setOptions(a),i.init(e,r),i}return n.prototype.getGraphComponents=function(){var e=this,r=this.model.getOptions().comboChartTypes,i=0,a=r.map(function(o){var s=o.type,u;if(typeof o.type=="string"){if(!Object.keys(Kp).includes(o.type))return console.error('Invalid chart type "'+o.type+'" specified for combo chart. Please refer to the ComboChart tutorial for more guidance.'),null;var l;return u=_.merge({},_t[_.camelCase(o.type)+"Chart"],e.model.getOptions(),o.options),o.type===qt.STACKED_AREA&&(l=!0),Kp[o.type].map(function(c,f){return new c(e.model,e.services,{groups:o.correspondingDatasets,id:i++,options:u,stacked:l})})}else return u=_.merge({},e.model.getOptions(),o.options),new s(e.model,e.services,{groups:o.correspondingDatasets,id:i++,options:u})}).filter(function(o){return o!==null});return _.flatten(a)},n.prototype.getComponents=function(){var e=this.model.getOptions().comboChartTypes,r=e.some(function(o){return o.type===qt.STACKED_BAR||o.type===qt.STACKED_AREA}),i=YN([new Kt(this.model,this.services),new Qt(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.GRID})],r?[]:[new ze(this.model,this.services)],this.getGraphComponents()),a=this.getAxisChartComponents(i);return a},n})(Jt);var XN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZN=function(t){XN(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this,r=this.getDisplayData(),i=[["Child","Parent"]];return r.forEach(function(a){e.getChildrenDatums(a,i),i.push([a.name,"&ndash;"])}),i},n.prototype.getChildrenDatums=function(e,r){var i=this;r===void 0&&(r=[]),e.children&&e.children.length>0&&e.children.forEach(function(a){i.getChildrenDatums(a,r),r.push([a.name,e.name])})},n}(Ae),KN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){KN(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new ZN(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.treeChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new V2(this.model,this.services)],r=this.getChartComponents(e,{excludeLegend:!0});return r},n})(xe);var QN=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),JN=function(t){QN(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=[["Child","Group","Value"]];return e.forEach(function(i){i.children.forEach(function(a){r.push([a.name,i.name,a.value])})}),r},n}(Ae),tB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){tB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new JN(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.treemapChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new vR(this.model,this.services)],r=this.getChartComponents(e);return r},n})(xe);var eB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qn=globalThis&&globalThis.__assign||function(){return Qn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qn.apply(this,arguments)},nB=function(t){eB(n,t);function n(e){var r=t.call(this,e)||this;return r.parentNode=!1,r.set({depth:2},{skipUpdate:!0}),r}return n.prototype.setData=function(e){t.prototype.setData.call(this,e),this.setDataGroups(),e.length===1&&(this.parentNode=!0),this.setZoom()},n.prototype.setOptions=function(e){var r=this.getOptions(),i=_.merge({},e,this.getZoomOptions(e));_.updateLegendAdditionalItems(r,i);var a=this.getHierarchyLevel(),o=_.getProperty(r,"circlePack","hierarchyLevel");this.set({options:_.merge(r,i),depth:o&&o<4?o:a})},n.prototype.getZoomOptions=function(e){if(!this.getDisplayData())return{};var r=this.getDisplayData(),i=e||this.getOptions(),a=r.length===1&&_.getProperty(r,0,"children")?_.getProperty(r,0,"children"):r,o=this.getHierarchyLevel();return a.some(function(s){if(s.children&&s.children.some(function(u){return u.children}))return o=3,!1}),_.getProperty(i,"canvasZoom","enabled")===!0&&o>2?{legend:{additionalItems:[{type:Ct.ZOOM,name:"Click to zoom"}]}}:null},n.prototype.setZoom=function(e){this.setOptions(this.getZoomOptions(e))},n.prototype.updateHierarchyLevel=function(e){this.set({depth:e})},n.prototype.getHierarchyLevel=function(){return this.get("depth")},n.prototype.hasParentNode=function(){return this.parentNode},n.prototype.setDataGroups=function(){var e=this,r=this.getData(),i=this.getOptions(),a=i.data.groupMapsTo,o=r.map(function(s){var u=s[a];return e.setChildrenDataGroup(s,u)});this.set({data:o},{skipUpdate:!0})},n.prototype.setChildrenDataGroup=function(e,r){var i=this;return e.children?Qn(Qn({},e),{dataGroupName:r,children:e.children.map(function(a,o){return i.setChildrenDataGroup(a,r)})}):Qn(Qn({},e),{dataGroupName:r})},n.prototype.getTabularDataArray=function(){var e=this,r=this.getDisplayData(),i=[["Child","Parent","Value"]];return r.forEach(function(a){var o=a.value?a.value:0;a.children&&(o+=e.getChildrenDatums(a.children,a.name,i,0)),i.push(["&ndash;",a.name,o])}),i},n.prototype.getChildrenDatums=function(e,r,i,a){var o=this;i===void 0&&(i=[]),a===void 0&&(a=0);var s=r;return e.forEach(function(u){var l=u.name,c=0;if(u.children)u.children.length>0&&(typeof u.value=="number"&&(a+=u.value),c+=o.getChildrenDatums(u.children,l,i,c),i.push([l,s,c]),a+=c);else{var f=0;typeof u.value=="number"&&(f=u.value,a+=u.value),i.push([u.name,s,f])}}),a},n}(Ae),rB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){rB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new nB(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.circlePackChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new OR(this.model,this.services)],r=this.getChartComponents(e);return r},n})(xe);var iB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),aB=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},oB=function(t){iB(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getDisplayData(),r=this.getOptions(),i=r.wordCloud,a=i.fontSizeMapsTo,o=i.wordMapsTo,s=r.data.groupMapsTo,u=aB([[r.tooltip.wordLabel,"Group",r.tooltip.valueLabel]],e.map(function(l){return[l[o],l[s],l[a]]}));return u},n}(Ae),sB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){sB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new oB(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.wordCloudChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new zR(this.model,this.services),new zt(this.model,this.services,{skeleton:Mt.PIE})],r=this.getChartComponents(e);return r},n})(xe);var uB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),lB=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r},cB=function(t){uB(n,t);function n(e){return t.call(this,e)||this}return n.prototype.getTabularDataArray=function(){var e=this.getDisplayData();e.sort(function(i,a){return i.source.localeCompare(a.source)});var r=lB([["Source","Target","Value"]],e.map(function(i){return[i.source,i.target,i.value]}));return r},n}(Zn),fB=globalThis&&globalThis.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},t(n,e)};return function(n,e){t(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(t){fB(n,t);function n(e,r){var i=t.call(this,e,r)||this;return i.model=new cB(i.services),i.model.setOptions(_.mergeDefaultChartOptions(_t.alluvialChart,r.options)),i.init(e,r),i}return n.prototype.getComponents=function(){var e=[new ck(this.model,this.services)],r=this.getChartComponents(e,{excludeLegend:!0});return r},n})(xe);function hB(t){let n,e=[t[2],{id:t[1]}],r={};for(let i=0;i<e.length;i+=1)r=We(r,e[i]);return{c(){n=ll("div"),this.h()},l(i){n=vv(i,"DIV",{id:!0}),fl(n).forEach($a),this.h()},h(){cl(n,r)},m(i,a){fv(i,n,a),t[7](n)},p(i,[a]){cl(n,r=ml(e,[a&4&&i[2],a&2&&{id:i[1]}]))},i:be,o:be,d(i){i&&$a(n),t[7](null)}}}function dB(t,n,e){const r=["Chart","chart","data","options","id","ref"];let i=ti(n,r),{Chart:a=void 0}=n,{chart:o=null}=n,{data:s=[]}=n,{options:u={}}=n,{id:l="chart-"+Math.random().toString(36)}=n,{ref:c=null}=n;const f=_v();yv(()=>{const d=c||document.getElementById(l);return d&&(e(3,o=new a(d,{data:s,options:u})),f("load",o)),()=>{o&&(o.components.forEach(p=>p.destroy()),e(3,o=null),f("destroy"))}});function h(d){nr[d?"unshift":"push"](()=>{c=d,e(0,c)})}return t.$$set=d=>{n=We(We({},n),ul(d)),e(2,i=ti(n,r)),"Chart"in d&&e(4,a=d.Chart),"chart"in d&&e(3,o=d.chart),"data"in d&&e(5,s=d.data),"options"in d&&e(6,u=d.options),"id"in d&&e(1,l=d.id),"ref"in d&&e(0,c=d.ref)},t.$$.update=()=>{t.$$.dirty&104&&o&&(o.model.setData(s),o.model.setOptions(u),f("update",{data:s,options:u}))},[c,l,i,o,a,s,u,h]}class pB extends Ol{constructor(n){super();bl(this,n,dB,hB,Va,{Chart:4,chart:3,data:5,options:6,id:1,ref:0})}}function vB(t){let n,e,r,i;const a=[t[2],{Chart:Zp}];function o(l){t[3](l)}function s(l){t[4](l)}let u={};for(let l=0;l<a.length;l+=1)u=We(u,a[l]);return t[1]!==void 0&&(u.ref=t[1]),t[0]!==void 0&&(u.chart=t[0]),n=new pB({props:u}),nr.push(()=>yl(n,"ref",o)),nr.push(()=>yl(n,"chart",s)),n.$on("load",t[5]),n.$on("update",t[6]),n.$on("destroy",t[7]),{c(){wv(n.$$.fragment)},l(l){Sv(n.$$.fragment,l)},m(l,c){_l(n,l,c),i=!0},p(l,[c]){const f=c&4?ml(a,[c&4&&Tv(l[2]),c&0&&{Chart:Zp}]):{};!e&&c&2&&(e=!0,f.ref=l[1],vl(()=>e=!1)),!r&&c&1&&(r=!0,f.chart=l[0],vl(()=>r=!1)),n.$set(f)},i(l){i||(Xa(n.$$.fragment,l),i=!0)},o(l){gl(n.$$.fragment,l),i=!1},d(l){xl(n,l)}}}function gB(t,n,e){const r=["chart","ref"];let i=ti(n,r),{chart:a=null}=n,{ref:o=null}=n;function s(h){o=h,e(1,o)}function u(h){a=h,e(0,a)}function l(h){Fa.call(this,t,h)}function c(h){Fa.call(this,t,h)}function f(h){Fa.call(this,t,h)}return t.$$set=h=>{n=We(We({},n),ul(h)),e(2,i=ti(n,r)),"chart"in h&&e(0,a=h.chart),"ref"in h&&e(1,o=h.ref)},[a,o,i,s,u,l,c,f]}class FB extends Ol{constructor(n){super();bl(this,n,gB,vB,Va,{chart:0,ref:1})}}export{nr as $,yv as A,We as B,$B as C,_B as D,bB as E,OB as F,xB as G,cv as H,be as I,GB as J,mB as K,CB as L,Jn as M,yB as N,TB as O,Wa as P,RB as Q,LB as R,Ol as S,wB as T,AB as U,kB as V,UB as W,VB as X,BB as Y,vl as Z,SB as _,fl as a,yl as a0,FB as a1,hv as b,vv as c,$a as d,ll as e,fv as f,gv as g,DB as h,bl as i,wv as j,EB as k,MB as l,Sv as m,PB as n,_l as o,ml as p,Tv as q,bv as r,Va as s,Ga as t,gl as u,xl as v,Ov as w,Xa as x,NB as y,IB as z};
